<!doctype html><html><head><title>Il salvataggio di Milano</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><script type="module" crossorigin>
var Wn=Object.defineProperty;var Zn=(n,e,t)=>e in n?Wn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var U=(n,e,t)=>(Zn(n,typeof e!="symbol"?e+"":e,t),t),St=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var pe=(n,e,t)=>(St(n,e,"read from private field"),t?t.call(n):e.get(n)),Et=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},_t=(n,e,t,r)=>(St(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Gn={"config.logger.show.parse":!1,"config.logger.show.render":!1,"config.logger.show.sound":!1,"config.logger.show.state":!1,"config.logger.show.story":!1,"config.logger.show.style":!1};function Jt(n){return n+": "}const Me={inserts:!0};function Jn(n){Me[n]=!1}function Xn(n){Me[n]=!0}function Xt(n,e){Me[n]&&(console.log(Jt(n)+e),window.dispatchEvent(new CustomEvent("log-info",{detail:{message:e,source:n}})))}function Qt(n,e){Me[n]&&(console.warn(Jt(n)+e),window.dispatchEvent(new CustomEvent("log-warning",{detail:{message:e,source:n}})))}function F(n){return{log(e){Xt(n,e)},warn(e){Qt(n,e)}}}function Qn(){window.addEventListener("state-change",n=>{const e=/^config\.logger\.show\.(.+)$/.exec(n.detail.name);e&&e[1]&&(n.detail.value?Xn(e[1]):Jn(e[1]))})}var Kn=typeof global=="object"&&global&&global.Object===Object&&global;const Yn=Kn;var er=typeof self=="object"&&self&&self.Object===Object&&self,tr=Yn||er||Function("return this")();const it=tr;var nr=it.Symbol;const le=nr;var Kt=Object.prototype,rr=Kt.hasOwnProperty,ir=Kt.toString,ge=le?le.toStringTag:void 0;function sr(n){var e=rr.call(n,ge),t=n[ge];try{n[ge]=void 0;var r=!0}catch{}var i=ir.call(n);return r&&(e?n[ge]=t:delete n[ge]),i}var or=Object.prototype,ar=or.toString;function lr(n){return ar.call(n)}var cr="[object Null]",ur="[object Undefined]",Tt=le?le.toStringTag:void 0;function Yt(n){return n==null?n===void 0?ur:cr:Tt&&Tt in Object(n)?sr(n):lr(n)}function dr(n){return n!=null&&typeof n=="object"}var fr="[object Symbol]";function st(n){return typeof n=="symbol"||dr(n)&&Yt(n)==fr}function hr(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var pr=Array.isArray;const ot=pr;var gr=1/0,Ct=le?le.prototype:void 0,At=Ct?Ct.toString:void 0;function en(n){if(typeof n=="string")return n;if(ot(n))return hr(n,en)+"";if(st(n))return At?At.call(n):"";var e=n+"";return e=="0"&&1/n==-gr?"-0":e}function Pe(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var mr="[object AsyncFunction]",br="[object Function]",yr="[object GeneratorFunction]",wr="[object Proxy]";function kr(n){if(!Pe(n))return!1;var e=Yt(n);return e==br||e==yr||e==mr||e==wr}var xr=it["__core-js_shared__"];const Fe=xr;var Lt=function(){var n=/[^.]+$/.exec(Fe&&Fe.keys&&Fe.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function vr(n){return!!Lt&&Lt in n}var $r=Function.prototype,Sr=$r.toString;function Er(n){if(n!=null){try{return Sr.call(n)}catch{}try{return n+""}catch{}}return""}var _r=/[\\^$.*+?()[\]{}|]/g,Tr=/^\[object .+?Constructor\]$/,Cr=Function.prototype,Ar=Object.prototype,Lr=Cr.toString,zr=Ar.hasOwnProperty,Pr=RegExp("^"+Lr.call(zr).replace(_r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Or(n){if(!Pe(n)||vr(n))return!1;var e=kr(n)?Pr:Tr;return e.test(Er(n))}function Ir(n,e){return n==null?void 0:n[e]}function at(n,e){var t=Ir(n,e);return Or(t)?t:void 0}var Nr=function(){try{var n=at(Object,"defineProperty");return n({},"",{}),n}catch{}}();const zt=Nr;var Rr=9007199254740991,Mr=/^(?:0|[1-9]\d*)$/;function Dr(n,e){var t=typeof n;return e=e??Rr,!!e&&(t=="number"||t!="symbol"&&Mr.test(n))&&n>-1&&n%1==0&&n<e}function jr(n,e,t){e=="__proto__"&&zt?zt(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function tn(n,e){return n===e||n!==n&&e!==e}var qr=Object.prototype,Hr=qr.hasOwnProperty;function Fr(n,e,t){var r=n[e];(!(Hr.call(n,e)&&tn(r,t))||t===void 0&&!(e in n))&&jr(n,e,t)}var Br=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ur=/^\w*$/;function Vr(n,e){if(ot(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||st(n)?!0:Ur.test(n)||!Br.test(n)||e!=null&&n in Object(e)}var Wr=at(Object,"create");const we=Wr;function Zr(){this.__data__=we?we(null):{},this.size=0}function Gr(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Jr="__lodash_hash_undefined__",Xr=Object.prototype,Qr=Xr.hasOwnProperty;function Kr(n){var e=this.__data__;if(we){var t=e[n];return t===Jr?void 0:t}return Qr.call(e,n)?e[n]:void 0}var Yr=Object.prototype,ei=Yr.hasOwnProperty;function ti(n){var e=this.__data__;return we?e[n]!==void 0:ei.call(e,n)}var ni="__lodash_hash_undefined__";function ri(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=we&&e===void 0?ni:e,this}function ee(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ee.prototype.clear=Zr;ee.prototype.delete=Gr;ee.prototype.get=Kr;ee.prototype.has=ti;ee.prototype.set=ri;function ii(){this.__data__=[],this.size=0}function De(n,e){for(var t=n.length;t--;)if(tn(n[t][0],e))return t;return-1}var si=Array.prototype,oi=si.splice;function ai(n){var e=this.__data__,t=De(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():oi.call(e,t,1),--this.size,!0}function li(n){var e=this.__data__,t=De(e,n);return t<0?void 0:e[t][1]}function ci(n){return De(this.__data__,n)>-1}function ui(n,e){var t=this.__data__,r=De(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function de(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}de.prototype.clear=ii;de.prototype.delete=ai;de.prototype.get=li;de.prototype.has=ci;de.prototype.set=ui;var di=at(it,"Map");const fi=di;function hi(){this.size=0,this.__data__={hash:new ee,map:new(fi||de),string:new ee}}function pi(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function je(n,e){var t=n.__data__;return pi(e)?t[typeof e=="string"?"string":"hash"]:t.map}function gi(n){var e=je(this,n).delete(n);return this.size-=e?1:0,e}function mi(n){return je(this,n).get(n)}function bi(n){return je(this,n).has(n)}function yi(n,e){var t=je(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function re(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}re.prototype.clear=hi;re.prototype.delete=gi;re.prototype.get=mi;re.prototype.has=bi;re.prototype.set=yi;var wi="Expected a function";function lt(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(wi);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var a=n.apply(this,r);return t.cache=s.set(i,a)||s,a};return t.cache=new(lt.Cache||re),t}lt.Cache=re;var ki=500;function xi(n){var e=lt(n,function(r){return t.size===ki&&t.clear(),r}),t=e.cache;return e}var vi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$i=/\\(\\)?/g,Si=xi(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(vi,function(t,r,i,s){e.push(i?s.replace($i,"$1"):r||t)}),e});const Ei=Si;function ct(n){return n==null?"":en(n)}function ut(n,e){return ot(n)?n:Vr(n,e)?[n]:Ei(ct(n))}var _i=1/0;function dt(n){if(typeof n=="string"||st(n))return n;var e=n+"";return e=="0"&&1/n==-_i?"-0":e}function nn(n,e){e=ut(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[dt(e[t++])];return t&&t==r?n:void 0}function Be(n,e,t){var r=n==null?void 0:nn(n,e);return r===void 0?t:r}function Ti(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}function rn(n){return function(e){return n==null?void 0:n[e]}}function Ci(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var Ai={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Li=rn(Ai);const zi=Li;var sn=/[&<>"']/g,Pi=RegExp(sn.source);function H(n){return n=ct(n),n&&Pi.test(n)?n.replace(sn,zi):n}function Oi(n,e){return e.length<2?n:nn(n,Ti(e,0,-1))}function Ii(n,e){return e=ut(e,n),n=Oi(n,e),n==null||delete n[dt(Ci(e))]}function Ni(n,e,t,r){if(!Pe(n))return n;e=ut(e,n);for(var i=-1,s=e.length,a=s-1,l=n;l!=null&&++i<s;){var o=dt(e[i]),u=t;if(o==="__proto__"||o==="constructor"||o==="prototype")return n;if(i!=a){var c=l[o];u=r?r(c,o,l):void 0,u===void 0&&(u=Pe(c)?c:Dr(e[i+1])?[]:{})}Fr(l,o,u),l=l[o]}return n}function ft(n,e,t){return n==null?n:Ni(n,e,t)}var Ri={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mi=rn(Ri);const Di=Mi;var on=/&(?:amp|lt|gt|quot|#39);/g,ji=RegExp(on.source);function qi(n){return n=ct(n),n&&ji.test(n)?n.replace(on,Di):n}function Hi(n,e){return n==null?!0:Ii(n,e)}const an=F("story"),P={customScripts:[],customStyles:[],passages:[]};function ln(n){for(const r of["name","creator","ifid","options"])P[r]=n.getAttribute(r)??void 0;const e=parseInt(n.getAttribute("startnode")??"");isNaN(e)||(P.startNode=e),P.creatorVersion=n.getAttribute("creator-version")??void 0;const t=r=>[...r].map(i=>i.textContent??"");P.customScripts=t(n.querySelectorAll('[type="text/twine-javascript"]')),P.customStyles=t(n.querySelectorAll('[type="text/twine-css"]')),P.passages=[...n.querySelectorAll("tw-passagedata")].map(r=>{const i=parseInt(r.getAttribute("pid")??""),s=r.getAttribute("tags");return{id:isNaN(i)?void 0:i,name:r.getAttribute("name")??void 0,source:r.textContent??"",tags:s?s.split(" "):[]}})}function cn(){const n=pt();if(!n||!n.name)throw new Error("There is no starting passage for this story, or it has no name.");ie({trail:[n.name],"config.testing":typeof P.options=="string"&&P.options.indexOf("debug")!==-1||!1}),P.name&&(document.title=P.name)}function un(){an.log(`Running custom scripts (${P.customScripts.length})`);for(const n of P.customScripts)new Function(n).apply(window)}function dn(){an.log(`Adding custom styles (${P.customStyles.length})`);for(const n of P.customStyles){const e=document.createElement("style");e.innerHTML=n,document.head.appendChild(e)}}function fn(){return P.ifid}function ht(){return P.name}function Fi(){return P.passages}function pt(){return P.passages.find(n=>n.id===P.startNode)}function Se(n){return P.passages.find(e=>e.name===n)}function Bi(n){return P.passages.find(e=>e.id===n)}function hn(n){let e=[],t=!1;return async(...r)=>{t||(t=!0,Promise.resolve().then(()=>{try{n(e),e=[],t=!1}catch(i){window.setTimeout(()=>{throw i})}})),e.push(r)}}function ke(n,e,t=[]){const r=document.createElement(n);if(e)for(const i of Object.keys(e))e[i]!==void 0&&r.setAttribute(i,e[i]);for(const i of t)typeof i=="string"||typeof i=="number"?r.appendChild(document.createTextNode(i.toString())):r.appendChild(i);return r}function R(...n){return ke(...n).outerHTML}function Je(n){return Array.isArray(n)?n.every(Je):n===null?!0:typeof n=="object"?Object.getPrototypeOf(n)!==Object.prototype?!1:Object.values(n).every(Je):typeof n=="number"?isFinite(n)&&!isNaN(n):["boolean","string","undefined"].includes(typeof n)}const{log:Q,warn:Ui}=F("state");let te;const gt={},pn={},ce={};function mt(n,e){if(n[e])return;Object.defineProperty(n,e,{get(){return p(e)},set(r){$(e,r)},configurable:!0});const t=e.split(".");t.length>1&&(t.pop(),mt(n,t.join(".")))}function Vi(n,e){if(n[e])return;const t=e.split("."),r=t[t.length-1];for(let i=0;i<t.length-1;i++)n[t[i]]=n[t[i]]||{},n=n[t[i]];Object.defineProperty(n,r,{get(){return p(e)},set(){throw new Error("Chapbook lookup variables may only be read.")},configurable:!0})}function Wi(n,e){Hi(n,e)}function gn(){const n=fn(),e=ht();if(e===void 0)throw new Error("Cannot set up state: the story has no name");te=`chapbook-${e}-${n}`,qe("config.state.autosave",!0)}function bt(){function n(e,t){Object.keys(e).forEach(r=>{const i=t===""?r:`${t}.${r}`;if(typeof e[r]=="object"&&!Array.isArray(e[r]))n(e[r],i);else{const s=e[r];delete e[r],Wi(window,t),window.dispatchEvent(new CustomEvent("state-change",{detail:{name:i,value:p(i),previous:s}}))}})}n(ce,""),window.dispatchEvent(new CustomEvent("state-reset")),p("config.state.autosave")&&yt()}function $(n,e){const t=p(n);Je(e)||Ui(`Setting ${n} to ${JSON.stringify(e)} can't be saved permanently. This will work in the current session, but will not persist between sessions.`),ft(ce,n,e),mt(window,n),e!==t&&window.dispatchEvent(new CustomEvent("state-change",{detail:{previous:t,name:n,value:e}})),p("config.state.autosave")&&yt()}function qe(n,e){const t=p(n);Q(`Defaulting "${n}" to ${JSON.stringify(e)}`),ft(gt,n,e),mt(window,n),t==null&&window.dispatchEvent(new CustomEvent("state-change",{detail:{previous:t,name:n,value:e}}))}function ie(n){for(const e in n)qe(e,n[e])}function _(n,e){const t=p(n);Q(`Adding lookup variable ${n}`),ft(pn,n,e),Vi(window,n),t==null&&window.dispatchEvent(new CustomEvent("state-change",{detail:{previous:t,name:n,value:p(n)}}))}function p(n){const e=Be(pn,n);if(typeof e=="function")return e(p,$);const t=Be(ce,n),r=Be(gt,n);if(t==null)return r;if(typeof t=="object"&&t!==null&&!Array.isArray(t)&&typeof r=="object"&&r!==null&&!Array.isArray(r)){const i={},s=[...Object.keys(r),...Object.keys(t)];for(const a of s)Object.defineProperty(i,a,{get(){return p(n+"."+a)},set(l){$(n+"."+a,l)},configurable:!0,enumerable:!0});return i}return t}function xe(){return{...ce}}function Ee(n){bt();for(const e in n)$(e,n[e])}function mn(){try{return window.localStorage.setItem("chapbook-test","a"),window.localStorage.removeItem("chapbook-test"),!0}catch{return!1}}function yt(){Q("Saving to local storage: "+JSON.stringify(xe())),window.localStorage.setItem(te,JSON.stringify(xe())),Q("Save complete")}function bn(){return mn()&&window.localStorage.getItem(te)!==null}function yn(){Q("Restoring variables from local storage");const n=window.localStorage.getItem(te);if(!n)throw new Error(`No value is set in local storage at "${te}"`);Ee(JSON.parse(n)),Q("Restore complete")}function wn(n){n||Q("Purging variables from local storage");const e=window.localStorage.getItem(te);if(!e)throw new Error(`No value is set in local storage at "${te}"`);Ee(JSON.parse(e)),n||Q("Purge complete")}function ve(n){function e(t,r,i=[]){return Object.keys(t).reduce((s,a)=>{if(typeof t[a]=="object"&&t[a]&&!Array.isArray(t[a]))e(t[a],r?`${r}.${a}`:a,s);else{const l=r?`${r}.${a}`:a;s.includes(l)||s.push(l)}return s},i)}return n?e(gt,void 0,e(ce)).sort():e(ce).sort()}const Zi=Object.freeze(Object.defineProperty({__proto__:null,canRestoreFromStorage:bn,canSaveToStorage:mn,get:p,initState:gn,purgeFromStorage:wn,reset:bt,restoreFromObject:Ee,restoreFromStorage:yn,saveToObject:xe,saveToStorage:yt,set:$,setDefault:qe,setDefaults:ie,setLookup:_,varNames:ve},Symbol.toStringTag,{value:"Module"})),Gi=Object.freeze(Object.defineProperty({__proto__:null,addCustomStyles:dn,ifid:fn,initStory:cn,loadFromData:ln,name:ht,passageNamed:Se,passageWithId:Bi,passages:Fi,runCustomScripts:un,startPassage:pt},Symbol.toStringTag,{value:"Module"})),{log:kn}=F("actions");function xn(n){kn(`Going to passage "${n}"`);const e=Se(n);if(!e)throw new Error(`There is no passage with the name "${n}"`);document.activeElement instanceof HTMLElement&&document.activeElement.blur();const t=p("trail");if(!Array.isArray(t))throw new Error(`The trail variable has been set to a ${typeof t}, not an array.`);$("trail",[...t,e.name])}function vn(){kn("Restarting"),bt(),window.location.reload()}let X=[],Oe=!0;function Ji(){Oe&&(X=[],window.dispatchEvent(new CustomEvent("backstage-state-recorder-update")))}function Xi({detail:n}){if(!Oe)return;X.length===p("config.backstage.trail.maxLength")&&X.shift();const{name:e,value:t}=n;X.push({change:{name:e,value:t},state:xe()}),window.dispatchEvent(new CustomEvent("backstage-state-recorder-update"))}function Qi(){return[...X]}function Ki(n){if(!X[n])throw new Error(`There is no history at index ${n} to rewind to.`);Oe=!1,Ee(X[n].state),X.length=n+1,Oe=!0,window.dispatchEvent(new CustomEvent("backstage-state-recorder-update"))}function Yi(){qe("config.backstage.trail.maxLength",100),window.addEventListener("state-change",Xi),window.addEventListener("state-reset",Ji)}let V=[];function es(n){V.push({name:n,state:xe()}),$n(),window.dispatchEvent(new CustomEvent("backstage-state-snapshots-update"))}function ts(n){const e=V.find(t=>t.name===n);if(!e)throw new Error(`There is no snapshot named "${n}".`);Ee(e.state)}function ns(n){V=V.filter(({name:e})=>n!==e),$n(),window.dispatchEvent(new CustomEvent("backstage-state-snapshots-update"))}function rs(){try{V=JSON.parse(window.localStorage.getItem(`chapbookbackstage-snapshots-${p("config.state.saveKey")}`)),Array.isArray(V)||(V=[])}catch{V=[]}}function $n(){window.localStorage.setItem(`chapbookbackstage-snapshots-${p("config.state.saveKey")}`,JSON.stringify(V))}function Pt(){return V.map(({name:n})=>n)}function is(){rs()}function wt(n){for(const e in n)window.customElements.get(e)||window.customElements.define(e,n[e])}class z extends HTMLElement{defaultHtml(e){this.innerHTML.trim()===""&&(this.innerHTML=e)}delegate(e,t,r){this.addEventListener(e,i=>{if(!i.target)return;const s=i.target.closest(t);s&&r(i,s)})}query(e){const t=this.querySelector(e);if(!t)throw new Error(`Couldn't find element matching "${e}"`);return t}queryAll(e){return[...this.querySelectorAll(e)]}}class Sn extends z{constructor(){super(),this.addEventListener("click",e=>{e.target.closest("[data-toggle-collapsed]")&&(this.hasAttribute("collapsed")?this.removeAttribute("collapsed"):this.setAttribute("collapsed",""))})}connectedCallback(){this.innerHTML=`
			<button data-toggle-collapsed></button>
			<div class="content">
				<backstage-tabs aria-label="Backstage">
				<backstage-tab
					aria-controls="backstage-state-tab-panel"
					id="backstage-state-tab"
				>
					State
				</backstage-tab>
				<backstage-tab
					aria-controls="backstage-history-tab-panel"
					id="backstage-history-tab"
				>
					History
				</backstage-tab>
				<backstage-tab
					aria-controls="backstage-style-tab-panel"
					id="backstage-style-tab"
				>
					Style
				</backstage-tab>
				<backstage-tab
					aria-controls="backstage-notes-tab-panel"
					id="backstage-notes-tab"
				>
					Notes
				</backstage-tab>
			</backstage-tabs>
			<backstage-tab-panel
				aria-labelledby="backstage-state-tab"
				id="backstage-state-tab-panel"
			>
				<backstage-state-variables></backstage-state-variables>
				<backstage-state-snapshots></backstage-state-snapshots>
			</backstage-tab-panel>
			<backstage-tab-panel
				aria-labelledby="backstage-history-tab"
				id="backstage-history-tab-panel"
			>
				<backstage-history-table></backstage-history-table>
			</backstage-tab-panel>
			<backstage-tab-panel
				aria-labelledby="backstage-style-tab"
				id="backstage-style-tab-panel"
			>
				<backstage-style-theme></backstage-style-theme>
				<backstage-style-config></backstage-style-config>
				<backstage-style-group title="Page" prefix="page"></backstage-style-group>
				<backstage-style-group title="Header"></backstage-style-group>
				<backstage-style-group title="Footer"></backstage-style-group>
			</backstage-tab-panel>
			<backstage-tab-panel
				aria-labelledby="backstage-notes-tab"
				id="backstage-notes-tab-panel"
			>
				<backstage-notes></backstage-notes>
			</backstage-tab-panel>
		</div>`,this.update()}attributeChangedCallback(){this.update()}update(){const e=this.querySelectorAll("[data-toggle-collapsed]");if(this.hasAttribute("collapsed")){for(const t of e)t.innerHTML="&larr;",t.setAttribute("aria-label","Show Backstage");document.body.classList.remove("backstage-visible")}else{for(const t of e)t.innerHTML="&rarr;",t.setAttribute("aria-label","Hide Backstage");document.body.classList.add("backstage-visible")}}}U(Sn,"observedAttributes",["collapsed"]);function ss(n){const e=[];let t=[],r;return n.forEach(({change:i},s)=>{if(i.name==="trail"){const a=i.value;e.push({historyIndex:s-1,passage:r,varChanges:t}),t=[],r=a[a.length-1]}else t.push({name:i.name,value:i.value})}),e.push({historyIndex:n.length-1,passage:r,varChanges:t}),e}class os extends z{constructor(){super();U(this,"root",document.createElement("div"));this.delegate("click","button[data-rewind]",(t,r)=>{const i=parseInt(r.dataset.rewind??"");isNaN(i)||Ki(i)})}connectedCallback(){window.addEventListener("backstage-state-recorder-update",this),this.update()}disconnectedCallback(){window.removeEventListener("backstage-state-recorder-update",this)}handleEvent(){this.update()}update(){this.innerHTML=ss(Qi()).reduce((t,{historyIndex:r,passage:i,varChanges:s})=>{t+=`
					<button
						data-rewind="${r}"
						aria-label="Rewind to ${i?H(i):"Startup"}">&#x21aa;
					${i?H(i):"<em>Startup</em>"}</button><table><thead><tr><th>Variable</th><th>Value</th></thead><tbody>`;for(const a of s)t+=`
						<tr>
							<td>${H(a.name)}</td><td>${H(JSON.stringify(a.value))}</td>
						</tr>`;return t+"</tbody></table>"},"")}}let N={};function as(){N={},kt()}function ls(){const n=Object.keys(N).reduce((t,r)=>t+`<li class="note"><span class="passage">${H(r)}</span><pre>${H(N[r])}</pre></li>`,"");let e=p("story.name");return typeof e!="string"&&(e="Story"),`<h1>Notes for &ldquo;${H(e)}&rdquo;</h1><ul data-cb-backstage-notes data-cb-version="${p("engine.version")}">${n}</ul>`}function cs(n){return N[n]}function us(n){const e=document.createElement("div"),t={...N};let r=0;e.innerHTML=n;for(const i of e.querySelectorAll("ul[data-cb-backstage-notes] li")){const s=i.querySelector("span.passage"),a=i.querySelector("pre");s!=null&&s.textContent&&(a!=null&&a.textContent)&&(t[s.textContent]?t[s.textContent]=`${t[s.textContent]??""}

${a.textContent}`:t[s.textContent]=a.textContent,r++)}return N=t,kt(),r}function ds(){const n=window.localStorage.getItem(`chapbookbackstage-passage-notes-${p("config.state.saveKey")}`);try{n&&(N=JSON.parse(n),(typeof N!="object"||Array.isArray(N))&&(N={}))}catch{N={}}}function kt(){window.localStorage.setItem(`chapbookbackstage-passage-notes-${p("config.state.saveKey")}`,JSON.stringify(N))}function fs(n,e){N[n]=e,kt()}function hs(){ds()}function Ot(){const n=p("trail");if(Array.isArray(n))return n[n.length-1]}class ps extends z{constructor(){super(),this.delegate("change",'input[type="file"]',e=>{var r;const t=(r=e.target.files)==null?void 0:r[0];if(t){const i=new FileReader;i.onload=s=>{const a=us(s.target.result);window.alert(`${a} note(s) were imported.`)},i.readAsText(t)}}),this.delegate("change","textarea",e=>{const t=Ot();t&&fs(t,e.target.value)}),this.delegate("click","[data-export]",()=>{const e=ls(),t=document.createElement("a");p("story.name"),t.setAttribute("download",`${p("story.name")} Notes - ${new Date().toDateString()} ${new Date().toTimeString()}.html`),t.setAttribute("href","data:text/html;base64,"+window.btoa(e)),document.body.appendChild(t),t.click(),document.body.removeChild(t)}),this.delegate("click","[data-import]",()=>{this.query('input[type="file"]').click()}),this.delegate("click","[data-reset]",()=>{window.confirm("Are you sure? This will delete all text entered in the Notes panel of Backstage, and cannot be undone.")&&as()})}connectedCallback(){this.defaultHtml(`
			<label for="backstage-notes-textarea"></label>
				<textarea id="backstage-notes-textarea"></textarea>
				<div class="actions">
					<button data-export>Export All Notes</button>
					<button data-import>Import Notes</button>
					<button data-reset>Delete All Notes</button>
				</div>
				<input type="file" hidden />
		`),window.addEventListener("state-change",this),this.update()}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(e){e.detail.name==="trail"&&this.update()}update(){const e=Ot();e&&(this.query("#backstage-notes-textarea").value=cs(e)??"",this.query('label[for="backstage-notes-textarea"]').textContent=`Notes on "${e}"`)}}class gs extends z{constructor(){super(),this.delegate("click","[data-add-snapshot]",()=>{const e=window.prompt("Enter a name for this snapshot:");e&&(Pt().includes(e)?window.alert("A snapshot already exists with this name."):es(e))}),this.delegate("click","[data-remove]",({target:e})=>{const t=e.dataset.remove;t&&window.confirm(`Are you sure you want to delete the snapshot "${t}"? This cannot be undone.`)&&ns(t)}),this.delegate("click","[data-restore]",({target:e})=>{ts(e.dataset.restore)})}connectedCallback(){this.defaultHtml(`
			<details open>
				<summary>Snapshots</summary>
				<div class="snapshots"></div>
				<button data-add-snapshot>Add Snapshot</button>
			</details>
		`),window.addEventListener("backstage-state-snapshots-update",this),this.update()}disconnectedCallback(){window.removeEventListener("backstage-state-snapshots-update",this)}handleEvent(){this.update()}update(){const e=this.querySelector(".snapshots");e&&(e.innerHTML=Pt().map(t=>{const r=H(t);return`
					<div class="snapshot-button">
						<button data-restore="${r}" aria-label="Restore '${r}' snapshot">
							${r}
						</button>
						<button data-remove="${r}" aria-label="Remove '${r}' snapshot">
							&times;
						</button>
					</div class="snapshot-button">
				`}).join(""))}}const ms=["config.random.privateState"];class bs extends z{constructor(){super();U(this,"showDefaults",!1);this.delegate("change",'input[type="checkbox"]',t=>{this.showDefaults=t.target.checked,this.update()})}connectedCallback(){this.defaultHtml(`
			<details open>
				<summary>Variables</summary>
				<label>
					<input type="checkbox" />
					Show Defaults
				</label>
				<div class="variables"></div>
			</details>
		`),this.update(),window.addEventListener("state-change",this)}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(){this.update()}update(){this.query(".variables").innerHTML=ve(this.showDefaults).filter(t=>!ms.some(r=>t.startsWith(r))).map(t=>`<div><label><span>${H(t)}</span><backstage-variable-input name="${H(t)}"></backstage-variable-input></label></div>`).join("")}}const ys=["config.style.page.theme.override"];class ws extends z{connectedCallback(){this.defaultHtml(`
			<details open>
				<summary>Config</summary>
				<label for="cb-backstage-style-config">
					Enter this code into your first passage&rsquo;s variables section to
					permanently use this style:
				</label>
				<textarea
					readonly
					id="cb-backstage-style-config"
				></textarea>
			</details>
		`),window.addEventListener("state-change",this),this.update()}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(){this.update()}update(){this.query("textarea").value=ve(!1).reduce((e,t)=>!/^config.style/.test(t)||ys.includes(t)||p(t)===void 0?e:e+`${t}: ${JSON.stringify(p(t))}
`,"").trim()}}const ks=[{name:"Font",suffix:"font"},{name:"Color",suffix:"color"},{name:"Link Font",suffix:"link.font"},{name:"Link Color",suffix:"link.color"},{name:"Link Line Color",suffix:"link.lineColor"},{name:"Active Link Font",suffix:"link.active.font"},{name:"Active Link Color",suffix:"link.active.color"},{name:"Active Link Line Color",suffix:"link.active.lineColor"}];class En extends z{connectedCallback(){const e=this.getAttribute("prefix"),t=this.getAttribute("title");this.defaultHtml(`
			<details open>
				<summary>${t}</summary>
				${ks.map(({name:r,suffix:i})=>`
						<label data-prefix="%.${i}">
							${r}
							<backstage-variable-input name="${e}.${i}" string />
						</label>
					`).join("")}
			</details>
		`),window.addEventListener("state-change",this),window.addEventListener("system-theme-change",this),this.updateInputs()}updateInputs(){var i;const e=this.getAttribute("prefix")??"",t=p("browser.darkTheme");let r="config.style.";t&&(r+="dark.");for(const s of this.queryAll("backstage-variable-input")){const a=(i=s.closest("[data-prefix]"))==null?void 0:i.dataset.prefix;if(a&&(s.setAttribute("name",r+a.replace("%",e)),s.removeAttribute("placeholder"),t)){const l=p(`config.style.${a.replace("%",e)}`);typeof l=="string"&&s.setAttribute("placeholder",l)}}}attributeChangedCallback(e,t,r){if(this.innerHTML!=="")switch(e){case"title":this.query("summary").innerText=r;break;case"prefix":this.updateInputs();break}}handleEvent(e){(e.type==="system-theme-change"||e.detail.name==="config.style.page.theme.override")&&this.updateInputs()}}U(En,"observedAttributes",["prefix","title"]);class xs extends z{connectedCallback(){this.defaultHtml(`
      <details open>
      <summary>Theme</summary>
      <p>The <strong data-theme-name></strong> theme is active. <button>Switch Theme</button></p>
      <p>
      <label><input type="checkbox"> Theme switching</label>
      </p>
      </details>
    `),this.update(),this.query("button").addEventListener("click",()=>this.switchTheme()),this.query("input").addEventListener("change",()=>this.toggleThemeSwitching()),window.addEventListener("system-theme-change",this),window.addEventListener("state-change",this),this.update()}disconnectedCallback(){window.removeEventListener("system-theme-change",this)}handleEvent(e){(e.type==="system-theme-change"||["config.style.page.theme.override","config.style.page.theme.enableSwitching"].includes(e.detail.name))&&this.update()}switchTheme(){$("config.style.page.theme.override",p("browser.darkTheme")?"light":"dark")}toggleThemeSwitching(){$("config.style.page.theme.enableSwitching",!p("config.style.page.theme.enableSwitching")),this.update()}update(){const e=!!p("config.style.page.theme.enableSwitching");this.query("input").checked=e,this.query("button").disabled=!e,this.query("[data-theme-name]").innerHTML=p("browser.darkTheme")?"dark":"light"}}class vs extends z{constructor(){super(),this.addEventListener("click",()=>{var e;this.textContent&&((e=this.closest("backstage-tabs"))==null||e.selectTab(this.textContent))})}connectedCallback(){this.setAttribute("role","tab")}}class $s extends z{connectedCallback(){this.setAttribute("role","tabpanel")}}class Ss extends z{connectedCallback(){this.setAttribute("role","tablist"),window.setTimeout(()=>this.selectTab(0))}selectTab(e){[...this.children].filter(t=>t.getAttribute("role")==="tab").forEach((t,r)=>{var a,l;const i=t.getAttribute("aria-controls"),s=typeof e=="number"?r==e:t.textContent===e;t.setAttribute("aria-selected",s.toString()),i&&(s?(a=document.getElementById(i))==null||a.removeAttribute("hidden"):(l=document.getElementById(i))==null||l.setAttribute("hidden",""))})}}class _n extends z{constructor(){super(),this.addEventListener("input",e=>{const t=this.getAttribute("name");if(!t||!e.target)return;const r=e.target.value;try{this.hasAttribute("string")?$(t,r):$(t,JSON.parse(r))}catch{}})}attributeChangedCallback(){const e=this.getAttribute("name");if(!e)return;const t=p(e);let r=JSON.stringify(t);this.hasAttribute("string")&&(t==null?r="":r=t.toString()),this.innerHTML=`<input type="text" placeholder="${this.getAttribute("placeholder")??""}" value="${H(r)}" />`}}U(_n,"observedAttributes",["name","placeholder","string"]);function Es(){wt({"backstage-history-table":os,"backstage-notes":ps,"backstage-sidebar":Sn,"backstage-state-snapshots":gs,"backstage-state-variables":bs,"backstage-style-config":ws,"backstage-style-group":En,"backstage-style-theme":xs,"backstage-tab":vs,"backstage-tab-panel":$s,"backstage-tabs":Ss,"backstage-variable-input":_n})}function _s(){hs(),Yi(),is(),Es(),document.body.appendChild(document.createElement("backstage-sidebar"))}class Ts extends z{constructor(){super(),this.delegate("click","[data-back]",()=>{const e=p("trail");this.classList.remove("active"),Array.isArray(e)?$("trail",e.slice(0,e.length-1)):window.alert("Sorry, going back was not successful. Please try hard restarting.")}),this.delegate("click","[data-refresh]",()=>{var t;const e=p("trail");this.classList.remove("active"),Array.isArray(e)?$("trail",[...e]):$("trail",[(t=pt())==null?void 0:t.name])}),this.delegate("click","[data-hard-restart]",()=>{wn(!0),window.location.reload()})}connectedCallback(){window.addEventListener("error",this),window.addEventListener("unhandledrejection",this)}disconnectedCallback(){window.removeEventListener("error",this),window.removeEventListener("unhandledrejection",this)}handleEvent(e){const t=`
Please report this to https://github.com/markedjs/marked.`,r=e.type==="unhandledrejection"?e.reason:e.error;try{let i="";r!=null&&r.stack?i=`${r.message}

Stack trace:
${r.stack}`:i=`${r.message}

[No stack trace available]`,i=i.replace(t,"");const s=p("trail");this.classList.add("active"),this.innerHTML=`
			<p>
			An unexpected error has occurred.
			</p>
			<pre>${p("config.testing")?i:""}</pre>
			<ul>
				<li>
					<inline-button class="link" ${Array.isArray(s)&&s.length>1?"data-back":"data-refresh"}>Go back</inline-button> to the previous passage.
				</li>
				<li>
					<inline-button class="link" data-hard-restart>Hard restart</inline-button>, clearing all progress and beginning from the start.
				</li>
			</ul>
		`}catch(i){console.error(i)}}}const{log:Te}=F("display");class Cs extends z{connectedCallback(){window.addEventListener("state-change",this),this.defaultHtml("<div data-google></div><div data-typekit></div>")}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent({detail:e}){if(["config","config.style","config.style.fonts"].includes(e.name)){const i=p("config.style.fonts");if(!i)return;for(const s in i){const a=i[s].name,l=i[s].url;typeof a=="string"&&typeof l=="string"&&this.loadUrlFont(s,l,a)}return}const r=e.name.match(/^config\.style\.fonts\.([^.]+)/i);if(r){const i=r[1],s=p(`config.style.fonts.${i}.name`),a=p(`config.style.fonts.${i}.url`);typeof a=="string"&&typeof s=="string"&&(Te(`Adding font from URL (${s})`),this.loadUrlFont(i,a,s));return}e.name==="config.style.googleFont"&&typeof e.value=="string"?this.loadGoogleFont(e.value):e.name==="config.style.typekitFont"&&typeof e.value=="string"&&this.loadTypekitFont(e.value)}loadGoogleFont(e){Te("Adding Google font"),this.query("[data-google]").innerHTML=e}loadTypekitFont(e){Te("Adding Typekit font"),this.query("[data-typekit]").innerHTML=e}loadUrlFont(e,t,r){Te("Adding font from URL");const i=t.match(/\.(.+)$/);if(!i||!i[1])return;const s=i[1],a=this.querySelector(`[data-url-${e}]`)??document.createElement("style");a.setAttribute(`data-url-${e}`,""),a.innerHTML=`@font-face { font-family: "${r}"; src: url("${t}") format("${s}"); }`,a.parentNode||this.appendChild(a)}}class As extends HTMLElement{constructor(){super(),this.addEventListener("body-content-change",this)}handleEvent({target:e}){if(!e)return;const t=[...e.querySelectorAll("[skippable-delay]")].map(l=>{const o={delay:0,el:l};try{o.delay=parseInt(l.getAttribute("skippable-delay")??"0")}catch{}return o}).filter(({delay:l})=>!!l).sort((l,o)=>l.delay-o.delay);if(t.length===0)return;let r=Date.now(),i;const s=()=>{var u;const l=Date.now()-r,o=(u=t.find(({delay:c})=>c>l))==null?void 0:u.delay;if(!o){this.dispatchEvent(new CustomEvent("page-skip-indicator-hide"));return}for(const c of t)c.delay<=0||(c.delay<=o?(c.delay=0,c.el.setAttribute("skippable-delay","0")):(c.delay-=o,c.el.setAttribute("skippable-delay",c.delay.toString())));r=Date.now(),window.clearTimeout(i),a()},a=()=>{i&&window.clearTimeout(i),i=window.setTimeout(()=>{window.removeEventListener("click",s),window.removeEventListener("keyup",s),this.dispatchEvent(new CustomEvent("page-skip-indicator-hide"))},t[t.length-1].delay)};window.addEventListener("click",s),window.addEventListener("keyup",s),a(),this.dispatchEvent(new CustomEvent("page-skip-indicator-show"))}}class Ls extends z{connectedCallback(){var e,t;(e=this.closest("page-skip"))==null||e.addEventListener("page-skip-indicator-hide",this),(t=this.closest("page-skip"))==null||t.addEventListener("page-skip-indicator-show",this)}disconnectedCallback(){var e,t;(e=this.closest("page-skip"))==null||e.removeEventListener("page-skip-indicator-hide",this),(t=this.closest("page-skip"))==null||t.removeEventListener("page-skip-indicator-show",this)}handleEvent(e){switch(e.type){case"page-skip-indicator-hide":this.removeAttribute("active");break;case"page-skip-indicator-show":this.setAttribute("active","");break}}}var se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zs(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Ie=Os;const Ps={hoursPerDay:24,daysPerWeek:7,weeksPerMonth:4,monthsPerYear:12,daysPerYear:365.25},It={ms:["ms","milli","millisecond","milliseconds"],s:["s","sec","secs","second","seconds"],m:["m","min","mins","minute","minutes"],h:["h","hr","hrs","hour","hours"],d:["d","day","days"],w:["w","week","weeks"],mth:["mon","mth","mths","month","months"],y:["y","yr","yrs","year","years"]};function Os(n,e,t){t=Object.assign({},Ps,t||{});let r=0,i=Is(t),s=n.toLowerCase().replace(/[^.\w+-]+/g,"").match(/[-+]?[0-9.]+[a-z]+/g);if(s===null)throw new Error(`The string [${n}] could not be parsed by timestring`);return s.forEach(a=>{let l=a.match(/[0-9.]+/g)[0],o=a.match(/[a-z]+/g)[0];r+=Ns(l,o,i)}),e?Rs(r,e,i):r}function Is(n){let e={ms:.001,s:1,m:60,h:3600};return e.d=n.hoursPerDay*e.h,e.w=n.daysPerWeek*e.d,e.mth=n.daysPerYear/n.monthsPerYear*e.d,e.y=n.daysPerYear*e.d,e}function Tn(n){for(let e of Object.keys(It))if(It[e].indexOf(n)>-1)return e;throw new Error(`The unit [${n}] is not supported by timestring`)}function Ns(n,e,t){return n*t[Tn(e)]}function Rs(n,e,t){return n/t[Tn(e)]}class Ms extends z{connectedCallback(){window.addEventListener("display-change",this)}disconnectedCallback(){window.removeEventListener("display-change",this)}async startTransition(e,t={}){const r=p("config.body.transition.name"),i=p("config.body.transition.duration"),s=typeof i=="string"?Ie(i,"s"):0;document.startViewTransition&&typeof r=="string"&&["crossfade","fadeInOut"].includes(r)&&s>0?r==="crossfade"?(document.documentElement.style.setProperty("--page-transition-duration",`${s}s`),document.startViewTransition(async()=>{await e(),t.preserveWindowScroll||window.scrollTo(0,0)})):(document.documentElement.style.setProperty("--page-transition-duration",`${s/2}s`),await document.startViewTransition(async()=>{this.style.visibility="hidden"}).finished,document.startViewTransition(async()=>{this.style.visibility="visible",await e(),t.preserveWindowScroll||window.scrollTo(0,0)})):(await e(),t.preserveWindowScroll||window.scrollTo(0,0))}handleEvent({detail:e}){this.startTransition(()=>{const t=this.querySelector("article");t&&(t.innerHTML=`<div>${e.body}</div>`,t.dispatchEvent(new CustomEvent("body-content-change",{bubbles:!0})));const r=["left","center","right"];for(const i of["footer","header"]){const s=this.querySelector(i);s&&(r.some(a=>e[i][a].trim()!=="")?s.removeAttribute("hidden"):s.setAttribute("hidden",""),s.innerHTML=["left","center","right"].reduce((a,l)=>a+`<div class="${l}">${e[i][l]}</div>`,""))}})}}const Nt=["gray","red","pink","grape","violet","indigo","blue","cyan","teal","green","lime","yellow","orange"].map(n=>`oc-${n}`),Ds=["gray","rose","raspberry","red","orange","cinnamon","amber","yellow","lime","chartreuse","green","emerald","aquamarine","teal","cyan","powder","sky","cerulean","azure","blue","indigo","violet","purple","magenta","pink"];function Rt(n){if(typeof n!="string")throw new Error("Only strings can be parsed as color values.");if(Nt.includes(n))return`var(--${n}-9)`;const e=/^(oc-\w+)-\d$/.exec(n);if(e&&Nt.includes(e[1]))return`var(--${n})`;const t=/^(\w+)-([1-6])$/.exec(n);return t&&Ds.includes(t[1])?`var(--color-${n})`:n}function me(n){const e={backgroundColor:"inherit",color:"inherit"};if(n===void 0)return e;if(typeof n!="string")throw new Error("Only strings can be parsed as colors.");const t=n.split(/ on /i);return e.color=Rt(t[0].trim().toLowerCase()),e.color===""&&(e.color="inherit"),t.length===2&&(e.backgroundColor=Rt(t[1].trim().toLowerCase())),e}function js(n,{scaling:e}){const t={fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariant:"inherit",fontWeight:"inherit",textDecoration:"inherit",textTransform:"inherit"};if(n===void 0)return t;if(typeof n!="string")throw new Error("Only strings can be parsed as fonts.");function r(c,d){c.fontFamily=d.split("/").map(f=>{let h=f;return["monospace","sans-serif","serif"].includes(h)||(h[0]!=='"'&&(h='"'+h),h[h.length-1]!=='"'&&(h=h+'"')),h}).join(",")}function i(c){c.fontWeight="bold"}function s(c){c.fontStyle="italic"}function a(c){c.fontStyle="none",c.fontWeight="normal",c.textDecoration="none",c.textTransform="none"}function l(c){c.fontVariant="small-caps",c.textTransform="lowercase"}function o(c){c.textDecoration="underline"}const u=/\b\d+(?:\.\d+)?(ch|cm|ex|in|mm|pc|pt|px|r?em|vh|vmax|vmin|vw|%)?/i.exec(n);if(u){t.fontSize=u[0],/^\d+$/.test(u[0])&&(t.fontSize=`${u[0]}px`),e&&(t.fontSize=`calc(${t.fontSize} + max(${e.addAtDoubleWidth} * (100vw - ${e.baseViewportWidth}px) / ${e.baseViewportWidth}, 0px))`,e.maximumSize&&(t.fontSize=`min(${t.fontSize}, ${e.maximumSize})`)),u.index!==0&&r(t,n.substring(0,u.index).trim());const c=n.substring(u.index);/\bregular\b/i.test(c)?a(t):(/\bbold\b/.test(c)&&i(t),/\bitalics?\b/.test(c)&&s(t),/\bunderlined?/.test(c)&&o(t),/\bsmall caps?\b/.test(c)&&l(t))}else{let c,d=n;for(;c=/(bold|italics?|regular|small caps|underlined?)$/.exec(d);){switch(c[0]){case"bold":i(t);break;case"italic":case"italics":s(t);break;case"regular":a(t);break;case"small caps":l(t);break;case"underline":case"underlined":o(t);break}d=d.substring(0,c.index).trim()}d.trim()!==""&&r(t,d)}return t}const qs={"config.style.dark.backdrop":"hsl(0, 0%, 10%)","config.style.dark.page.footer.border":"thin-line","config.style.dark.page.footer.borderColor":"white","config.style.dark.page.footer.link.active.color":"raspberry-3 on raspberry-6","config.style.dark.page.fork.divider.color":"gray-5","config.style.dark.page.color":"white on gray-6","config.style.dark.page.header.border":"thin-line","config.style.dark.page.header.borderColor":"white","config.style.dark.page.header.link.active.color":"raspberry-3 on raspberry-6","config.style.dark.page.link.color":"white","config.style.dark.page.link.lineColor":"raspberry-4","config.style.dark.page.link.active.color":"raspberry-3 on raspberry-6","config.style.backdrop":"gray-1","config.style.fontScaling.enabled":!0,"config.style.fontScaling.baseViewportWidth":1e3,"config.style.fontScaling.addAtDoubleWidth":6,"config.style.page.style.border":"shadow","config.style.page.style.borderColor":"gray-2","config.style.page.font":"Iowan Old Style/Constantia/Georgia/serif 18","config.style.page.color":"gray-6 on white","config.style.page.fork.divider.color":"gray-2","config.style.page.fork.divider.style":"dashed","config.style.page.fork.divider.size":1,"config.style.page.link.color":"gray-6","config.style.page.link.lineColor":"raspberry-4","config.style.page.link.font":"underline","config.style.page.link.active.color":"raspberry-4 on raspberry-1","config.style.page.verticalAlign":"center","config.style.page.header.border":"thin-line","config.style.page.header.borderColor":"gray-6","config.style.page.header.font":"16","config.style.page.header.link.font":"small caps underlined","config.style.page.header.link.lineColor":"raspberry-4","config.style.page.header.link.active.color":"raspberry-4 on raspberry-1","config.style.page.header.link.active.font":"small caps underlined","config.style.page.header.link.active.lineColor":"raspberry-4","config.style.page.footer.border":"thin-line","config.style.page.footer.borderColor":"gray-6","config.style.page.footer.font":"16","config.style.page.footer.link.font":"small caps underlined","config.style.page.footer.link.lineColor":"raspberry-4","config.style.page.footer.link.active.color":"raspberry-4 on raspberry-1","config.style.page.footer.link.active.font":"small caps underlined","config.style.page.footer.link.active.lineColor":"raspberry-4","config.style.page.theme.override":void 0,"config.style.page.theme.enableSwitching":!0};function Hs(){ie(qs)}class Fs extends z{connectedCallback(){window.addEventListener("state-change",this)}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(e){const{name:t,value:r}=e.detail;if(t==="config"||t==="config.style"){for(const i of ve())if(i.startsWith("config.style.")){const s=p(i);typeof s=="string"&&this.handleStateChange(i,s)}}else t.startsWith("config.style.")&&this.handleStateChange(t,r)}handleStateChange(e,t){const r=`--${e.replace(/^config\.style\./,"").replace(/\./g,"-")}`;if(typeof t=="string"&&r.endsWith("-color")){this.updateColor(r.replace(/-color$/,""),t);return}if(typeof t=="string"&&r.endsWith("-lineColor")){this.updateLineColor(r.replace(/-lineColor$/,""),t);return}if(typeof t=="string"&&r.endsWith("-font")){this.updateFont(r.replace(/-font$/,""),t);return}switch(r){case"--backdrop":case"--dark-backdrop":{const{color:i}=me(t);this.style.setProperty(`${r}-color`,i);break}case"--fontScaling-enabled":case"--fontScaling-baseViewportWidth":case"--fontScaling-addAtDoubleWidth":case"--fontScaling-maximumSize":this.recalculateFontSizes();break;case"--page-fork-divider-size":case"--dark-page-fork-divider-size":(typeof t=="string"||typeof t=="number")&&this.style.setProperty(r,`${t}px`);break;case"--page-fork-divider-style":case"--dark-page-fork-divider-style":typeof t=="string"&&this.style.setProperty(r,t);break;case"--page-verticalAlign":case"--dark-page-verticalAlign":{if(typeof t!="string")break;const i=r.replace(/-verticalAlign$/,"");switch(t){case"top":this.style.setProperty(`${i}-current-passage-justify-content`,"flex-start");break;case"center":this.style.setProperty(`${i}-current-passage-justify-content`,"center");break;case"bottom":this.style.setProperty(`${i}-current-passage-justify-content`,"flex-end");break}break}case"--page-footer-border":case"--page-footer-borderColor":case"--page-header-border":case"--page-header-borderColor":case"--dark-page-footer-border":case"--dark-page-footer-borderColor":case"--dark-page-header-border":case"--dark-page-header-borderColor":case"--page-style-border":case"--dark-page-style-border":case"--page-style-borderColor":case"--dark-page-style-borderColor":{const i=r.replace(/-style-[^-]*?$/,"").replace(/-border(Color)?$/,""),s=e.replace(/\.[^.]*?$/,""),a=p(`${s}.border`),l=p(`${s}.borderColor`);switch(a){case"none":this.style.setProperty(`${i}-border`,"none"),this.style.setProperty(`${i}-box-shadow`,"none");break;case"shadow":this.style.setProperty(`${i}-border`,"none"),this.style.setProperty(`${i}-box-shadow`,"inset 0 0 2px 2px hsla(0, 0%, 100%, 0.05), 0 0 0 1px hsla(0, 0%, 0%, 0.05), 0 2px 2px hsla(0, 0%, 0%, 0.05), 0 4px 4px hsla(0, 0%, 0%, 0.05), 0 8px 8px hsla(0, 0%, 0%, 0.05), 0 16px 16px hsla(0, 0%, 0%, 0.05)");break;case"thick-line":this.style.setProperty(`${i}-border`,`4px solid ${me(l).color}`),this.style.setProperty(`${i}-box-shadow`,"none");break;case"thin-line":this.style.setProperty(`${i}-border`,`1px solid ${me(l).color}`),this.style.setProperty(`${i}-box-shadow`,"none");break}}}}recalculateFontSizes(){for(const e of ve(!0)){const t=/^config\.style\.(.*)\.font$/.exec(e);if(t){const r=p(e);typeof r=="string"&&this.updateFont(`--${t[1].replace(/\./g,"-")}`,r)}}}updateColor(e,t){const{backgroundColor:r,color:i}=me(t);this.style.setProperty(`${e}-background-color`,r),this.style.setProperty(`${e}-color`,i)}updateFont(e,t){const r=p("config.style.fontScaling.enabled"),i={};if(r){const a=p("config.style.fontScaling.baseViewportWidth"),l=p("config.style.fontScaling.addAtDoubleWidth"),o=p("config.style.fontScaling.maximumSize");typeof a=="number"&&typeof l=="number"&&(i.scaling={baseViewportWidth:a,addAtDoubleWidth:l},typeof o=="string"&&(i.scaling.maximumSize=o))}const s=js(t,i);this.style.setProperty(`${e}-font-family`,s.fontFamily),this.style.setProperty(`${e}-font-size`,s.fontSize),this.style.setProperty(`${e}-font-style`,s.fontStyle),this.style.setProperty(`${e}-font-variant`,s.fontVariant),this.style.setProperty(`${e}-font-weight`,s.fontWeight),this.style.setProperty(`${e}-text-decoration`,s.textDecoration),this.style.setProperty(`${e}-text-transform`,s.textTransform)}updateLineColor(e,t){const{color:r}=me(t);this.style.setProperty(`${e}-text-decoration-color`,r)}}class Bs extends z{connectedCallback(){window.addEventListener("state-change",this),window.addEventListener("system-theme-change",this),Promise.resolve().then(()=>this.update())}disconnectedCallback(){window.removeEventListener("state-change",this),window.removeEventListener("system-theme-change",this)}update(){p("browser.darkTheme")?this.enable():this.disable()}disable(){this.style.cssText=""}enable(){const e=this.closest("state-css-variables");if(e){this.style.cssText="";for(let t=0;t<e.style.length;t++){const r=/^--dark-(.*)/.exec(e.style.item(t));r!=null&&r[1]&&this.style.setProperty(`--${r[1]}`,`var(--dark-${r[1]})`)}}}handleEvent(e){if(e.type==="system-theme-change")this.update();else{const{name:t}=e.detail;(["config","config.style","config.style.page.theme.enableSwitching","config.style.page.theme.override"].includes(t)||t.startsWith("config.style.dark"))&&this.update()}}}var J;class Us extends z{constructor(){super();U(this,"warnings");Et(this,J,void 0);this.warnings=[]}connectedCallback(){window.addEventListener("state-change",this),this.spyOnWarnings(),this.update()}disconnectedCallback(){window.removeEventListener("state-change",this),this.unspyOnWarnings()}handleEvent(t){t.type==="state-change"&&t.detail.name==="trail"&&(this.warnings=[],this.update())}spyOnWarnings(){_t(this,J,console.warn),console.warn=(...t)=>{this.warnings.push(...t),this.update(),pe(this,J).apply(pe(this,J),t)}}unspyOnWarnings(){pe(this,J)&&(console.warn=pe(this,J))}update(){this.isConnected&&(this.warnings.length>0&&p("config.testing")?(this.removeAttribute("hidden"),this.innerHTML=`<ul>${this.warnings.map(t=>`<li>Warning: ${t}</li>`).join("")}</ul>`):this.setAttribute("hidden",""))}}J=new WeakMap;function Vs(){wt({"error-handler":Ts,"external-fonts":Cs,"page-skip":As,"page-skip-indicator":Ls,"page-transition":Ms,"state-css-variables":Fs,"state-dark-theme-css-overrides":Bs,"warning-list":Us})}class fe extends z{constructor(){super(),this.addEventListener("keydown",e=>{(e.key===" "||e.key==="Enter")&&(e.preventDefault(),this.dispatchEvent(new MouseEvent("click",{bubbles:!0})))})}connectedCallback(){this.setAttribute("tabindex","0"),this.hasAttribute("role")||this.setAttribute("role","button")}}const{warn:Mt}=F("inserts");class Ws extends fe{constructor(){super(),this.addEventListener("click",()=>{const e=this.getAttribute("choices");if(e){let t;try{t=JSON.parse(e)}catch{Mt(`The choices attribute, "${e}" couldn't be parsed.`);return}if(!Array.isArray(t)){Mt("The choices attribute of this cycling link doesn't deserialize to an array.");return}let r=t.map(a=>typeof a=="string"?a:a.toString()).indexOf((this.textContent??"").trim())+1;r===t.length&&(r=0);const i=this.closest("page-transition");if(!i)throw new Error("Couldn't find suitable parent element to do a cycle link transition on.");i.startTransition(()=>{this.textContent=t[r].toString()});const s=this.getAttribute("set");s&&$(s,t[r])}})}}function Zs(n){let e=!0;for(const t of n.querySelectorAll("input, select"))e=e&&t.reportValidity();return e}class Gs extends fe{constructor(){super(),this.addEventListener("click",()=>{const e=this.getAttribute("to"),t=this.closest("article, footer, header");t&&!Zs(t)||e&&(this.dispatchEvent(new CustomEvent("passage-navigate",{bubbles:!0})),xn(e))})}connectedCallback(){super.connectedCallback(),this.setAttribute("role","link")}}class Js extends fe{constructor(){super(),this.addEventListener("click",vn)}}const Xs={match:/^(no )?ambient\s+sound/i,render(n,{volume:e}){const t=p("sound.ambient");if(t)for(const i in t)i!==n&&t[i].playing&&$(`sound.ambient.${i}.playing`,!1);if(!n)return;const r=p(`sound.ambient.${n}.description`)??"";return e&&$(`sound.ambient.${n}.volume`,e),$(`sound.ambient.${n}.playing`,!0),`<audio>${r}</audio>`}};function xt(n,e){return/^\w+:\/\/\/?\w/i.test(n)?R("a",{class:"link",href:n},[e??n]):R("passage-link",{class:"link",to:n},[e??n])}function Qs(n){return n.replace(/\[\[(.*?)\]\]/g,(e,t)=>{let r=t;const i=t.indexOf("|");if(i!==-1)r=t.substring(0,i),t=t.substring(i+1);else{const s=t.indexOf("->");if(s!==-1)r=t.substring(0,s),t=t.substring(s+2);else{const a=t.indexOf("<-");a!==-1&&(r=t.substring(a+2),t=t.substring(0,a))}}return r===""||t===""?e:xt(t,r??t)})}const Ks={match:/^back\s+link/i,render(n,e){const t=p("trail");if(!(!Array.isArray(t)||t.length===0))return xt(t.length>1?t[t.length-2]:t[0],e.label??"Back")}},Ys={match:/^cycling\s+link(\s+for)?/i,render(n,{choices:e}){let t="";if(n){const r=p(n);r===void 0?($(n,e[0]),t=e[0].toString()):t=r.toString()}else t=e[0].toString();return R("cycling-link",{class:"link",set:n??void 0,choices:JSON.stringify(e)},[t])}},eo={match:/^dropdown menu(\s+for)?/i,render(n,e){let t;return n&&(t=p(n),t===void 0&&($(n,e.choices[0]),t=e.choices[0])),R("variable-binding",{name:n??void 0},[ke("select",{},e.choices.map(r=>{const i=r.toString(),s={"data-json-value":JSON.stringify(r)};return n&&t===r&&(s.selected=""),ke("option",s,[i])}))])}},to={match:/^embed\s+flickr(\s+image)?/i,render(n,e){var t;if(n)return R("img",{...e,src:(t=/img src="(.+?)"/.exec(n))==null?void 0:t[1]})}},no={match:/^embed\s+image/i,render(n,e){return R("img",{...e,src:n??""})}},ro={match:/^embed\s+passage(\s+named)?/i,render(n){if(!n)return"";const e=Se(n);return e?$e(e.source):""}},io={match:/^embed\s+unsplash(\s+image)?/i,render(n,e){if(n)return R("img",{...e,src:`https://source.unsplash.com/${n.replace(/.*\//,"")}/${e.width}x${e.height}`})}},so={match:/^embed\s+youtube(\s+video)?/i,render(n,e){if(!n)return;let t=`https://www.youtube-nocookie.com/embed/${n.replace(/.*\?v=/,"")}?modestbranding=1&rel=0&controls=${e.controls?1:0}&`;return e.autoplay&&(t+="autoplay=1&"),e.loop&&(t+="loop=1&"),R("div",{style:"position: relative; height: 0; padding-bottom: 56.25%; margin-bottom: 1em"},[ke("iframe",{src:t,frameBorder:"0",style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%"})])}},oo={match:/^link\s+to/i,render(n,{label:e}){if(n)return xt(n,e)}},ao={match:/^restart\s+link/i,render(n,{label:e}){return R("restart-link",{class:"link"},[e??"Restart"])}},lo={match:/^reveal\s+link/i,render(n,e){if(n){if(e.text)return R("reveal-link",{class:"link",text:e.text},[n]);if(e.passage)return R("reveal-link",{class:"link",passage:e.passage},[n])}}},co={match:/^sound\s+effect/i,render(n,{volume:e}){const t=p(`sound.effect.${n}.description`)??"";return e&&$(`sound.effect.${n}.volume`,e),$(`sound.effect.${n}.playing`,!0),`<audio>${t}</audio>`}},uo={match:/^text\s+input(\s+for)?/i,render(n,e){return R("variable-binding",{name:n??void 0},[ke("input",{type:"text",value:n?(p(n)??"").toString():"",required:e.required!==!1?"":void 0})])}},fo={match:/^theme\s+switcher$/i,render(n,{darkLabel:e,lightLabel:t,prefix:r,suffix:i}){return R("theme-switcher",{prefix:r,suffix:i,class:"link","dark-label":e,"light-label":t},[])}},Cn=[Xs,Ks,Ys,eo,to,no,ro,io,so,oo,ao,lo,co,uo,fo];let ue=[...Cn];function An(){return ue}function ho(n){ue=[...ue,n]}function po(n){ue=ue.filter(e=>e!==n)}function go(){ue=[...Cn]}const mo=Object.freeze(Object.defineProperty({__proto__:null,add:ho,all:An,remove:po,reset:go},Symbol.toStringTag,{value:"Module"}));function Ln(n,e,t={}){const r=`<${e}`+Object.keys(t).reduce((s,a)=>`${s} ${a}="${t[a]}"`,"")+">";let i=r+n.replace(/[\r\n]{2,}/g,`</${e}>$&${r}`)+`</${e}>`;return i=i.replace(/(<span.*?>)\s*(#+)/gi,"$2 $1"),i}const bo={match:/^after\s/i,process(n,{invocation:e}){const t=Ie(e.replace(/^after\s/i,""),"ms");n.text=Ln(n.text,"skippable-animation",{"skippable-delay":t.toString(),class:"fade-in"})}},yo={match:/^align\s+(left|right|center)/i,process(n,{invocation:e}){const t=e.replace(/^align\s+/i,"");n.text=Ln(n.text,"span",{style:`display: block; text-align: ${t}`})}},wo={match:/^append$/i,process(n){n.startsNewParagraph=!1}},ko={match:/^if(always|never)?\s|else$|unless\s/i,processRaw(n,{invocation:e,state:t}){const r=e.replace(/\s.*/,"").toLowerCase(),i=()=>new Function("return "+e.replace(/.*?\s/,"")).apply(window);switch(r){case"if":t.conditionEval=i();break;case"ifalways":t.conditionEval=!0;break;case"ifnever":t.conditionEval=!1;break;case"unless":t.conditionEval=!i();break;case"else":if(t.conditionEval===void 0)throw new Error("There was no matching if modifier for an else modifier.");t.conditionEval=!t.conditionEval;break}t.conditionEval||(n.text="")}},xo={match:/^continued?|cont('d)?$/i,process(){}},vo={match:/^css$/i,processRaw(n){n.text=`<style>${n.text}</style>`}},$o={match:/^javascript$/i,processRaw(n){try{const e=new Function(`
						function write() { write.__out += write.__join.call(arguments, ''); }
						write.__out = '';
						write.__join = Array.prototype.join;
						${qi(n.text)};
						return write.__out;
					`);n.text=e.apply(window)}catch(e){if(p("config.testing")){const t=e;let r="unknown error";t.stack?r=t.stack:r=t.message+`
[No stack trace available]`,n.text=`<div class="error">An error occurred evaluating:<pre>${n.text}</pre><p><pre>${r}</pre></p></div>`}else throw e}}},So={match:/^(note(\s+to\s+myself)?|n\.?b\.?|todo|fixme)$/i,process(n){n.text=""}},zn=[bo,yo,wo,ko,xo,vo,$o,So];let ne=[...zn];function Pn(){return ne}function Eo(n){ne=[...ne,n]}function _o(n){ne=ne.filter(e=>e!==n)}function To(){ne=[...zn]}const Co=Object.freeze(Object.defineProperty({__proto__:null,add:Eo,all:Pn,get modifiers(){return ne},remove:_o,reset:To},Symbol.toStringTag,{value:"Module"})),{log:be,warn:Ao}=F("parse"),Lo={varsSep:/^--$/m,modifierPattern:/^\[([^[].+[^\]])\]$/gm};function zo(n,e=Lo){const t={vars:[],blocks:[]},r=n.split(e.varsSep,2);let i,s;r.length===2?(be("Detected vars section"),[i,s]=r,i.split(/\r?\n/).forEach(c=>{if(c.trim()==="")return;const d=c.indexOf(":");if(d!==-1){const f=c.substring(0,d).trim(),h=c.substring(d+1).trim(),m={name:f,value:new Function(`return (${h})`)},v=f.match(/\(.+\)/);if(v){if(!v.index)throw new Error(`A condition was found in "${f}", but no index was present in the regular expression match.`);m.condition=new Function(`return !!(${v[0]})`),m.name=m.name.substring(0,v.index).trim(),be(`Setting variable "${m.name}" to "${h}" with condition (${v[0]})`)}else be(`Setting variable "${f}" to "${h}" without condition`);t.vars.push(m)}else Ao(`The line "${c}" in the vars section is missing a colon. It was ignored.`)})):(be("No vars section detected"),s=r[0]);function a(c,d){const f=d.trim();f!==""&&(be(`Creating '${c}' block with content: "${f}"`),t.blocks.push({type:c,content:f}))}const l=new RegExp(e.modifierPattern);let o=0,u=l.exec(s);for(;u;){a("text",s.substring(o,u.index));const c=u[1];let d="";for(let f=0;f<c.length;f++)switch(c[f]){case'"':for(d+='"',f=f+1;f<c.length&&(d+=c[f],!(c[f]==='"'&&c[f-1]!=="\\"));f++);break;case";":a("modifier",d),d="";break;default:d+=c[f]}a("modifier",d),o=l.lastIndex,u=l.exec(s)}return a("text",s.substring(o)),t}function On(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let oe=On();function Po(n){oe=n}const In=/[&<>"']/,Oo=new RegExp(In.source,"g"),Nn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Io=new RegExp(Nn.source,"g"),No={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Dt=n=>No[n];function I(n,e){if(e){if(In.test(n))return n.replace(Oo,Dt)}else if(Nn.test(n))return n.replace(Io,Dt);return n}const Ro=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Rn(n){return n.replace(Ro,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Mo=/(^|[^\[])\^/g;function E(n,e){n=typeof n=="string"?n:n.source,e=e||"";const t={replace:(r,i)=>(i=i.source||i,i=i.replace(Mo,"$1"),n=n.replace(r,i),t),getRegex:()=>new RegExp(n,e)};return t}const Do=/[^\w:]/g,jo=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function jt(n,e,t){if(n){let r;try{r=decodeURIComponent(Rn(t)).replace(Do,"").toLowerCase()}catch{return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}e&&!jo.test(t)&&(t=Bo(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Ce={},qo=/^[^:]+:\/*[^/]*$/,Ho=/^([^:]+:)[\s\S]*$/,Fo=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Bo(n,e){Ce[" "+n]||(qo.test(n)?Ce[" "+n]=n+"/":Ce[" "+n]=ze(n,"/",!0)),n=Ce[" "+n];const t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(Ho,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(Fo,"$1")+e:n+e}const Ne={exec:function(){}};function qt(n,e){const t=n.replace(/\|/g,(s,a,l)=>{let o=!1,u=a;for(;--u>=0&&l[u]==="\\";)o=!o;return o?"|":" |"}),r=t.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function ze(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r;){const s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function Uo(n,e){if(n.indexOf(e[1])===-1)return-1;const t=n.length;let r=0,i=0;for(;i<t;i++)if(n[i]==="\\")i++;else if(n[i]===e[0])r++;else if(n[i]===e[1]&&(r--,r<0))return i;return-1}function Vo(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ht(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function Ft(n,e,t,r){const i=e.href,s=e.title?I(e.title):null,a=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:t,href:i,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:t,href:i,title:s,text:I(a)}}function Wo(n,e){const t=n.match(/^(\s+)(?:```)/);if(t===null)return e;const r=t[1];return e.split(`
`).map(i=>{const s=i.match(/^\s+/);if(s===null)return i;const[a]=s;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}class vt{constructor(e){this.options=e||oe}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ze(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=Wo(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){const i=ze(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const r=t[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r,i,s,a,l,o,u,c,d,f,h,m,v=t[1].trim();const O=v.length>1,x={type:"list",raw:"",ordered:O,start:O?+v.slice(0,-1):"",loose:!1,items:[]};v=O?`\\d{1,9}\\${v.slice(-1)}`:`\\${v}`,this.options.pedantic&&(v=O?v:"[*+-]");const A=new RegExp(`^( {0,3}${v})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(m=!1,!(!(t=A.exec(e))||this.rules.block.hr.test(e)));){if(r=t[0],e=e.substring(r.length),c=t[2].split(`
`,1)[0].replace(/^\t+/,w=>" ".repeat(3*w.length)),d=e.split(`
`,1)[0],this.options.pedantic?(a=2,h=c.trimLeft()):(a=t[2].search(/[^ ]/),a=a>4?1:a,h=c.slice(a),a+=t[1].length),o=!1,!c&&/^ *$/.test(d)&&(r+=d+`
`,e=e.substring(d.length+1),m=!0),!m){const w=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),k=new RegExp(`^ {0,${Math.min(3,a-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),T=new RegExp(`^ {0,${Math.min(3,a-1)}}(?:\`\`\`|~~~)`),C=new RegExp(`^ {0,${Math.min(3,a-1)}}#`);for(;e&&(f=e.split(`
`,1)[0],d=f,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(T.test(d)||C.test(d)||w.test(d)||k.test(e)));){if(d.search(/[^ ]/)>=a||!d.trim())h+=`
`+d.slice(a);else{if(o||c.search(/[^ ]/)>=4||T.test(c)||C.test(c)||k.test(c))break;h+=`
`+d}!o&&!d.trim()&&(o=!0),r+=f+`
`,e=e.substring(f.length+1),c=d.slice(a)}}x.loose||(u?x.loose=!0:/\n *\n *$/.test(r)&&(u=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(h),i&&(s=i[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),x.items.push({type:"list_item",raw:r,task:!!i,checked:s,loose:!1,text:h}),x.raw+=r}x.items[x.items.length-1].raw=r.trimRight(),x.items[x.items.length-1].text=h.trimRight(),x.raw=x.raw.trimRight();const M=x.items.length;for(l=0;l<M;l++)if(this.lexer.state.top=!1,x.items[l].tokens=this.lexer.blockTokens(x.items[l].text,[]),!x.loose){const w=x.items[l].tokens.filter(T=>T.type==="space"),k=w.length>0&&w.some(T=>/\n.*\n/.test(T.raw));x.loose=k}if(x.loose)for(l=0;l<M;l++)x.items[l].loose=!0;return x}}html(e){const t=this.rules.block.html.exec(e);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){const i=this.options.sanitizer?this.options.sanitizer(t[0]):I(t[0]);r.type="paragraph",r.text=i,r.tokens=this.lexer.inline(i)}return r}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(t){const r={type:"table",header:qt(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=t[0];let i=r.align.length,s,a,l,o;for(s=0;s<i;s++)/^ *-+: *$/.test(r.align[s])?r.align[s]="right":/^ *:-+: *$/.test(r.align[s])?r.align[s]="center":/^ *:-+ *$/.test(r.align[s])?r.align[s]="left":r.align[s]=null;for(i=r.rows.length,s=0;s<i;s++)r.rows[s]=qt(r.rows[s],r.header.length).map(u=>({text:u}));for(i=r.header.length,a=0;a<i;a++)r.header[a].tokens=this.lexer.inline(r.header[a].text);for(i=r.rows.length,a=0;a<i;a++)for(o=r.rows[a],l=0;l<o.length;l++)o[l].tokens=this.lexer.inline(o[l].text);return r}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:I(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):I(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const a=ze(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{const a=Uo(t[2],"()");if(a>-1){const o=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);a&&(i=a[1],s=a[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),Ft(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Ft(r,i,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;const s=i[1]||i[2]||"";if(!s||s&&(r===""||this.rules.inline.punctuation.exec(r))){const a=i[0].length-1;let l,o,u=a,c=0;const d=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+a);(i=d.exec(t))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(o=l.length,i[3]||i[4]){u+=o;continue}else if((i[5]||i[6])&&a%3&&!((a+o)%3)){c+=o;continue}if(u-=o,u>0)continue;o=Math.min(o,o+u+c);const f=e.slice(0,a+i.index+(i[0].length-l.length)+o);if(Math.min(a,o)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," ");const i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=I(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e,t){const r=this.rules.inline.autolink.exec(e);if(r){let i,s;return r[2]==="@"?(i=I(this.options.mangle?t(r[1]):r[1]),s="mailto:"+i):(i=I(r[1]),s=i),{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}url(e,t){let r;if(r=this.rules.inline.url.exec(e)){let i,s;if(r[2]==="@")i=I(this.options.mangle?t(r[0]):r[0]),s="mailto:"+i;else{let a;do a=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(a!==r[0]);i=I(r[0]),r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,t){const r=this.rules.inline.text.exec(e);if(r){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):I(r[0]):r[0]:i=I(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:i}}}}const y={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Ne,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};y._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;y._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;y.def=E(y.def).replace("label",y._label).replace("title",y._title).getRegex();y.bullet=/(?:[*+-]|\d{1,9}[.)])/;y.listItemStart=E(/^( *)(bull) */).replace("bull",y.bullet).getRegex();y.list=E(y.list).replace(/bull/g,y.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+y.def.source+")").getRegex();y._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";y._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;y.html=E(y.html,"i").replace("comment",y._comment).replace("tag",y._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();y.paragraph=E(y._paragraph).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y._tag).getRegex();y.blockquote=E(y.blockquote).replace("paragraph",y.paragraph).getRegex();y.normal={...y};y.gfm={...y.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};y.gfm.table=E(y.gfm.table).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y._tag).getRegex();y.gfm.paragraph=E(y._paragraph).replace("hr",y.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",y.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y._tag).getRegex();y.pedantic={...y.normal,html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",y._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ne,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:E(y.normal._paragraph).replace("hr",y.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",y.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const g={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ne,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ne,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};g._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";g.punctuation=E(g.punctuation).replace(/punctuation/g,g._punctuation).getRegex();g.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;g.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;g._comment=E(y._comment).replace("(?:-->|$)","-->").getRegex();g.emStrong.lDelim=E(g.emStrong.lDelim).replace(/punct/g,g._punctuation).getRegex();g.emStrong.rDelimAst=E(g.emStrong.rDelimAst,"g").replace(/punct/g,g._punctuation).getRegex();g.emStrong.rDelimUnd=E(g.emStrong.rDelimUnd,"g").replace(/punct/g,g._punctuation).getRegex();g._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;g._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;g._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;g.autolink=E(g.autolink).replace("scheme",g._scheme).replace("email",g._email).getRegex();g._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;g.tag=E(g.tag).replace("comment",g._comment).replace("attribute",g._attribute).getRegex();g._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;g._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;g._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;g.link=E(g.link).replace("label",g._label).replace("href",g._href).replace("title",g._title).getRegex();g.reflink=E(g.reflink).replace("label",g._label).replace("ref",y._label).getRegex();g.nolink=E(g.nolink).replace("ref",y._label).getRegex();g.reflinkSearch=E(g.reflinkSearch,"g").replace("reflink",g.reflink).replace("nolink",g.nolink).getRegex();g.normal={...g};g.pedantic={...g.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",g._label).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",g._label).getRegex()};g.gfm={...g.normal,escape:E(g.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};g.gfm.url=E(g.gfm.url,"i").replace("email",g.gfm._extended_email).getRegex();g.breaks={...g.gfm,br:E(g.br).replace("{2,}","*").getRegex(),text:E(g.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function Zo(n){return n.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Bt(n){let e="",t,r;const i=n.length;for(t=0;t<i;t++)r=n.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),e+="&#"+r+";";return e}class K{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||oe,this.options.tokenizer=this.options.tokenizer||new vt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:y.normal,inline:g.normal};this.options.pedantic?(t.block=y.pedantic,t.inline=g.pedantic):this.options.gfm&&(t.block=y.gfm,this.options.breaks?t.inline=g.breaks:t.inline=g.gfm),this.tokenizer.rules=t}static get rules(){return{block:y,inline:g}}static lex(e,t){return new K(t).lex(e)}static lexInline(e,t){return new K(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,o,u)=>o+"    ".repeat(u.length));let r,i,s,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const o=e.slice(1);let u;this.options.extensions.startBlock.forEach(function(c){u=c.call({lexer:this},o),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(s=e.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],a&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),a=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,a=e,l,o,u;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)c.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,l.index)+"["+Ht("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,l.index)+"["+Ht("a",l[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(a))!=null;)a=a.slice(0,l.index+l[0].length-2)+"++"+a.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(o||(u=""),o=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(r=c.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,a,u)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e,Bt)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e,Bt))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=e.slice(1);let f;this.options.extensions.startInline.forEach(function(h){f=h.call({lexer:this},d),typeof f=="number"&&f>=0&&(c=Math.min(c,f))}),c<1/0&&c>=0&&(s=e.substring(0,c+1))}if(r=this.tokenizer.inlineText(s,Zo)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),o=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}}class He{constructor(e){this.options=e||oe}code(e,t,r){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,i);s!=null&&s!==e&&(r=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+I(i)+'">'+(r?e:I(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:I(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,t,r,i){if(this.options.headerIds){const s=this.options.headerPrefix+i.slug(r);return`<h${t} id="${s}">${e}</h${t}>
`}return`<h${t}>${e}</h${t}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,r){const i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){if(e=jt(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+r+"</a>",i}image(e,t,r){if(e=jt(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let i=`<img src="${e}" alt="${r}"`;return t&&(i+=` title="${t}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}}class Mn{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}}class Dn{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let r=e,i=0;if(this.seen.hasOwnProperty(r)){i=this.seen[e];do i++,r=e+"-"+i;while(this.seen.hasOwnProperty(r))}return t||(this.seen[e]=i,this.seen[r]=0),r}slug(e,t={}){const r=this.serialize(e);return this.getNextSafeSlug(r,t.dryrun)}}class Y{constructor(e){this.options=e||oe,this.options.renderer=this.options.renderer||new He,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Mn,this.slugger=new Dn}static parse(e,t){return new Y(t).parse(e)}static parseInline(e,t){return new Y(t).parseInline(e)}parse(e,t=!0){let r="",i,s,a,l,o,u,c,d,f,h,m,v,O,x,A,M,w,k,T;const C=e.length;for(i=0;i<C;i++){if(h=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(T=this.options.extensions.renderers[h.type].call({parser:this},h),T!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){r+=T||"";continue}switch(h.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(h.tokens),h.depth,Rn(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(d="",c="",l=h.header.length,s=0;s<l;s++)c+=this.renderer.tablecell(this.parseInline(h.header[s].tokens),{header:!0,align:h.align[s]});for(d+=this.renderer.tablerow(c),f="",l=h.rows.length,s=0;s<l;s++){for(u=h.rows[s],c="",o=u.length,a=0;a<o;a++)c+=this.renderer.tablecell(this.parseInline(u[a].tokens),{header:!1,align:h.align[a]});f+=this.renderer.tablerow(c)}r+=this.renderer.table(d,f);continue}case"blockquote":{f=this.parse(h.tokens),r+=this.renderer.blockquote(f);continue}case"list":{for(m=h.ordered,v=h.start,O=h.loose,l=h.items.length,f="",s=0;s<l;s++)A=h.items[s],M=A.checked,w=A.task,x="",A.task&&(k=this.renderer.checkbox(M),O?A.tokens.length>0&&A.tokens[0].type==="paragraph"?(A.tokens[0].text=k+" "+A.tokens[0].text,A.tokens[0].tokens&&A.tokens[0].tokens.length>0&&A.tokens[0].tokens[0].type==="text"&&(A.tokens[0].tokens[0].text=k+" "+A.tokens[0].tokens[0].text)):A.tokens.unshift({type:"text",text:k}):x+=k),x+=this.parse(A.tokens,O),f+=this.renderer.listitem(x,w,M);r+=this.renderer.list(f,m,v);continue}case"html":{r+=this.renderer.html(h.text);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(f=h.tokens?this.parseInline(h.tokens):h.text;i+1<C&&e[i+1].type==="text";)h=e[++i],f+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);r+=t?this.renderer.paragraph(f):f;continue}default:{const L='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(L);return}else throw new Error(L)}}}return r}parseInline(e,t){t=t||this.renderer;let r="",i,s,a;const l=e.length;for(i=0;i<l;i++){if(s=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(a=this.options.extensions.renderers[s.type].call({parser:this},s),a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){r+=a||"";continue}switch(s.type){case"escape":{r+=t.text(s.text);break}case"html":{r+=t.html(s.text);break}case"link":{r+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break}case"image":{r+=t.image(s.href,s.title,s.text);break}case"strong":{r+=t.strong(this.parseInline(s.tokens,t));break}case"em":{r+=t.em(this.parseInline(s.tokens,t));break}case"codespan":{r+=t.codespan(s.text);break}case"br":{r+=t.br();break}case"del":{r+=t.del(this.parseInline(s.tokens,t));break}case"text":{r+=t.text(s.text);break}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(o);return}else throw new Error(o)}}}return r}}class Re{constructor(e){this.options=e||oe}preprocess(e){return e}postprocess(e){return e}}U(Re,"passThroughHooks",new Set(["preprocess","postprocess"]));function Go(n,e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,n){const i="<p>An error occurred:</p><pre>"+I(r.message+"",!0)+"</pre>";if(e)return Promise.resolve(i);if(t){t(null,i);return}return i}if(e)return Promise.reject(r);if(t){t(r);return}throw r}}function jn(n,e){return(t,r,i)=>{typeof r=="function"&&(i=r,r=null);const s={...r};r={...b.defaults,...s};const a=Go(r.silent,r.async,i);if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(Vo(r),r.hooks&&(r.hooks.options=r),i){const l=r.highlight;let o;try{r.hooks&&(t=r.hooks.preprocess(t)),o=n(t,r)}catch(d){return a(d)}const u=function(d){let f;if(!d)try{r.walkTokens&&b.walkTokens(o,r.walkTokens),f=e(o,r),r.hooks&&(f=r.hooks.postprocess(f))}catch(h){d=h}return r.highlight=l,d?a(d):i(null,f)};if(!l||l.length<3||(delete r.highlight,!o.length))return u();let c=0;b.walkTokens(o,function(d){d.type==="code"&&(c++,setTimeout(()=>{l(d.text,d.lang,function(f,h){if(f)return u(f);h!=null&&h!==d.text&&(d.text=h,d.escaped=!0),c--,c===0&&u()})},0))}),c===0&&u();return}if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then(l=>n(l,r)).then(l=>r.walkTokens?Promise.all(b.walkTokens(l,r.walkTokens)).then(()=>l):l).then(l=>e(l,r)).then(l=>r.hooks?r.hooks.postprocess(l):l).catch(a);try{r.hooks&&(t=r.hooks.preprocess(t));const l=n(t,r);r.walkTokens&&b.walkTokens(l,r.walkTokens);let o=e(l,r);return r.hooks&&(o=r.hooks.postprocess(o)),o}catch(l){return a(l)}}}function b(n,e,t){return jn(K.lex,Y.parse)(n,e,t)}b.options=b.setOptions=function(n){return b.defaults={...b.defaults,...n},Po(b.defaults),b};b.getDefaults=On;b.defaults=oe;b.use=function(...n){const e=b.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(t=>{const r={...t};if(r.async=b.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){const s=e.renderers[i.name];s?e.renderers[i.name]=function(...a){let l=i.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:e.renderers[i.name]=i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){const i=b.defaults.renderer||new He;for(const s in t.renderer){const a=i[s];i[s]=(...l)=>{let o=t.renderer[s].apply(i,l);return o===!1&&(o=a.apply(i,l)),o}}r.renderer=i}if(t.tokenizer){const i=b.defaults.tokenizer||new vt;for(const s in t.tokenizer){const a=i[s];i[s]=(...l)=>{let o=t.tokenizer[s].apply(i,l);return o===!1&&(o=a.apply(i,l)),o}}r.tokenizer=i}if(t.hooks){const i=b.defaults.hooks||new Re;for(const s in t.hooks){const a=i[s];Re.passThroughHooks.has(s)?i[s]=l=>{if(b.defaults.async)return Promise.resolve(t.hooks[s].call(i,l)).then(u=>a.call(i,u));const o=t.hooks[s].call(i,l);return a.call(i,o)}:i[s]=(...l)=>{let o=t.hooks[s].apply(i,l);return o===!1&&(o=a.apply(i,l)),o}}r.hooks=i}if(t.walkTokens){const i=b.defaults.walkTokens;r.walkTokens=function(s){let a=[];return a.push(t.walkTokens.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}b.setOptions(r)})};b.walkTokens=function(n,e){let t=[];for(const r of n)switch(t=t.concat(e.call(b,r)),r.type){case"table":{for(const i of r.header)t=t.concat(b.walkTokens(i.tokens,e));for(const i of r.rows)for(const s of i)t=t.concat(b.walkTokens(s.tokens,e));break}case"list":{t=t.concat(b.walkTokens(r.items,e));break}default:b.defaults.extensions&&b.defaults.extensions.childTokens&&b.defaults.extensions.childTokens[r.type]?b.defaults.extensions.childTokens[r.type].forEach(function(i){t=t.concat(b.walkTokens(r[i],e))}):r.tokens&&(t=t.concat(b.walkTokens(r.tokens,e)))}return t};b.parseInline=jn(K.lexInline,Y.parseInline);b.Parser=Y;b.parser=Y.parse;b.Renderer=He;b.TextRenderer=Mn;b.Lexer=K;b.lexer=K.lex;b.Tokenizer=vt;b.Slugger=Dn;b.Hooks=Re;b.parse=b;b.options;b.setOptions;b.use;b.walkTokens;b.parseInline;Y.parse;K.lex;const $t=new He;$t.blockquote=n=>`<div class="fork">${n}</div>`;$t.del=n=>`<span class="small-caps">${n}</span>`;function Jo(n,e){var r,i;const t=n.substring(1,n.length-1).trim();if(/\s/.test(t)){const s=(r=t.match(/^[^:,]+/))==null?void 0:r[0];if(!s)return n;const a=e.find(l=>l.match.test(s));if(a){const l=t.replace(s,"");if(l[0]===":"){const o=new Function(`return {"${s}" ${l}}`)(),u=o[s];return delete o[s],a.render(u,o,t)}else if(l[0]===","){const o=new Function(`return {${l.substring(1)}}`)();return a.render(null,o,t)}else if(l==="")return a.render(null,{},t)}}else{const s=/(.+)\[(.+)\]$/.exec(t);let a;if(s?a=(i=p(s[1]))==null?void 0:i[s[2]]:a=p(t),a!==void 0)return a}return n}function Xo(n,e){let t="",r=0,i=n.indexOf("{");if(i===-1)return n;let s=!1,a;for(let l=i+1;l<n.length;l++)switch(n[l]){case"{":s||(i=l);break;case'"':case"'":l>0&&n[l-1]!=="\\"&&(s?s&&a===n[l]&&(s=!1):(s=!0,a=n[l]));break;case"}":if(!s){const o=n.substring(i,l+1);let u="";try{u=Jo(o,e)}catch(c){console.warn(`An error occurred while rendering "${o}": ${c.message}`),u=o}u===void 0&&(u=""),t+=n.substring(r,i)+u,r=l+1,i=n.indexOf("{",r),l=i,i===-1&&(l=n.length)}break}return t+n.substring(r)}const{log:Z}=F("render"),Qo={renderer:$t,smartypants:!0};function Ko(n,e,t,r=!1){if(!n.vars)throw new Error("The renderer was given an object with no vars property.");if(!n.blocks)throw new Error("The renderer was given an object with no blocks property.");let i="";if(!r){Z(`Setting vars (${n.vars.length})`);for(const o of n.vars)o.condition?o.condition()?(Z(`Setting var "${o.name}" (condition is currently true)`),$(o.name,o.value())):Z(`Not setting var "${o.name}" (condition is currently false)`):(Z(`Setting var "${o.name}"`),$(o.name,o.value()))}let s=[];const a=new Map;for(const o of n.blocks)switch(o.type){case"text":{const u={text:o.content,startsNewParagraph:!0},c=s.filter(f=>!!f.modifier.processRaw);Z(`Running ${c.length} modifiers on raw source block`);for(const{invocation:f,modifier:h}of c){const m=a.get(h);if(!m)throw new Error("State for a modifier was unknown, but should have had a value.");if(!h.processRaw)throw new Error("A modifier was added to the raw modifiers list, but it has no processRaw function.");h.processRaw(u,{state:m,invocation:f})}u.text=Xo(Qs(u.text),e);const d=s.filter(f=>!!f.modifier.process);Z(`Running ${d.length} modifiers on source block`);for(const{invocation:f,modifier:h}of d){const m=a.get(h);if(!m)throw new Error("State for a modifier was unknown, but should have had a value.");if(!h.process)throw new Error("A modifier was added to the processed modifiers list, but it has no process function.");h.process(u,{state:m,invocation:f})}Z(`Output after modifiers: ${JSON.stringify(u)}`),u.text.trim()!==""&&(i!==""&&(i+=u.startsNewParagraph?`

`:" "),i+=u.text),s=[];break}case"modifier":{const u=t.filter(c=>c.match.test(o.content));if(u.length===1){const c=u[0];Z(`Activated modifier matching [${o.content}]`),a.has(c)||a.set(c,{}),s.push({modifier:c,invocation:o.content})}else u.length===0?i+=`

[${o.content}]

`:(console.warn(`More than one modifier matched "[${o.content}]".`),i+=`

[${o.content}]

`);break}default:throw new Error(`Don't know how to render a block with type "${o.type}".`)}const l=/^((>|-|(\*\s)).*$)\n{2,}\2/gm;for(;l.test(i);)i=i.replace(l,`$1
$2`);return b.setOptions(Qo),Z(`Final Markdown:
${i}`),b(i)}function $e(n,e=!1){return Ko(zo(n),An(),Pn(),e)}class Yo extends fe{constructor(){super(),this.addEventListener("click",()=>{let e=this.getAttribute("text");const t=this.getAttribute("passage");if(t){const r=Se(t);r&&(e=r.source)}if(e){const r=document.createElement("div");r.innerHTML=$e(e).trim();const i=this.closest("page-transition");if(!i)throw new Error("Couldn't find suitable parent element to do a reveal link transition on.");i.startTransition(()=>{var a,l;const s=r.children.length;if(s>0&&this.parentNode){const o=document.createElement("span");if(o.innerHTML=((a=r.firstElementChild)==null?void 0:a.innerHTML)??"",this.parentNode.insertBefore(o,this),(l=r.firstElementChild)==null||l.remove(),s>1&&this.parentNode.parentNode&&r.lastChild){const u=r.lastChild;for(;r.lastChild;)this.parentNode.parentNode.insertBefore(r.lastChild,this.parentNode.nextSibling);for(;this.nextSibling;)u.insertBefore(this.nextSibling,null)}}this.remove()})}})}}class qn extends z{attributeChangedCallback(){const e=this.getAttribute("skippable-delay");if(!e)return;const t=parseInt(e);if(isFinite(t))if(t===0){this.style.animationDelay="";const r=this.className;this.className="",this.offsetWidth,this.className=r}else this.style.animationDelay=`${t}ms`}}U(qn,"observedAttributes",["skippable-delay"]);class Hn extends fe{constructor(){super(),this.addEventListener("click",this),window.addEventListener("state-change",this)}connectedCallback(){super.connectedCallback(),this.updateLabel(),this.updateVisibility()}disconnectedCallback(){window.removeEventListener("state-change",this)}handleEvent(e){if(e.type==="click")$("config.style.page.theme.override",p("browser.darkTheme")?"light":"dark"),this.updateLabel();else{const{detail:t}=e;t.name==="config.style.page.theme.enableSwitching"&&this.updateVisibility()}}updateLabel(){const e=p("browser.darkTheme")?"dark":"light";this.innerHTML=this.getAttribute(`${e}-label`)??"Switch Theme"}updateVisibility(){p("config.style.page.theme.enableSwitching")?this.removeAttribute("hidden"):this.setAttribute("hidden","")}attributeChangedCallback(){this.updateLabel()}}U(Hn,"observedAttributes",["dark-label","light-label"]);class ea extends z{constructor(){super(),this.delegate("change","input, select",e=>{const t=this.getAttribute("name"),r=e.target;if(t)switch(r.nodeName){case"INPUT":$(t,r.value);break;case"SELECT":{const i=r.querySelectorAll("option")[r.selectedIndex];$(t,i.dataset.jsonValue?JSON.parse(i.dataset.jsonValue):i.value)}}})}}function ta(){wt({"cycling-link":Ws,"inline-button":fe,"passage-link":Gs,"restart-link":Js,"reveal-link":Yo,"skippable-animation":qn,"theme-switcher":Hn,"variable-binding":ea})}function Fn(){ta()}const na=Object.freeze(Object.defineProperty({__proto__:null,initTemplate:Fn,inserts:mo,modifiers:Co,render:$e},Symbol.toStringTag,{value:"Module"})),ra=hn(n=>{if(n.some(e=>e[0])){const e=p("trail");if(!Array.isArray(e))throw new Error("The trail variable has been set to a non-array value.");if(typeof e[e.length-1]!="string")throw new Error("The last value in the trail variable is not a string.");const r=Se(e[e.length-1]);if(!r)throw new Error(`There is no passage named "${e[e.length-1]}".`);const i=$e(r.source),s={footer:{center:"",left:"",right:""},header:{center:"",left:"",right:""}};for(const a in s)for(const l in s[a])s[a][l]=$e(p(`config.${a}.${l}`).toString());window.dispatchEvent(new CustomEvent("display-change",{detail:{body:i,...s}}))}});let Ue;function ia(){window.addEventListener("state-change",({detail:n})=>{ra(n.name==="trail")}),Ue=window.matchMedia("(prefers-color-scheme: dark)"),Ue.addEventListener("change",()=>{window.dispatchEvent(new CustomEvent("system-theme-change",{detail:{theme:Ue.matches?"dark":"light"}}))})}const sa={"config.body.transition.name":"crossfade","config.body.transition.duration":"300ms","config.header.left":"","config.header.center":"","config.header.right":"","config.footer.left":"_{story.name}_","config.footer.center":"","config.footer.right":"{theme switcher}&emsp;{restart link}"};function oa(){ie(sa),Vs(),ia()}const{warn:Ae}=F("extensibility");function Ut(n){return n.split(".").map(window.parseInt)}function aa(){window.engine={extend(n,e){const t=p("engine.version");if(typeof t!="string")throw new Error(`engine.version has been set to a ${typeof t}, not a string.`);const r=Ut(n),i=Ut(t);if(i[0]<r[0]){Ae(`The current engine version (${t}) has a lower major version than requested (${n}); skipping`);return}i[0]>r[0]?Ae(`The current engine version (${t}) has a higher major version than requested (${n}); running code but you may encounter problems`):(i[1]<r[1]&&Ae(`The current engine version (${t}) has a lower minor version than requested (${n}); running code but you may encounter problems`),i[1]===r[1]&&i[2]<r[2]&&Ae(`The current engine version (${t}) has a lower patch version than requested (${n}); running code but you may encounter problems`)),e()},log:Xt,state:Zi,story:Gi,template:na,warn:Qt}}function la(n,e,t,r){return(n/=r/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e}function Bn(n,e,t){const r=n.volume,i=e-r;let s,a=0;return n.volume===e?Promise.resolve():new Promise(l=>window.requestAnimationFrame(o=>{function u(c){a+=c-s,n.volume=la(a,r,i,t),a<t?(s=c,window.requestAnimationFrame(u)):l()}s=o,window.requestAnimationFrame(u)}))}const{log:Xe}=F("sound"),S={};function Ve(n,e,t){S[n]?(S[n].setAttribute("src",e),t?S[n].setAttribute("preload","auto"):S[n].removeAttribute("preload"),Xe(`Updated <audio> element in sound bank for "${n}" to use ${e}`)):(S[n]=document.createElement("audio"),S[n].setAttribute("src",e),t&&S[n].setAttribute("preload","auto"),Xe(`Added new <audio> element to sound bank for "${n}" for ${e}`))}async function Le(n,e=!1,t=0){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);return Xe(`Playing sound "${n}" (looping: ${e})`),t>0&&(S[n].volume=0,Bn(S[n],1,t)),e?(S[n].loop=!0,S[n].play()):(S[n].loop=!1,new Promise((r,i)=>{try{S[n].addEventListener("ended",function s(){S[n].removeEventListener("ended",s),r()}),S[n].play().catch(s=>i(s))}catch(s){i(s)}}))}function Vt(n,e=0){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);if(e<=0)S[n].pause(),S[n].currentTime=0;else{const t=S[n].volume;Bn(S[n],0,e).then(()=>{S[n].pause(),S[n].volume=t,S[n].currentTime=0})}}function Wt(n,e){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);S[n].muted=e}function We(n,e){if(!S[n])throw new Error(`There is no sound loaded named ${n}.`);if(e<0||e>1)throw new Error("A sound volume must be between 0 and 1.");S[n].volume=e}const{warn:Zt}=F("sound");function ca(){ie({"sound.mute":!1,"sound.volume":1,"sound.transitionDuration":"1s"}),window.addEventListener("state-change",({detail:n})=>{const{name:e,value:t}=n,r=["sound","sound.ambient"].includes(e),i=["sound","sound.effect"].includes(e);if(r){const a=p("sound.ambient");if(typeof a=="object"&&a){const l=a;for(const o in l)typeof l[o].url=="string"&&Ve(o,l[o].url,!1),typeof l[o].volume=="number"&&We(o,l[o].volume),"muted"in l[o]&&Wt(o,!!l[o].muted),l[o].playing===!0&&Le(o,!0).catch(u=>Zt(`Could not resume playing ambient sound "${o}" (${u.message})`))}}if(i){const a=p("sound.effect");if(typeof a=="object"&&a){const l=a;for(const o in l)typeof l[o].url=="string"&&Ve(o,l[o].url,!0),typeof l[o].volume=="number"&&We(o,l[o].volume),"muted"in l[o]&&Wt(o,!!l[o].muted),l[o].playing&&Le(o,!1).then(()=>$(`sound.effect.${o}.playing`,!1)).catch(u=>Zt(`Could not resume playing sound effect "${o}" (${u.message}`))}}if(r||i)return;const s=/^sound\.(ambient|effect)\.(.+?)\.(.+)$/i.exec(e);if(s)switch(s[3].toLowerCase()){case"playing":{let a="0s";typeof p(`${s[2]}.transitionDuration`)=="string"&&(a=p(`${s[2]}.transitionDuration`)),typeof p("sound.transitionDuration")=="string"&&(a=p("sound.transitionDuration")),t?s[1]==="ambient"?Le(s[2],!0,Ie(a,"ms")):Le(s[2],!1).then(()=>$(e,!1)):s[1]==="ambient"?Vt(s[2],Ie(a,"ms")):Vt(s[2]);break}case"url":Ve(s[2],t,s[1]==="effect");break;case"volume":We(s[2],t);break}})}function ua(){_("browser.darkSystemTheme",()=>!!(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)),_("browser.darkTheme",()=>{if(!p("config.style.page.theme.enableSwitching"))return!1;switch(p("config.style.page.theme.override")){case"dark":return!0;case"light":return!1;default:return p("browser.darkSystemTheme")}}),_("browser.height",()=>window.innerHeight),_("browser.online",()=>window.navigator.onLine),_("browser.width",()=>window.innerWidth)}const da="2.3.0";function fa(){_("engine.version",()=>da)}function ha(){_("now.datestamp",()=>new Date().toLocaleDateString(navigator.language)),_("now.second",()=>new Date().getSeconds()),_("now.minute",()=>new Date().getMinutes()),_("now.hour",()=>new Date().getHours()),_("now.day",()=>new Date().getDate()),_("now.weekday",()=>new Date().getDay()+1),_("now.weekdayName",()=>new Date().toLocaleString(navigator.language,{weekday:"long"})),_("now.month",()=>new Date().getMonth()+1),_("now.monthName",()=>new Date().toLocaleString(navigator.language,{month:"long"})),_("now.year",()=>new Date().getFullYear()),_("now.timestamp",()=>new Date().toLocaleString(navigator.language,{hour:"numeric",minute:"numeric",second:"numeric"}))}const{warn:Ze}=F("lookups");let Gt;function pa(){_("passage.from",()=>{const n=p("trail");if(!Array.isArray(n)){Ze(`The trail variable has been set to a ${typeof n}, not an array.`);return}if(n.length>1)return n[n.length-2]}),window.addEventListener("passage-navigate",n=>{n.target&&(Gt=n.target.innerText)}),_("passage.fromText",()=>Gt),_("passage.name",()=>{const n=p("trail");if(!Array.isArray(n)){Ze(`The trail variable has been set to a ${typeof n}, not an array.`);return}return n[n.length-1]}),_("passage.visits",()=>{const n=p("trail"),e=p("passage.name");return Array.isArray(n)?n.reduce((t,r)=>r===e?t+1:t,0):(Ze(`The trail variable has been set to a ${typeof n}, not an array.`),0)})}var Qe={},ga={get exports(){return Qe},set exports(n){Qe=n}};(function(n){(function(e,t,r){function i(o){var u=this,c=l();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(o),u.s0<0&&(u.s0+=1),u.s1-=c(o),u.s1<0&&(u.s1+=1),u.s2-=c(o),u.s2<0&&(u.s2+=1),c=null}function s(o,u){return u.c=o.c,u.s0=o.s0,u.s1=o.s1,u.s2=o.s2,u}function a(o,u){var c=new i(o),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,c),f.state=function(){return s(c,{})}),f}function l(){var o=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){o+=c.charCodeAt(d);var f=.02519603282416938*o;o=f>>>0,f-=o,f*=o,o=f>>>0,f-=o,o+=f*4294967296}return(o>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(se,n,!1)})(ga);var Ke={},ma={get exports(){return Ke},set exports(n){Ke=n}};(function(n){(function(e,t,r){function i(l){var o=this,u="";o.x=0,o.y=0,o.z=0,o.w=0,o.next=function(){var d=o.x^o.x<<11;return o.x=o.y,o.y=o.z,o.z=o.w,o.w^=o.w>>>19^d^d>>>8},l===(l|0)?o.x=l:u+=l;for(var c=0;c<u.length+64;c++)o.x^=u.charCodeAt(c)|0,o.next()}function s(l,o){return o.x=l.x,o.y=l.y,o.z=l.z,o.w=l.w,o}function a(l,o){var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(se,n,!1)})(ma);var Ye={},ba={get exports(){return Ye},set exports(n){Ye=n}};(function(n){(function(e,t,r){function i(l){var o=this,u="";o.next=function(){var d=o.x^o.x>>>2;return o.x=o.y,o.y=o.z,o.z=o.w,o.w=o.v,(o.d=o.d+362437|0)+(o.v=o.v^o.v<<4^(d^d<<1))|0},o.x=0,o.y=0,o.z=0,o.w=0,o.v=0,l===(l|0)?o.x=l:u+=l;for(var c=0;c<u.length+64;c++)o.x^=u.charCodeAt(c)|0,c==u.length&&(o.d=o.x<<10^o.x>>>4),o.next()}function s(l,o){return o.x=l.x,o.y=l.y,o.z=l.z,o.w=l.w,o.v=l.v,o.d=l.d,o}function a(l,o){var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(se,n,!1)})(ba);var et={},ya={get exports(){return et},set exports(n){et=n}};(function(n){(function(e,t,r){function i(l){var o=this;o.next=function(){var c=o.x,d=o.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,o.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(o,l)}function s(l,o){return o.x=l.x.slice(),o.i=l.i,o}function a(l,o){l==null&&(l=+new Date);var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.x&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(se,n,!1)})(ya);var tt={},wa={get exports(){return tt},set exports(n){tt=n}};(function(n){(function(e,t,r){function i(l){var o=this;o.next=function(){var c=o.w,d=o.X,f=o.i,h,m;return o.w=c=c+1640531527|0,m=d[f+34&127],h=d[f=f+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=d[f]=m^h,o.i=f,m+(c^c>>>16)|0};function u(c,d){var f,h,m,v,O,x=[],A=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,A=Math.max(A,d.length)),m=0,v=-32;v<A;++v)d&&(h^=d.charCodeAt((v+32)%d.length)),v===0&&(O=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(O=O+1640531527|0,f=x[v&127]^=h+O,m=f==0?m+1:0);for(m>=128&&(x[(d&&d.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=x[m+34&127],f=x[m=m+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,x[m]=h^f;c.w=O,c.X=x,c.i=m}u(o,l)}function s(l,o){return o.i=l.i,o.w=l.w,o.X=l.X.slice(),o}function a(l,o){l==null&&(l=+new Date);var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(c.X&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(se,n,!1)})(wa);var nt={},ka={get exports(){return nt},set exports(n){nt=n}};(function(n){(function(e,t,r){function i(l){var o=this,u="";o.next=function(){var d=o.b,f=o.c,h=o.d,m=o.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^m,m=m-d|0,o.b=d=d<<20^d>>>12^f,o.c=f=f-h|0,o.d=h<<16^f>>>16^m,o.a=m-d|0},o.a=0,o.b=0,o.c=-1640531527,o.d=1367130551,l===Math.floor(l)?(o.a=l/4294967296|0,o.b=l|0):u+=l;for(var c=0;c<u.length+20;c++)o.b^=u.charCodeAt(c)|0,o.next()}function s(l,o){return o.a=l.a,o.b=l.b,o.c=l.c,o.d=l.d,o}function a(l,o){var u=new i(l),c=o&&o.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,m=(f+h)/(1<<21);while(m===0);return m},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&s(c,u),d.state=function(){return s(u,{})}),d}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(se,n,!1)})(ka);var rt={},xa={get exports(){return rt},set exports(n){rt=n}};const va={},$a=Object.freeze(Object.defineProperty({__proto__:null,default:va},Symbol.toStringTag,{value:"Module"})),Sa=zs($a);(function(n){(function(e,t,r){var i=256,s=6,a=52,l="random",o=r.pow(i,s),u=r.pow(2,a),c=u*2,d=i-1,f;function h(w,k,T){var C=[];k=k==!0?{entropy:!0}:k||{};var L=x(O(k.entropy?[w,M(t)]:w??A(),3),C),D=new m(C),q=function(){for(var j=D.g(s),W=o,B=0;j<u;)j=(j+B)*i,W*=i,B=D.g(1);for(;j>=c;)j/=2,W/=2,B>>>=1;return(j+B)/W};return q.int32=function(){return D.g(4)|0},q.quick=function(){return D.g(4)/4294967296},q.double=q,x(M(D.S),t),(k.pass||T||function(j,W,B,G){return G&&(G.S&&v(G,D),j.state=function(){return v(D,{})}),B?(r[l]=j,W):j})(q,L,"global"in k?k.global:this==r,k.state)}function m(w){var k,T=w.length,C=this,L=0,D=C.i=C.j=0,q=C.S=[];for(T||(w=[T++]);L<i;)q[L]=L++;for(L=0;L<i;L++)q[L]=q[D=d&D+w[L%T]+(k=q[L])],q[D]=k;(C.g=function(j){for(var W,B=0,G=C.i,_e=C.j,he=C.S;j--;)W=he[G=d&G+1],B=B*i+he[d&(he[G]=he[_e=d&_e+W])+(he[_e]=W)];return C.i=G,C.j=_e,B})(i)}function v(w,k){return k.i=w.i,k.j=w.j,k.S=w.S.slice(),k}function O(w,k){var T=[],C=typeof w,L;if(k&&C=="object")for(L in w)try{T.push(O(w[L],k-1))}catch{}return T.length?T:C=="string"?w:w+"\0"}function x(w,k){for(var T=w+"",C,L=0;L<T.length;)k[d&L]=d&(C^=k[d&L]*19)+T.charCodeAt(L++);return M(k)}function A(){try{var w;return f&&(w=f.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),M(w)}catch{var k=e.navigator,T=k&&k.plugins;return[+new Date,e,T,e.screen,M(t)]}}function M(w){return String.fromCharCode.apply(0,w)}if(x(r.random(),t),n.exports){n.exports=h;try{f=Sa}catch{}}else r["seed"+l]=h})(typeof self<"u"?self:se,[],Math)})(xa);var Ea=Qe,_a=Ke,Ta=Ye,Ca=et,Aa=tt,La=nt,ae=rt;ae.alea=Ea;ae.xor128=_a;ae.xorwow=Ta;ae.xorshift7=Ca;ae.xor4096=Aa;ae.tychei=La;var Un=ae;const Vn=Date.now().toString();let ye=Un(Vn,{state:!0});const Ge=hn(()=>{$("config.random.privateState",ye.state())});function za(){ie({"config.random.privateState":null,"config.random.seed":Vn}),window.addEventListener("state-change",({detail:n})=>{n.name==="config.random.seed"&&(ye=Un(n.value,{state:!0}))}),_("random.coinFlip",()=>{const n=ye();return Ge(),n>.5}),_("random.fraction",()=>{const n=ye();return Ge(),n});for(const n of[4,5,6,8,10,12,20,25,50,100,1e3])_(`random.d${n}`,()=>{const e=1+Math.round(ye()*(n-1));return Ge(),e})}function Pa(){_("story.name",ht)}function Oa(){ua(),fa(),ha(),pa(),za(),Pa()}function Ia(){const n=document.querySelectorAll("tw-storydata");if(n.length===0){console.warn("No <tw-storydata> element was found in HTML.");return}n.length>1&&console.warn("Multiple <tw-storydata> elements were found in HTML. Using the first."),ln(n[0]),aa(),gn(),Object.assign(window,{go:xn,restart:vn}),Qn(),ie(Gn),oa(),Hs(),Fn(),Oa(),ca(),cn(),p("config.testing")?_s():bn()&&yn(),dn(),un()}Ia();

</script><style>
:root{--font-monospace: ui-monospace, Menlo, Monaco, "Cascadia Mono", "Segoe UI Mono", "Roboto Mono", "Oxygen Mono", "Ubuntu Monospace", "Source Code Pro", "Fira Mono", "Droid Sans Mono", "Courier New", monospace;--font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif}*{box-sizing:border-box}body{margin:0;padding:0}code{font-family:var(--font-monospace)}img{max-width:100%;height:auto}input[type=text],select{padding:.25em}noscript{align-items:center;background:black;color:#fff;display:flex;height:100vh;font-family:var(--font-system);justify-content:center;width:100vw}pre{font-family:var(--font-monospace);white-space:pre-wrap}tw-storydata{display:none}body.backstage-visible #backdrop{max-width:67vw}backstage-sidebar{--backstage-grid: 10px;background:var(--color-gray-2);border-left:1px solid var(--color-gray-3);bottom:0;color:var(--color-gray-5);display:block;font-family:var(--font-system);font-size:13px;position:fixed;top:0;right:0;width:33vw}backstage-sidebar .content{overflow:auto;padding:var(--backstage-grid);height:100%;width:100%}backstage-sidebar[collapsed]{width:0}backstage-sidebar button[data-toggle-collapsed]{background:var(--color-gray-2);border-bottom:1px solid var(--color-gray-3);border-left:1px solid var(--color-gray-3);border-right:none;border-top:1px solid var(--color-gray-3);border-radius:60px 0 0 60px;color:var(--color-gray-5);font-size:20px;height:60px;min-width:30px;padding:0;position:absolute;top:50%;left:-30px;transform:translateY(-50%);width:30px}backstage-sidebar button[data-toggle-collapsed]:hover{background:var(--color-gray-1);cursor:pointer}backstage-sidebar button{background:var(--color-gray-1);border:1px solid var(--color-gray-3);border-radius:var(--backstage-grid);color:var(--color-gray-5);cursor:pointer;font-size:100%;min-width:40px;padding:calc(var(--backstage-grid) / 2)}backstage-sidebar button:disabled{color:var(--color-gray-3);cursor:not-allowed}backstage-sidebar button:not(:disabled):hover{background:white}backstage-sidebar details summary{cursor:pointer;font-size:110%;font-variant:small-caps;padding:calc(var(--backstage-grid) / 2) 0;text-transform:lowercase}backstage-sidebar input,backstage-sidebar textarea{background:var(--color-gray-1);border:1px solid var(--color-gray-3);color:var(--color-gray-5);font:100% var(--font-system);padding:calc(var(--backstage-grid) / 2)}backstage-sidebar table{max-width:100%;width:100%}backstage-history-table button{display:block;width:100%}backstage-history-table table{border-collapse:collapse;margin:var(--backstage-grid) 0;table-layout:fixed}backstage-history-table thead{height:1px;left:-10000px;overflow:hidden;position:absolute;top:auto;width:1px}backstage-history-table tr:not(:last-child){border-bottom:1px solid var(--oc-gray-8)}backstage-history-table td{text-overflow:ellipsis;overflow-wrap:break-word;padding:calc(var(--backstage-grid) / 2);vertical-align:top}backstage-history-table td:first-child{border-right:1px solid var(--oc-gray-8);width:45%}backstage-notes label{display:block;margin-top:var(--backstage-grid)}backstage-notes textarea{height:10em;margin:var(--backstage-grid) 0;width:100%}backstage-notes .actions{display:flex;gap:var(--backstage-grid)}backstage-notes .actions button{flex-grow:1}backstage-state-snapshots button[data-add-snapshot]{width:100%}backstage-state-snapshots .snapshot-button{display:flex;margin-bottom:var(--backstage-grid)}backstage-state-snapshots .snapshot-button [data-restore]{flex-grow:1;border-right-color:var(--oc-gray-4);border-bottom-right-radius:0;border-top-right-radius:0}backstage-state-snapshots .snapshot-button [data-remove]{border-left:none;border-bottom-left-radius:0;border-top-left-radius:0}backstage-state-variables .variables{display:flex;flex-direction:column;gap:calc(var(--backstage-grid) / 2);margin:calc(var(--backstage-grid)) 0}backstage-state-variables .variables label{align-items:center;display:grid;gap:var(--backstage-grid);grid-template-columns:15em 1fr}backstage-style-config textarea{height:10em;margin:var(--backstage-grid) 0;width:100%}backstage-style-group label{display:grid;gap:.25em;margin-bottom:.5em}backstage-style-theme p{margin:0 0 .5em}backstage-tab{border-left:1px solid var(--color-gray-3);cursor:pointer;flex-grow:1;padding:calc(var(--backstage-grid) / 2);text-align:center}backstage-tab:hover{background:white}backstage-tab:first-child{border-left:none;border-bottom-left-radius:var(--backstage-grid);border-top-left-radius:var(--backstage-grid)}backstage-tab:last-child{border-bottom-right-radius:var(--backstage-grid);border-top-right-radius:var(--backstage-grid)}backstage-tab[aria-selected=true]{background-color:#fff;cursor:default;font-weight:700}backstage-tab-panel{display:block;padding:calc(var(--backstage-grid) / 2) 0}backstage-tab-panel[hidden]{display:none}backstage-tabs{background:var(--color-gray-1);border:1px solid var(--color-gray-3);border-radius:var(--backstage-grid);display:flex}backstage-variable-input input{display:inline-block;width:100%}#backdrop{align-items:center;background-color:var(--backdrop-color);display:flex;justify-content:center;min-height:100vh}#page>header,#page>footer{display:flex;justify-content:space-between}#page>header[hidden],#page>footer[hidden]{border:none}#page>header .center,#page>footer .center{text-align:center}#page>header .right,#page>footer .right{text-align:right}#page>footer{background-color:var(--page-footer-background-color);border-top:var(--page-footer-border);color:var(--page-footer-color);font-family:var(--page-footer-font-family);font-size:var(--page-footer-font-size);font-style:var(--page-footer-font-style);font-variant:var(--page-footer-font-variant);font-weight:var(--page-footer-font-weight);text-decoration:var(--page-footer-text-decoration);text-decoration-color:var(--page-footer-text-decoration-color);text-transform:var(--page-footer-text-transform)}#page>footer .link{background-color:var(--page-footer-link-background-color);color:var(--page-footer-link-color);font-family:var(--page-footer-link-font-family);font-size:var(--page-footer-link-font-size);font-style:var(--page-footer-link-font-style);font-variant:var(--page-footer-link-font-variant);font-weight:var(--page-footer-link-font-weight);text-decoration:var(--page-footer-link-text-decoration);text-decoration-color:var(--page-footer-link-text-decoration-color);text-transform:var(--page-footer-link-text-transform)}#page>footer .link:hover{background-color:var(--page-footer-link-active-background-color);color:var(--page-footer-link-active-color);font-family:var(--page-footer-link-active-font-family);font-size:var(--page-footer-link-active-font-size);font-style:var(--page-footer-link-active-font-style);font-variant:var(--page-footer-link-active-font-variant);font-weight:var(--page-footer-link-active-font-weight);text-decoration:var(--page-footer-link-active-text-decoration);text-decoration-color:var( --page-footer-link-active-text-decoration-color );text-transform:var(--page-footer-link-active-text-transform)}#page>header{background-color:var(--page-header-background-color);border-bottom:var(--page-header-border);color:var(--page-header-color);font-family:var(--page-header-font-family);font-size:var(--page-header-font-size);font-style:var(--page-header-font-style);font-variant:var(--page-header-font-variant);font-weight:var(--page-header-font-weight);text-decoration:var(--page-header-text-decoration);text-decoration-color:var(--page-header-text-decoration-color);text-transform:var(--page-header-text-transform)}#page>header .link{background-color:var(--page-header-link-background-color);color:var(--page-header-link-color);font-family:var(--page-header-link-font-family);font-size:var(--page-header-link-font-size);font-style:var(--page-header-link-font-style);font-variant:var(--page-header-link-font-variant);font-weight:var(--page-header-link-font-weight);text-decoration:var(--page-header-link-text-decoration);text-decoration-color:var(--page-header-link-text-decoration-color);text-transform:var(--page-header-link-text-transform)}#page>header .link:hover{background-color:var(--page-header-link-active-background-color);color:var(--page-header-link-active-color);font-family:var(--page-header-link-active-font-family);font-size:var(--page-header-link-active-font-size);font-style:var(--page-header-link-active-font-style);font-variant:var(--page-header-link-active-font-variant);font-weight:var(--page-header-link-active-font-weight);text-decoration:var(--page-header-link-active-text-decoration);text-decoration-color:var( --page-header-link-active-text-decoration-color );text-transform:var(--page-header-link-active-text-transform)}#page{background-color:var(--page-background-color);border:var(--page-border);border-radius:3px;box-shadow:var(--page-box-shadow);color:var(--page-color);display:grid;font-family:var(--page-font-family);font-size:var(--page-font-size);font-style:var(--page-font-style);font-variant:var(--page-font-variant);font-weight:var(--page-font-weight);grid-template-areas:"header" "body" "footer";grid-template-rows:min-content 1fr min-content;line-height:150%;margin:1em;max-width:calc(100vw - 2em);min-height:calc(100vh - 2em);padding:2em 4em;position:relative;text-decoration:var(--page-text-decoration);text-transform:var(--page-text-transform);width:40em}#page hr{border:none}#page hr:after{content:"* \a0* \a0*";display:block;text-align:center}#page page-skip-indicator{position:absolute;bottom:0;right:0}#page .fork p{display:flex;flex-direction:column;width:100%}#page .fork p .link{display:block;flex-grow:1;text-align:center;padding:.5em}#page .fork p .link+.link{border-top:var(--page-fork-divider-size) var(--page-fork-divider-style) var(--page-fork-divider-color)}#page .link{background-color:var(--page-link-background-color);color:var(--page-link-color);cursor:pointer;font-family:var(--page-link-font-family);font-size:var(--page-link-font-size);font-style:var(--page-link-font-style);font-variant:var(--page-link-font-variant);font-weight:var(--page-link-font-weight);text-decoration:var(--page-link-text-decoration);text-decoration-color:var(--page-link-text-decoration-color);text-transform:var(--page-link-text-transform)}#page .link:hover{background-color:var(--page-link-active-background-color);color:var(--page-link-active-color);font-family:var(--page-link-font-family);font-size:var(--page-link-font-size);font-style:var(--page-link-font-style);font-variant:var(--page-link-font-variant);font-weight:var(--page-link-font-weight);text-decoration:var(--page-link-text-decoration);text-decoration-color:var(--page-link-text-decoration-color);text-transform:var(--page-link-text-transform)}#page .small-caps{font-variant:small-caps;text-transform:lowercase}#page>footer{grid-area:footer}#page>header{grid-area:header}#page>article{display:flex;flex-direction:column;flex-grow:1;grid-area:body;justify-content:var(--page-current-passage-justify-content)}#page>error-handler{grid-area:body;position:relative;z-index:2}@media screen and (max-width: 768px){#page{margin:0;width:100vw;max-width:100vw;min-height:100vh;padding:1em}}.fade-in{opacity:0;animation:fade-in 1s ease-out forwards}.fade-out{animation:fade-in 1s ease-out reverse forwards}@keyframes fade-in{0%{opacity:0}to{opacity:1}}error-handler{display:none}error-handler.active{background:var(--color-red-1);color:var(--color-red-5);display:block;font-family:var(--font-system);font-size:max(90%,16px);padding:.5em;border-left:4px solid var(--color-red-2);position:relative;margin:1em 0;overflow:auto}error-handler pre{font-size:90%}error-handler a{color:var(--color-red-4)}error-handler button{appearance:none;background:none;border:none;color:var(--color-red-4);cursor:pointer;padding:0}external-fonts{display:none}page-skip{display:block}page-skip-indicator{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%09%3crect width='38' height='72' x='31' y='14' fill='%23fff' rx='4' /%3e%09%3ccircle cx='50' cy='50' r='28' fill='%23fff' /%3e%09%3crect%09%09width='30'%09%09height='64'%09%09x='35'%09%09y='18'%09%09fill='%23fff'%09%09stroke='%23000'%09%09stroke-width='2'%09%09rx='4'%09/%3e%09%3ccircle%09%09cx='50'%09%09cy='50'%09%09r='20'%09%09fill='%23fff'%09%09stroke='%23000'%09%09stroke-width='2'%09/%3e%09%3cpath%09%09stroke='%23000'%09%09stroke-linecap='round'%09%09stroke-width='2'%09%09d='M50 50V37'%09%3e%09%09%3canimateTransform%09%09%09attributeName='transform'%09%09%09begin='0s'%09%09%09dur='20s'%09%09%09from='0 50 50'%09%09%09repeatCount='indefinite'%09%09%09to='360 50 50'%09%09%09type='rotate'%09%09/%3e%09%3c/path%3e%09%3cpath%09%09stroke='%23000'%09%09stroke-linecap='round'%09%09stroke-width='2'%09%09d='M50 50h-8'%09%3e%09%09%3canimateTransform%09%09%09attributeName='transform'%09%09%09begin='0s'%09%09%09dur='120s'%09%09%09from='0 50 50'%09%09%09repeatCount='indefinite'%09%09%09to='360 50 50'%09%09%09type='rotate'%09%09/%3e%09%3c/path%3e%3c/svg%3e");background-size:contain;display:block;height:50px;opacity:0;pointer-events:none;transition:opacity .3s;width:50px}page-skip-indicator[active]{opacity:1}::view-transition-old(root),::view-transition-new(root){animation-duration:var(--page-transition-duration)}page-transition{display:block}:root{--oc-white: #ffffff;--oc-white-rgb: 255, 255, 255;--oc-black: #000000;--oc-black-rgb: 0, 0, 0;--oc-gray-0: #f8f9fa;--oc-gray-0-rgb: 248, 249, 250;--oc-gray-1: #f1f3f5;--oc-gray-1-rgb: 241, 243, 245;--oc-gray-2: #e9ecef;--oc-gray-2-rgb: 233, 236, 239;--oc-gray-3: #dee2e6;--oc-gray-3-rgb: 222, 226, 230;--oc-gray-4: #ced4da;--oc-gray-4-rgb: 206, 212, 218;--oc-gray-5: #adb5bd;--oc-gray-5-rgb: 173, 181, 189;--oc-gray-6: #868e96;--oc-gray-6-rgb: 134, 142, 150;--oc-gray-7: #495057;--oc-gray-7-rgb: 73, 80, 87;--oc-gray-8: #343a40;--oc-gray-8-rgb: 52, 58, 64;--oc-gray-9: #212529;--oc-gray-9-rgb: 33, 37, 41;--oc-red-0: #fff5f5;--oc-red-0-rgb: 255, 245, 245;--oc-red-1: #ffe3e3;--oc-red-1-rgb: 255, 227, 227;--oc-red-2: #ffc9c9;--oc-red-2-rgb: 255, 201, 201;--oc-red-3: #ffa8a8;--oc-red-3-rgb: 255, 168, 168;--oc-red-4: #ff8787;--oc-red-4-rgb: 255, 135, 135;--oc-red-5: #ff6b6b;--oc-red-5-rgb: 255, 107, 107;--oc-red-6: #fa5252;--oc-red-6-rgb: 250, 82, 82;--oc-red-7: #f03e3e;--oc-red-7-rgb: 240, 62, 62;--oc-red-8: #e03131;--oc-red-8-rgb: 224, 49, 49;--oc-red-9: #c92a2a;--oc-red-9-rgb: 201, 42, 42;--oc-pink-0: #fff0f6;--oc-pink-0-rgb: 255, 240, 246;--oc-pink-1: #ffdeeb;--oc-pink-1-rgb: 255, 222, 235;--oc-pink-2: #fcc2d7;--oc-pink-2-rgb: 252, 194, 215;--oc-pink-3: #faa2c1;--oc-pink-3-rgb: 250, 162, 193;--oc-pink-4: #f783ac;--oc-pink-4-rgb: 247, 131, 172;--oc-pink-5: #f06595;--oc-pink-5-rgb: 240, 101, 149;--oc-pink-6: #e64980;--oc-pink-6-rgb: 230, 73, 128;--oc-pink-7: #d6336c;--oc-pink-7-rgb: 214, 51, 108;--oc-pink-8: #c2255c;--oc-pink-8-rgb: 194, 37, 92;--oc-pink-9: #a61e4d;--oc-pink-9-rgb: 166, 30, 77;--oc-grape-0: #f8f0fc;--oc-grape-0-rgb: 248, 240, 252;--oc-grape-1: #f3d9fa;--oc-grape-1-rgb: 243, 217, 250;--oc-grape-2: #eebefa;--oc-grape-2-rgb: 238, 190, 250;--oc-grape-3: #e599f7;--oc-grape-3-rgb: 229, 153, 247;--oc-grape-4: #da77f2;--oc-grape-4-rgb: 218, 119, 242;--oc-grape-5: #cc5de8;--oc-grape-5-rgb: 204, 93, 232;--oc-grape-6: #be4bdb;--oc-grape-6-rgb: 190, 75, 219;--oc-grape-7: #ae3ec9;--oc-grape-7-rgb: 174, 62, 201;--oc-grape-8: #9c36b5;--oc-grape-8-rgb: 156, 54, 181;--oc-grape-9: #862e9c;--oc-grape-9-rgb: 134, 46, 156;--oc-violet-0: #f3f0ff;--oc-violet-0-rgb: 243, 240, 255;--oc-violet-1: #e5dbff;--oc-violet-1-rgb: 229, 219, 255;--oc-violet-2: #d0bfff;--oc-violet-2-rgb: 208, 191, 255;--oc-violet-3: #b197fc;--oc-violet-3-rgb: 177, 151, 252;--oc-violet-4: #9775fa;--oc-violet-4-rgb: 151, 117, 250;--oc-violet-5: #845ef7;--oc-violet-5-rgb: 132, 94, 247;--oc-violet-6: #7950f2;--oc-violet-6-rgb: 121, 80, 242;--oc-violet-7: #7048e8;--oc-violet-7-rgb: 112, 72, 232;--oc-violet-8: #6741d9;--oc-violet-8-rgb: 103, 65, 217;--oc-violet-9: #5f3dc4;--oc-violet-9-rgb: 95, 61, 196;--oc-indigo-0: #edf2ff;--oc-indigo-0-rgb: 237, 242, 255;--oc-indigo-1: #dbe4ff;--oc-indigo-1-rgb: 219, 228, 255;--oc-indigo-2: #bac8ff;--oc-indigo-2-rgb: 186, 200, 255;--oc-indigo-3: #91a7ff;--oc-indigo-3-rgb: 145, 167, 255;--oc-indigo-4: #748ffc;--oc-indigo-4-rgb: 116, 143, 252;--oc-indigo-5: #5c7cfa;--oc-indigo-5-rgb: 92, 124, 250;--oc-indigo-6: #4c6ef5;--oc-indigo-6-rgb: 76, 110, 245;--oc-indigo-7: #4263eb;--oc-indigo-7-rgb: 66, 99, 235;--oc-indigo-8: #3b5bdb;--oc-indigo-8-rgb: 59, 91, 219;--oc-indigo-9: #364fc7;--oc-indigo-9-rgb: 54, 79, 199;--oc-blue-0: #e7f5ff;--oc-blue-0-rgb: 231, 245, 255;--oc-blue-1: #d0ebff;--oc-blue-1-rgb: 208, 235, 255;--oc-blue-2: #a5d8ff;--oc-blue-2-rgb: 165, 216, 255;--oc-blue-3: #74c0fc;--oc-blue-3-rgb: 116, 192, 252;--oc-blue-4: #4dabf7;--oc-blue-4-rgb: 77, 171, 247;--oc-blue-5: #339af0;--oc-blue-5-rgb: 51, 154, 240;--oc-blue-6: #228be6;--oc-blue-6-rgb: 34, 139, 230;--oc-blue-7: #1c7ed6;--oc-blue-7-rgb: 28, 126, 214;--oc-blue-8: #1971c2;--oc-blue-8-rgb: 25, 113, 194;--oc-blue-9: #1864ab;--oc-blue-9-rgb: 24, 100, 171;--oc-cyan-0: #e3fafc;--oc-cyan-0-rgb: 227, 250, 252;--oc-cyan-1: #c5f6fa;--oc-cyan-1-rgb: 197, 246, 250;--oc-cyan-2: #99e9f2;--oc-cyan-2-rgb: 153, 233, 242;--oc-cyan-3: #66d9e8;--oc-cyan-3-rgb: 102, 217, 232;--oc-cyan-4: #3bc9db;--oc-cyan-4-rgb: 59, 201, 219;--oc-cyan-5: #22b8cf;--oc-cyan-5-rgb: 34, 184, 207;--oc-cyan-6: #15aabf;--oc-cyan-6-rgb: 21, 170, 191;--oc-cyan-7: #1098ad;--oc-cyan-7-rgb: 16, 152, 173;--oc-cyan-8: #0c8599;--oc-cyan-8-rgb: 12, 133, 153;--oc-cyan-9: #0b7285;--oc-cyan-9-rgb: 11, 114, 133;--oc-teal-0: #e6fcf5;--oc-teal-0-rgb: 230, 252, 245;--oc-teal-1: #c3fae8;--oc-teal-1-rgb: 195, 250, 232;--oc-teal-2: #96f2d7;--oc-teal-2-rgb: 150, 242, 215;--oc-teal-3: #63e6be;--oc-teal-3-rgb: 99, 230, 190;--oc-teal-4: #38d9a9;--oc-teal-4-rgb: 56, 217, 169;--oc-teal-5: #20c997;--oc-teal-5-rgb: 32, 201, 151;--oc-teal-6: #12b886;--oc-teal-6-rgb: 18, 184, 134;--oc-teal-7: #0ca678;--oc-teal-7-rgb: 12, 166, 120;--oc-teal-8: #099268;--oc-teal-8-rgb: 9, 146, 104;--oc-teal-9: #087f5b;--oc-teal-9-rgb: 8, 127, 91;--oc-green-0: #ebfbee;--oc-green-0-rgb: 235, 251, 238;--oc-green-1: #d3f9d8;--oc-green-1-rgb: 211, 249, 216;--oc-green-2: #b2f2bb;--oc-green-2-rgb: 178, 242, 187;--oc-green-3: #8ce99a;--oc-green-3-rgb: 140, 233, 154;--oc-green-4: #69db7c;--oc-green-4-rgb: 105, 219, 124;--oc-green-5: #51cf66;--oc-green-5-rgb: 81, 207, 102;--oc-green-6: #40c057;--oc-green-6-rgb: 64, 192, 87;--oc-green-7: #37b24d;--oc-green-7-rgb: 55, 178, 77;--oc-green-8: #2f9e44;--oc-green-8-rgb: 47, 158, 68;--oc-green-9: #2b8a3e;--oc-green-9-rgb: 43, 138, 62;--oc-lime-0: #f4fce3;--oc-lime-0-rgb: 244, 252, 227;--oc-lime-1: #e9fac8;--oc-lime-1-rgb: 233, 250, 200;--oc-lime-2: #d8f5a2;--oc-lime-2-rgb: 216, 245, 162;--oc-lime-3: #c0eb75;--oc-lime-3-rgb: 192, 235, 117;--oc-lime-4: #a9e34b;--oc-lime-4-rgb: 169, 227, 75;--oc-lime-5: #94d82d;--oc-lime-5-rgb: 148, 216, 45;--oc-lime-6: #82c91e;--oc-lime-6-rgb: 130, 201, 30;--oc-lime-7: #74b816;--oc-lime-7-rgb: 116, 184, 22;--oc-lime-8: #66a80f;--oc-lime-8-rgb: 102, 168, 15;--oc-lime-9: #5c940d;--oc-lime-9-rgb: 92, 148, 13;--oc-yellow-0: #fff9db;--oc-yellow-0-rgb: 255, 249, 219;--oc-yellow-1: #fff3bf;--oc-yellow-1-rgb: 255, 243, 191;--oc-yellow-2: #ffec99;--oc-yellow-2-rgb: 255, 236, 153;--oc-yellow-3: #ffe066;--oc-yellow-3-rgb: 255, 224, 102;--oc-yellow-4: #ffd43b;--oc-yellow-4-rgb: 255, 212, 59;--oc-yellow-5: #fcc419;--oc-yellow-5-rgb: 252, 196, 25;--oc-yellow-6: #fab005;--oc-yellow-6-rgb: 250, 176, 5;--oc-yellow-7: #f59f00;--oc-yellow-7-rgb: 245, 159, 0;--oc-yellow-8: #f08c00;--oc-yellow-8-rgb: 240, 140, 0;--oc-yellow-9: #e67700;--oc-yellow-9-rgb: 230, 119, 0;--oc-orange-0: #fff4e6;--oc-orange-0-rgb: 255, 244, 230;--oc-orange-1: #ffe8cc;--oc-orange-1-rgb: 255, 232, 204;--oc-orange-2: #ffd8a8;--oc-orange-2-rgb: 255, 216, 168;--oc-orange-3: #ffc078;--oc-orange-3-rgb: 255, 192, 120;--oc-orange-4: #ffa94d;--oc-orange-4-rgb: 255, 169, 77;--oc-orange-5: #ff922b;--oc-orange-5-rgb: 255, 146, 43;--oc-orange-6: #fd7e14;--oc-orange-6-rgb: 253, 126, 20;--oc-orange-7: #f76707;--oc-orange-7-rgb: 247, 103, 7;--oc-orange-8: #e8590c;--oc-orange-8-rgb: 232, 89, 12;--oc-orange-9: #d9480f;--oc-orange-9-rgb: 217, 72, 15}/*! reasonable colors v0.4.0 | MIT License | https://github.com/matthewhowell/reasonable-colors */:root{--color-gray-1: #f6f6f6;--color-gray-2: #e2e2e2;--color-gray-3: #8b8b8b;--color-gray-4: #6f6f6f;--color-gray-5: #3e3e3e;--color-gray-6: #222222;--color-rose-1: #fff7f9;--color-rose-2: #ffdce5;--color-rose-3: #ff3b8d;--color-rose-4: #db0072;--color-rose-5: #800040;--color-rose-6: #4c0023;--color-raspberry-1: #fff8f8;--color-raspberry-2: #ffdddf;--color-raspberry-3: #ff426c;--color-raspberry-4: #de0051;--color-raspberry-5: #82002c;--color-raspberry-6: #510018;--color-red-1: #fff8f6;--color-red-2: #ffddd8;--color-red-3: #ff4647;--color-red-4: #e0002b;--color-red-5: #830014;--color-red-6: #530003;--color-orange-1: #fff8f5;--color-orange-2: #ffded1;--color-orange-3: #fd4d00;--color-orange-4: #cd3c00;--color-orange-5: #752100;--color-orange-6: #401600;--color-cinnamon-1: #fff8f3;--color-cinnamon-2: #ffdfc6;--color-cinnamon-3: #d57300;--color-cinnamon-4: #ac5c00;--color-cinnamon-5: #633300;--color-cinnamon-6: #371d00;--color-amber-1: #fff8ef;--color-amber-2: #ffe0b2;--color-amber-3: #b98300;--color-amber-4: #926700;--color-amber-5: #523800;--color-amber-6: #302100;--color-yellow-1: #fff9e5;--color-yellow-2: #ffe53e;--color-yellow-3: #9c8b00;--color-yellow-4: #7d6f00;--color-yellow-5: #463d00;--color-yellow-6: #292300;--color-lime-1: #f7ffac;--color-lime-2: #d5f200;--color-lime-3: #819300;--color-lime-4: #677600;--color-lime-5: #394100;--color-lime-6: #222600;--color-chartreuse-1: #e5ffc3;--color-chartreuse-2: #98fb00;--color-chartreuse-3: #5c9b00;--color-chartreuse-4: #497c00;--color-chartreuse-5: #264500;--color-chartreuse-6: #182600;--color-green-1: #e0ffd9;--color-green-2: #72ff6c;--color-green-3: #00a21f;--color-green-4: #008217;--color-green-5: #004908;--color-green-6: #062800;--color-emerald-1: #dcffe6;--color-emerald-2: #5dffa2;--color-emerald-3: #00a05a;--color-emerald-4: #008147;--color-emerald-5: #004825;--color-emerald-6: #002812;--color-aquamarine-1: #daffef;--color-aquamarine-2: #42ffc6;--color-aquamarine-3: #009f78;--color-aquamarine-4: #007f5f;--color-aquamarine-5: #004734;--color-aquamarine-6: #00281b;--color-teal-1: #d7fff7;--color-teal-2: #00ffe4;--color-teal-3: #009e8c;--color-teal-4: #007c6e;--color-teal-5: #00443c;--color-teal-6: #002722;--color-cyan-1: #c4fffe;--color-cyan-2: #00fafb;--color-cyan-3: #00999a;--color-cyan-4: #007a7b;--color-cyan-5: #004344;--color-cyan-6: #002525;--color-powder-1: #dafaff;--color-powder-2: #8df0ff;--color-powder-3: #0098a9;--color-powder-4: #007987;--color-powder-5: #004048;--color-powder-6: #002227;--color-sky-1: #e3f7ff;--color-sky-2: #aee9ff;--color-sky-3: #0094b4;--color-sky-4: #007590;--color-sky-5: #00404f;--color-sky-6: #001f28;--color-cerulean-1: #e8f6ff;--color-cerulean-2: #b9e3ff;--color-cerulean-3: #0092c5;--color-cerulean-4: #00749d;--color-cerulean-5: #003c54;--color-cerulean-6: #001d2a;--color-azure-1: #e8f2ff;--color-azure-2: #c6e0ff;--color-azure-3: #008fdb;--color-azure-4: #0071af;--color-azure-5: #003b5e;--color-azure-6: #001c30;--color-blue-1: #f0f4ff;--color-blue-2: #d4e0ff;--color-blue-3: #0089fc;--color-blue-4: #006dca;--color-blue-5: #00386d;--color-blue-6: #001a39;--color-indigo-1: #f3f3ff;--color-indigo-2: #deddff;--color-indigo-3: #657eff;--color-indigo-4: #0061fc;--color-indigo-5: #00328a;--color-indigo-6: #001649;--color-violet-1: #f7f1ff;--color-violet-2: #e8daff;--color-violet-3: #9b70ff;--color-violet-4: #794aff;--color-violet-5: #2d0fbf;--color-violet-6: #0b0074;--color-purple-1: #fdf4ff;--color-purple-2: #f7d9ff;--color-purple-3: #d150ff;--color-purple-4: #b01fe3;--color-purple-5: #660087;--color-purple-6: #3a004f;--color-magenta-1: #fff3fc;--color-magenta-2: #ffd7f6;--color-magenta-3: #f911e0;--color-magenta-4: #ca00b6;--color-magenta-5: #740068;--color-magenta-6: #44003c;--color-pink-1: #fff7fb;--color-pink-2: #ffdcec;--color-pink-3: #ff2fb2;--color-pink-4: #d2008f;--color-pink-5: #790051;--color-pink-6: #4b0030}warning-list{background:var(--color-yellow-1);border-left:4px solid var(--color-yellow-2);color:var(--color-yellow-4);display:block;font-family:var(--font-system);padding:.5em}warning-list[hidden]{display:none}warning-list ul{list-style-type:none;margin:0;padding-left:0}inline-button{cursor:pointer}

</style></head><body><state-css-variables><state-dark-theme-css-overrides><div id="backdrop"><page-skip><page-transition><div id="page" aria-live="polite"><header hidden></header><article></article><warning-list></warning-list><footer hidden></footer><error-handler></error-handler><page-skip-indicator></page-skip-indicator></div></page-transition></page-skip></div></state-dark-theme-css-overrides></state-css-variables><external-fonts></external-fonts><noscript>This requires JavaScript.</noscript></body><tw-storydata name="Il salvataggio di Milano" startnode="42" creator="Twine" creator-version="2.10.0" format="Chapbook" format-version="2.3.0" ifid="50D8CCDE-E280-4174-9FB0-55773EF0993C" options="" tags="" zoom="0.6" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css"></style><script role="script" id="twine-user-script" type="text/twine-javascript"></script><tw-passagedata pid="1" name="000001.1" tags="" position="2175,450" size="100,100">~~Sei giunto di fronte ai comunisti e inizi un dialogo con loro.~~&lt;br&gt;&lt;br&gt;

~~&quot;Sono qui per discutere della situazione attuale di Milano. La città è divisa e frammentata, e credo che sia necessario un cambiamento radicale per riportare l&#39;ordine e l&#39;unità.&quot;~~&lt;br&gt;&lt;br&gt;

[after 1 second]
~~Il rappresentante del governo comunista ti guarda con uno sguardo freddo, e dopo varie discussioni arrivate a una conclusione.~~&lt;br&gt;

_Rappresentante del governo:_&lt;br&gt;
_&quot;Hahahaha! Sei davvero divertente {nome}, quindi possiamo lasciarti andare. Lo ammetto, mi hai convinto, anche perché non possiamo permettere che qualcuno come te stia qui a farci perdere tempo. Ma attento a cosa potrebbe succederti.&quot;_ &lt;br&gt;&lt;br&gt;

[after 3 second]
~~Ti allontani tirando un sospiro di sollievo, consapevole che un passo importante è stato fatto.~~&lt;br&gt;

{link to: &#39;000002.1&#39;, label: &#39;Comincia a riunificare il paese&#39;}</tw-passagedata><tw-passagedata pid="2" name="000001.2" tags="" position="2175,925" size="100,100">{embed image: &#39;../immagini_imgur/6uesQxq.jpeg&#39;}
~~Sei giunta di fronte ai comunisti e inizi un dialogo con loro.~~&lt;br&gt;&lt;br&gt;

~~&quot;Sono qui per discutere della situazione attuale di Milano. La città è divisa e frammentata, e credo che sia necessario un cambiamento radicale per riportare l&#39;ordine e l&#39;unità.&quot;~~&lt;br&gt;&lt;br&gt;

[after 1 second]
~~Il rappresentante del governo comunista ti guarda con uno sguardo freddo, e dopo varie discussioni arrivate a una conclusione.~~&lt;br&gt;

_Rappresentante del governo:_&lt;br&gt;
_&quot;Hahahaha! Sei davvero divertente {nome}, quindi possiamo lasciarti andare. Lo ammetto, mi hai convinto, anche perché non possiamo permettere che qualcuno come te stia qui a farci perdere tempo. Ma attento a cosa potrebbe succederti.&quot;_ &lt;br&gt;&lt;br&gt;

[after 3 second]
~~Ti allontani tirando un sospiro di sollievo, consapevole che un passo importante è stato fatto.~~&lt;br&gt;

{link to: &#39;000002.2&#39;, label: &#39;Comincia a riunificare il paese&#39;}</tw-passagedata><tw-passagedata pid="3" name="000001_en" tags="" position="2150,1450" size="100,100">{embed image: &#39;../immagini_imgur/6uesQxq.jpeg&#39;}
~~You arrive in front of the communists and start a dialogue with them.~~&lt;br&gt;&lt;br&gt;

~~&quot;I am here to discuss the current situation in Milan. The city is divided and fragmented, and I believe that a radical change is needed to restore order and unity.&quot;~~&lt;br&gt;&lt;br&gt;

[after 1 second]
~~The representative of the communist government looks at you with a cold gaze, and after several discussions you come to a conclusion.~~&lt;br&gt;

_Representative of the government:_&lt;br&gt;
_&quot;Hahahaha! You are really funny {nome}, so we can let you go. I admit, you convinced me, also because we cannot allow someone like you to be here wasting our time. But be careful what could happen to you.&quot;_ &lt;br&gt;&lt;br&gt;

[after 3 seconds]
~~You walk away breathing a sigh of relief, knowing that an important step has been taken.~~&lt;br&gt;

{link to: &#39;000002_en&#39;, label: &#39;Begin to reunite the country&#39;}</tw-passagedata><tw-passagedata pid="4" name="000002.1" tags="" position="2325,450" size="100,100">~~Dopo un po&#39; di tempo, il paese è stato finalmente riunificato sotto la tua guida, ma i problemi iniziano a manifestarsi. I ribelli, contrari al tuo governo, cominciano a minacciarti di morte.~~&lt;br&gt;
~~La tua autorità è messa in discussione e la città sembra dividersi nuovamente. Le strade sono attraversate da tensioni sempre più forti, e le tue decisioni diventano sempre più difficili da prendere.~~&lt;br&gt;
~~I ribelli sono disposti a tutto pur di rovesciarti, e la situazione sembra sfuggire al tuo controllo.~~&lt;br&gt;&lt;br&gt;

**Devi prendere una decisione cruciale:**&lt;br&gt;&lt;br&gt;

{link to: &#39;fine5.1&#39;, label: &#39;Abbandona il paese&#39;}&lt;br&gt;   
{link to: &#39;fine6.1&#39;, label: &#39;Resisti ai ribelli&#39;}</tw-passagedata><tw-passagedata pid="5" name="000002.2" tags="" position="2375,900" size="100,100">~~Dopo un po&#39; di tempo, il paese è stato finalmente riunificato sotto la tua guida, ma i problemi iniziano a manifestarsi. I ribelli, contrari al tuo governo, cominciano a minacciarti di morte.~~&lt;br&gt;
~~La tua autorità è messa in discussione e la città sembra dividersi nuovamente. Le strade sono attraversate da tensioni sempre più forti, e le tue decisioni diventano sempre più difficili da prendere.~~&lt;br&gt;
~~I ribelli sono disposti a tutto pur di rovesciarti, e la situazione sembra sfuggire al tuo controllo.~~&lt;br&gt;&lt;br&gt;

**Devi prendere una decisione cruciale:**&lt;br&gt;&lt;br&gt;

{link to: &#39;fine5.2&#39;, label: &#39;Abbandona il paese&#39;}&lt;br&gt;   
{link to: &#39;fine6.2&#39;, label: &#39;Resisti ai ribelli&#39;}</tw-passagedata><tw-passagedata pid="6" name="000002_en" tags="" position="2350,1375" size="100,100">~~After some time, the country has finally been reunified under your leadership, but trouble is starting to appear. Rebels, opposed to your rule, are starting to threaten you with death.~~&lt;br&gt;
~~Your authority is being questioned, and the city seems to be divided once again. Tensions are rising in the streets, and your decisions are becoming increasingly difficult to make.~~&lt;br&gt;
~~The rebels are willing to do anything to overthrow you, and the situation seems to be spiraling out of your control.~~&lt;br&gt;&lt;br&gt;

**You have a crucial decision to make:**&lt;br&gt;&lt;br&gt;

{link to: &#39;end5&#39;, label: &#39;Leave the country&#39;}&lt;br&gt;
{link to: &#39;end6&#39;, label: &#39;Resist the rebels&#39;}</tw-passagedata><tw-passagedata pid="7" name="0001.1" tags="" position="1825,375" size="100,100">~~Hai scelto la via della pace, una decisione che metterà alla prova la tua pazienza e la tua capacità di negoziazione.~~&lt;br&gt;

[after 1 second]
~~La diplomazia non è un cammino facile, specialmente quando la città è divisa e ogni fazione è legata da ideologie contrastanti.~~ &lt;br&gt;

[after 3 second]
~~Decidere di agire pacificamente significa affrontare sfide che vanno oltre la semplice persuasione.~~ &lt;br&gt;
~~Significa entrare in territori pericolosi, dove le parole hanno il potere di distruggere o ricostruire.~~ &lt;br&gt;

[after 5 second]
~~Preparati, perché ogni incontro con i comunisti, ogni parola che dirai, potrà segnare il futuro di Milano.~~ &lt;br&gt;
~~Sei consapevole che il dialogo richiederà compromessi, sacrifici e una determinazione che dovrà essere più forte di qualsiasi conflitto armato.~~ &lt;br&gt;

[after 7 second]
~~La via della pace è lunga e tortuosa, e le resistenze potrebbero essere molte.~~ &lt;br&gt;
~~Ma tu sei pronto a dare il meglio di te stesso per cercare una soluzione che possa unire la città, riportando la speranza laddove regna la divisione.~~ &lt;br&gt;

[after 8 second]
~~La tua convinzione che il dialogo possa davvero cambiare le cose ti spinge ad agire, nonostante tutto.~~ &lt;br&gt;
~~Ogni passo che farai sarà una sfida, ma tu non sei disposto a rinunciare alla possibilità di un futuro migliore per Milano.~~ &lt;br&gt;

[after 9 second]
~~La tua preparazione sarà fondamentale, poiché la negoziazione richiederà una mente lucida, empatia e una strategia che possa attraversare le barriere ideologiche.~~ &lt;br&gt;

[after 10 second]
~~Sei pronto a mettere la tua vita in gioco, a rischiare tutto per ottenere ciò che credi sia giusto: la pace.~~ &lt;br&gt;
~~Ma ora, la vera battaglia sta per cominciare, e tu sei pronto a lottare con le parole per ciò che speri di ottenere per la tua città.~~&lt;br&gt;
&lt;br&gt;
[after 25 second]

[if hasArmi]
{link to: &#39;0002.1&#39;, label: &#39;Avanti&#39;}

[else]
{link to: &#39;000001.1&#39;, label: &#39;Avanti&#39;}

[continued]
[continued]</tw-passagedata><tw-passagedata pid="8" name="0001.1_en" tags="" position="1700,1650" size="100,100">~~You have chosen the path of peace, a decision that will test your patience and your ability to negotiate.~~&lt;br&gt;

[after 1 second]
~~Diplomacy is not an easy path, especially when the city is divided and each faction is linked by contrasting ideologies.~~ &lt;br&gt;

[after 3 seconds]
~~Deciding to act peacefully means facing challenges that go beyond simple persuasion.~~ &lt;br&gt;
~~It means entering dangerous territories, where words have the power to destroy or rebuild.~~ &lt;br&gt;

[after 5 seconds]
~~Prepare yourself, because every meeting with the communists, every word you say, could mark the future of Milan.~~ &lt;br&gt;
~~You are aware that dialogue will require compromises, sacrifices and a determination that will have to be stronger than any armed conflict.~~ &lt;br&gt;

[after 7 seconds]
~~The path of peace is long and winding, and resistance could be many.~~ &lt;br&gt;
~~But you are ready to give your best to find a solution that can unite the city, bringing hope where division reigns.~~ &lt;br&gt;

[after 8 seconds]
~~Your belief that dialogue can truly change things pushes you to act, despite everything.~~ &lt;br&gt;
~~Every step you take will be a challenge, but you are not willing to give up the possibility of a better future for Milan.~~ &lt;br&gt;

[after 9 seconds]
~~Your preparation will be essential, as negotiation will require a clear mind, empathy and a strategy that can cross ideological barriers.~~ &lt;br&gt;

[after 10 seconds]
~~You are ready to put your life on the line, to risk everything to get what you believe is right: peace.~~ &lt;br&gt;
~~But now, the real battle is about to begin, and you are ready to fight with words for what you hope to get for your city.~~&lt;br&gt;
&lt;br&gt;
[after 25 seconds]

[if hasWeapons]
{link to: &#39;0002_en&#39;, label: &#39;Next&#39;}

[else]
{link to: &#39;000001_en&#39;, label: &#39;Next&#39;}

[continued]
[continued]</tw-passagedata><tw-passagedata pid="9" name="0001.2" tags="" position="1700,825" size="100,100">~~Hai scelto la via della pace, una decisione che metterà alla prova la tua pazienza e la tua capacità di negoziazione.~~&lt;br&gt;

[after 1 second]
~~La diplomazia non è un cammino facile, specialmente quando la città è divisa e ogni fazione è legata da ideologie contrastanti.~~ &lt;br&gt;

[after 3 second]
~~Decidere di agire pacificamente significa affrontare sfide che vanno oltre la semplice persuasione.~~ &lt;br&gt;
~~Significa entrare in territori pericolosi, dove le parole hanno il potere di distruggere o ricostruire.~~ &lt;br&gt;

[after 5 second]
~~Preparati, perché ogni incontro con i comunisti, ogni parola che dirai, potrà segnare il futuro di Milano.~~ &lt;br&gt;
~~Sei consapevole che il dialogo richiederà compromessi, sacrifici e una determinazione che dovrà essere più forte di qualsiasi conflitto armato.~~ &lt;br&gt;

[after 7 second]
~~La via della pace è lunga e tortuosa, e le resistenze potrebbero essere molte.~~ &lt;br&gt;
~~Ma tu sei pronta a dare il meglio di te stessa per cercare una soluzione che possa unire la città, riportando la speranza laddove regna la divisione.~~ &lt;br&gt;

[after 8 second]
~~La tua convinzione che il dialogo possa davvero cambiare le cose ti spinge ad agire, nonostante tutto.~~ &lt;br&gt;
~~Ogni passo che farai sarà una sfida, ma tu non sei disposta a rinunciare alla possibilità di un futuro migliore per Milano.~~ &lt;br&gt;

[after 9 second]
~~La tua preparazione sarà fondamentale, poiché la negoziazione richiederà una mente lucida, empatia e una strategia che possa attraversare le barriere ideologiche.~~ &lt;br&gt;

[after 10 second]
~~Sei pronta a mettere la tua vita in gioco, a rischiare tutto per ottenere ciò che credi sia giusto: la pace.~~ &lt;br&gt;
~~Ma ora, la vera battaglia sta per cominciare, e tu sei pronta a lottare con le parole per ciò che speri di ottenere per la tua città.~~&lt;br&gt;
&lt;br&gt;
[after 25 second]

[if hasArmi]
{link to: &#39;0002.2&#39;, label: &#39;Avanti&#39;}

[else]
{link to: &#39;000001.2&#39;, label: &#39;Avanti&#39;}

[continued]
[continued]</tw-passagedata><tw-passagedata pid="10" name="0001.2_en" tags="" position="1700,1425" size="100,100">~~You have chosen the path of peace, a decision that will test your patience and your ability to negotiate.~~&lt;br&gt;

[after 1 second]
~~Diplomacy is not an easy path, especially when the city is divided and each faction is linked by contrasting ideologies.~~ &lt;br&gt;

[after 3 seconds]
~~Deciding to act peacefully means facing challenges that go beyond simple persuasion.~~ &lt;br&gt;
~~It means entering dangerous territories, where words have the power to destroy or rebuild.~~ &lt;br&gt;

[after 5 seconds]
~~Prepare yourself, because every meeting with the communists, every word you say, could mark the future of Milan.~~ &lt;br&gt;
~~You are aware that dialogue will require compromises, sacrifices and a determination that will have to be stronger than any armed conflict.~~ &lt;br&gt;

[after 7 seconds]
~~The path of peace is long and winding, and resistance could be many.~~ &lt;br&gt;
~~But you are ready to give your best to find a solution that can unite the city, bringing hope where division reigns.~~ &lt;br&gt;

[after 8 seconds]
~~Your belief that dialogue can truly change things pushes you to act, despite everything.~~ &lt;br&gt;
~~Every step you take will be a challenge, but you are not willing to give up the possibility of a better future for Milan.~~ &lt;br&gt;

[after 9 seconds]
~~Your preparation will be essential, as negotiation will require a clear mind, empathy and a strategy that can cross ideological barriers.~~ &lt;br&gt;

[after 10 seconds]
~~You are ready to put your life on the line, to risk everything to get what you believe is right: peace.~~ &lt;br&gt;
~~But now, the real battle is about to begin, and you are ready to fight with words for what you hope to get for your city.~~&lt;br&gt;
&lt;br&gt;
[after 25 seconds]

[if hasWeapons]
{link to: &#39;0002_en&#39;, label: &#39;Next&#39;}

[else]
{link to: &#39;000001_en&#39;, label: &#39;Next&#39;}

[continued]
[continued]</tw-passagedata><tw-passagedata pid="11" name="0002.1" tags="" position="2175,325" size="100,100">~~Sei giunto di fronte ai comunisti portando le armi per sicurezza e poi inizi a dialogare con uno di loro.~~&lt;br&gt;&lt;br&gt;

~~&quot;Sono qui per discutere della situazione attuale di Milano. La città è divisa e frammentata, e credo che sia necessario un cambiamento radicale per riportare l&#39;ordine e l&#39;unità.&quot;~~&lt;br&gt;&lt;br&gt;

[after 1 second]
~~Il rappresentante del governo comunista ti guarda con sospetto, notando l&#39;arsenale di armi che hai deciso di portare con te.~~&lt;br&gt;

_Rappresentante del governo:_&lt;br&gt;
_&quot;Giovanni, le tue intenzioni potrebbero sembrare nobili, ma ho notato che sei armato. Questo non è un segno di pace.&quot;_

[after 3 second]
~~Ti rendi conto che le armi agitano i comunisti, potrebbe risultare più complicato del previsto l&#39;accordo.~~&lt;br&gt;

~~&quot;Le armi sono solo un mezzo per raggiungere un fine. Milano ha bisogno di un leader forte che possa guidarla attraverso questi tempi difficili.&quot;~~&lt;br&gt;&lt;br&gt;

[after 5 second]
~~Il rappresentante del governo ride sarcasticamente.~~&lt;br&gt;

_Rappresentante del governo:_&lt;br&gt;
_&quot;Hahahaha! Sei armato, quindi non ho la minima intenzione di avere a che fare con uno come te, immagino le guerre che potresti causare tra le varie culture di questa città. Non possiamo permettere che qualcuno come te minacci la nostra stabilità. Verrai esiliato immediatamente.&quot;_ &lt;br&gt;&lt;br&gt;

[after 7 second]
~~Ti rendi conto che le tue parole non hanno avuto l&#39;effetto desiderato e che dovrai inventare un altro modo per aiutare Milano.~~&lt;br&gt;&lt;br&gt;
{link to: &#39;fine4.1&#39;, label: &#39;Accetta il tuo destino&#39;}</tw-passagedata><tw-passagedata pid="12" name="0002.2" tags="" position="2175,800" size="100,100">{embed image: &#39;../immagini_imgur/6uesQxq.jpeg&#39;}
~~Sei giunta di fronte ai comunisti portando le armi per sicurezza e poi inizi a dialogare con uno di loro.~~&lt;br&gt;&lt;br&gt;

~~&quot;Sono qui per discutere della situazione attuale di Milano. La città è divisa e frammentata, e credo che sia necessario un cambiamento radicale per riportare l&#39;ordine e l&#39;unità.&quot;~~&lt;br&gt;&lt;br&gt;

[after 1 second]
~~Il rappresentante del governo comunista ti guarda con sospetto, notando l&#39;arsenale di armi che hai deciso di portare con te.~~&lt;br&gt;

_Rappresentante del governo:_&lt;br&gt;
_&quot;{nome}i, le tue intenzioni potrebbero sembrare nobili, ma ho notato che sei armato. Questo non è un segno di pace.&quot;_

[after 3 second]
~~Ti rendi conto che le armi agitano i comunisti, potrebbe risultare più complicato del previsto l&#39;accordo.~~&lt;br&gt;

~~&quot;Le armi sono solo un mezzo per raggiungere un fine. Milano ha bisogno di una leader forte che possa guidarla attraverso questi tempi difficili.&quot;~~&lt;br&gt;&lt;br&gt;

[after 5 second]
~~Il rappresentante del governo ride sarcasticamente.~~&lt;br&gt;

_Rappresentante del governo:_&lt;br&gt;
_&quot;Hahahaha! Sei armata, quindi non ho la minima intenzione di avere a che fare con uno come te, immagino le guerre che potresti causare tra le varie culture di questa città. Non possiamo permettere che qualcuno come te minacci la nostra stabilità. Verrai esiliata immediatamente.&quot;_ &lt;br&gt;&lt;br&gt;

[after 7 second]
~~Ti rendi conto che le tue parole non hanno avuto l&#39;effetto desiderato e che dovrai inventare un altro modo per aiutare Milano.~~&lt;br&gt;

**FINE, LA TUA PROPOSTA È FALLITA**&lt;br&gt;
{link to: &#39;fine4.2&#39;, label: &#39;Accetta il tuo destino&#39;}</tw-passagedata><tw-passagedata pid="13" name="0002_en" tags="" position="2150,1350" size="100,100">{embed image: &#39;../immagini_imgur/6uesQxq.jpeg&#39;}
~~You arrive in front of the communists carrying weapons for safety and then you start talking to one of them.~~&lt;br&gt;&lt;br&gt;

~~&quot;I am here to discuss the current situation in Milan. The city is divided and fragmented, and I believe that a radical change is needed to restore order and unity.&quot;~~&lt;br&gt;&lt;br&gt;

[after 1 second]
~~The representative of the communist government looks at you suspiciously, noting the arsenal of weapons you have decided to bring with you.~~&lt;br&gt;

_Government Representative:_&lt;br&gt;
_&quot;{nome}, your intentions may seem noble, but I noticed that you are armed. This is not a sign of peace.&quot;_

[after 3 seconds]
~~You realize that weapons agitate the communists, it could be more complicated than expected to reach an agreement.~~&lt;br&gt;

~~&quot;Weapons are only a means to an end. Milan needs a strong leader who can guide it through these times difficult.&quot;~~&lt;br&gt;&lt;br&gt;

[after 5 seconds]
~~The government representative laughs sarcastically.~~&lt;br&gt;

_Government Representative:_&lt;br&gt;
_&quot;Hahahaha! You are armed, so I have no intention of dealing with someone like you, I can only imagine the wars you could cause between the various cultures of this city. We cannot allow someone like you to threaten our stability. You will be exiled immediately.&quot;_ &lt;br&gt;&lt;br&gt;

[after 7 seconds]
~~You realize that your words have not had the desired effect and that you will have to come up with another way to help Milan.~~&lt;br&gt;

**THE END, YOUR PROPOSAL HAS FAILED**&lt;br&gt;
{link to: &#39;end4&#39;, label: &#39;Accept your fate&#39;}</tw-passagedata><tw-passagedata pid="14" name="001.1" tags="" position="1500,425" size="100,100">hasArmi: false
--


*Hai deciso di non armarti con le armi di tuo padre, ciò comporterà molte conseguenze sul tuo cammino...*&lt;br&gt;
*Una rivoluzione armata potrebbe sembrare la via più veloce per risolvere il conflitto, ma a quale costo?*  
*Ogni colpo sparato, ogni vita perduta, potrebbe essere una cicatrice indelebile sulla città che amiamo.*  
*Le perdite sarebbero inevitabili, innocenti e colpevoli, giovani e anziani, tutti coinvolti in un conflitto che potrebbe sfuggire di mano.*

*Mentre rifletti, ti rendi conto che una soluzione pacifica sarebbe forse l&#39;ideale, ma le difficoltà sono enormi. Milano è divisa, ogni quartiere ha le sue credenze, la sua visione del mondo. Le fazioni si guardano con diffidenza, ognuna convinta della propria verità. Come convincere questi gruppi a mettere da parte le armi e le ideologie per un bene comune?*

*La strada della pace potrebbe essere lunga e tortuosa, forse troppo lunga. Ma forse, se ci fosse un minimo spiraglio di speranza, il cambiamento pacifico potrebbe garantire una stabilità duratura. La riconciliazione, se mai fosse possibile, potrebbe portare a una Milano che vive in armonia, piuttosto che in un perpetuo stato di conflitto.*

{link to: &#39;06.1&#39;, label: &#39;Attua la rivoluzione&#39;}  
{link to: &#39;0001.1&#39;, label: &#39;Agisci pacificamente&#39;}</tw-passagedata><tw-passagedata pid="15" name="001.1_en" tags="" position="1450,1550" size="100,100">hasWeapons: false
--

*You have decided not to arm yourself with your father&#39;s weapons, this will have many consequences on your path...*&lt;br&gt;
*An armed revolution might seem like the quickest way to resolve the conflict, but at what cost?*
*Every shot fired, every life lost, could be an indelible scar on the city we love.*
*The losses would be inevitable, innocent and guilty, young and old, all involved in a conflict that could get out of hand.*

*As you reflect, you realize that a peaceful solution would perhaps be ideal, but the difficulties are enormous. Milan is divided, each neighborhood has its own beliefs, its own vision of the world. The factions look at each other with suspicion, each convinced of its own truth. How to convince these groups to put aside their weapons and ideologies for the common good?*

*The road to peace could be long and winding, perhaps too long. But perhaps, if there were a glimmer of hope, peaceful change could ensure lasting stability. Reconciliation, if it were possible at all, could lead to a Milan that lives in harmony, rather than in a perpetual state of conflict.*

{link to: &#39;06.1_en&#39;, label: &#39;Make the Revolution a Reality&#39;}
{link to: &#39;0001.1_en&#39;, label: &#39;Act peacefully&#39;}</tw-passagedata><tw-passagedata pid="16" name="001.2" tags="" position="1525,625" size="100,100">hasArmi: false
--


*Hai deciso di non armarti con le armi di tuo padre, ciò comporterà molte conseguenze sul tuo cammino...*&lt;br&gt;
*Una rivoluzione armata potrebbe sembrare la via più veloce per risolvere il conflitto, ma a quale costo?*  
*Ogni colpo sparato, ogni vita perduta, potrebbe essere una cicatrice indelebile sulla città che amiamo.*  
*Le perdite sarebbero inevitabili, innocenti e colpevoli, giovani e anziani, tutti coinvolti in un conflitto che potrebbe sfuggire di mano.*

*Mentre rifletti, ti rendi conto che una soluzione pacifica sarebbe forse l&#39;ideale, ma le difficoltà sono enormi. Milano è divisa, ogni quartiere ha le sue credenze, la sua visione del mondo. Le fazioni si guardano con diffidenza, ognuna convinta della propria verità. Come convincere questi gruppi a mettere da parte le armi e le ideologie per un bene comune?*

*La strada della pace potrebbe essere lunga e tortuosa, forse troppo lunga. Ma forse, se ci fosse un minimo spiraglio di speranza, il cambiamento pacifico potrebbe garantire una stabilità duratura. La riconciliazione, se mai fosse possibile, potrebbe portare a una Milano che vive in armonia, piuttosto che in un perpetuo stato di conflitto.*

{link to: &#39;06.2&#39;, label: &#39;Attua la rivoluzione&#39;}  
{link to: &#39;0001.2&#39;, label: &#39;Agisci pacificamente&#39;}</tw-passagedata><tw-passagedata pid="17" name="001.2_en" tags="" position="1450,1350" size="100,100">hasWeapons: false
--

*You have decided not to arm yourself with your father&#39;s weapons, this will have many consequences on your path...*&lt;br&gt;
*An armed revolution might seem like the quickest way to resolve the conflict, but at what cost?*
*Every shot fired, every life lost, could be an indelible scar on the city we love.*
*The losses would be inevitable, innocent and guilty, young and old, all involved in a conflict that could get out of hand.*

*As you reflect, you realize that a peaceful solution would perhaps be ideal, but the difficulties are enormous. Milan is divided, each neighborhood has its own beliefs, its own vision of the world. The factions look at each other with suspicion, each convinced of its own truth. How to convince these groups to put aside their weapons and ideologies for the common good?*

*The road to peace could be long and winding, perhaps too long. But perhaps, if there were a glimmer of hope, peaceful change could ensure lasting stability. Reconciliation, if it were possible at all, could lead to a Milan that lives in harmony, rather than in a perpetual state of conflict.*

{link to: &#39;06.2_en&#39;, label: &#39;Make the Revolution a Reality&#39;}
{link to: &#39;0001.2_en&#39;, label: &#39;Act peacefully&#39;}</tw-passagedata><tw-passagedata pid="18" name="01.1" tags="" position="825,575" size="100,100">_Caro {nome},_  

_Spero che questa lettera ti trovi in buona salute. È passato molto tempo dall&#39;ultima volta che ci siamo incontrati, e sento la tua mancanza più di quanto tu possa immaginare. Le giornate sembrano più vuote senza la tua presenza, e ci sono tante cose che vorrei dirti di persona._  

_Vorrei invitarti a venire a Milano. Ho delle questioni importanti di cui dovremmo parlare, e credo che sia arrivato il momento di confrontarci faccia a faccia._  

_Con tanto affetto,_  
_Papà_  

{embed image: &#39;../immagini_imgur/g9EAdp6.jpeg&#39;}

{link to: &#39;02.1&#39;, label: &#39;Vai da tuo padre&#39;}</tw-passagedata><tw-passagedata pid="19" name="01.1_en" tags="" position="2025,1200" size="100,100">_Dear {nome},_

_I hope this letter finds you in good health. It&#39;s been a long time since we last met, and I miss you more than you can imagine. The days seem emptier without you, and there are so many things I would like to tell you in person._

_I would like to invite you to come to Milan. I have some important matters we need to discuss, and I think it&#39;s time we met face to face._

_With much love,_
_Dad_

{embed image: &#39;../immagini_imgur/g9EAdp6.jpeg&#39;}

{link to: &#39;02.1_en&#39;, label: &#39;Go to your father&#39;}</tw-passagedata><tw-passagedata pid="20" name="01.2" tags="" position="825,725" size="100,100">_Cara {nome},_  

_Spero che questa lettera ti trovi in buona salute. È passato molto tempo dall&#39;ultima volta che ci siamo incontrati, e sento la tua mancanza più di quanto tu possa immaginare. Le giornate sembrano più vuote senza la tua presenza, e ci sono tante cose che vorrei dirti di persona._  

_Vorrei invitarti a venire a Milano. Ho delle questioni importanti di cui dovremmo parlare, e credo che sia arrivato il momento di confrontarci faccia a faccia._  

_Con tanto affetto,_  
_Papà_  

{embed image: &#39;../immagini_imgur/g9EAdp6.jpeg&#39;}

{link to: &#39;02.2&#39;, label: &#39;Vai da tuo padre&#39;}</tw-passagedata><tw-passagedata pid="21" name="01.2_en" tags="" position="1975,1025" size="100,100">_Dear {nome},_

_I hope this letter finds you in good health. It&#39;s been a long time since we last met, and I miss you more than you can imagine. The days seem emptier without you, and there are so many things I would like to tell you in person._

_I would like to invite you to come to Milan. I have some important matters we need to discuss, and I think it&#39;s time we met face to face._

_With much love,_
_Dad_

{embed image: &#39;../immagini_imgur/g9EAdp6.jpeg&#39;}

{link to: &#39;02.2_en&#39;, label: &#39;Go to your father&#39;}</tw-passagedata><tw-passagedata pid="22" name="02.1" tags="" position="1000,575" size="100,100">~~Dopo aver letto la lettera, ti senti in bilico. Le parole di tuo padre ti hanno toccato profondamente, evocando una miscela di emozioni che ti è difficile descrivere. La mancanza di un incontro e le sue parole ti fanno riflettere, ma la decisione è ancora tutta tua.~~  

~~Vuoi davvero recarti da tuo padre? È stato tanto tempo, e chissà cosa ti aspetta a Milano…~~  

{link to: &#39;03.1&#39;, label: &#39;Sì&#39;}  {link to: &#39;fine1&#39;, label: &#39;No&#39;}</tw-passagedata><tw-passagedata pid="23" name="02.1_en" tags="" position="875,1550" size="100,100">~~After reading the letter, you feel unsteady. Your father&#39;s words have touched you deeply, evoking a mixture of emotions that are difficult for you to describe. The lack of a meeting and his words make you think, but the decision is still all yours.~~

~~Do you really want to go to your father? It&#39;s been a long time, and who knows what awaits you in Milan…~~

{link to: &#39;03.1_en&#39;, label: &#39;Yes&#39;} {link to: &#39;end1&#39;, label: &#39;No&#39;}</tw-passagedata><tw-passagedata pid="24" name="02.2" tags="" position="1000,725" size="100,100">~~Dopo aver letto la lettera, ti senti in bilico. Le parole di tuo padre ti hanno toccato profondamente, evocando una miscela di emozioni che ti è difficile descrivere. La mancanza di un incontro e le sue parole ti fanno riflettere, ma la decisione è ancora tutta tua.~~  

~~Vuoi davvero recarti da tuo padre? È stato tanto tempo, e chissà cosa ti aspetta a Milano…~~  

{link to: &#39;03.2&#39;, label: &#39;Sì&#39;}  {link to: &#39;fine1&#39;, label: &#39;No&#39;}</tw-passagedata><tw-passagedata pid="25" name="02.2_en" tags="" position="900,1375" size="100,100">~~After reading the letter, you feel unsteady. Your father&#39;s words have touched you deeply, evoking a mixture of emotions that are difficult for you to describe. The lack of a meeting and his words make you think, but the decision is still all yours.~~

~~Do you really want to go to your father? It&#39;s been a long time, and who knows what awaits you in Milan…~~

{link to: &#39;03.2_en&#39;, label: &#39;Yes&#39;} {link to: &#39;end1&#39;, label: &#39;No&#39;}</tw-passagedata><tw-passagedata pid="26" name="03.1" tags="" position="1125,575" size="100,100">[after 1 second]
*Entri nella stanza dove tuo padre è seduto, lo guardi con una mistura di rispetto e apprensione, le parole che stai per pronunciare pesano come macigni nella tua mente. Decidi di affrontarlo direttamente.*
[after 4 second]
_Ciao papà. È passato tanto tempo. Sono tornato a Milano e ho visto che la città è cambiata. Puoi dirmi cosa sta succedendo?_
[after 7 second]
*Noti subito il suo sguardo perso nel vuoto, il volto segnato dalle preoccupazioni e dalla fatica degli anni. Dopo un lungo silenzio, tuo padre sospira profondamente, poi si volta verso di te con un&#39;espressione grave, come se stesse per rivelarti qualcosa di molto pesante.*
[after 12 second]
_{nome}, la nostra amata Milano è cambiata molto. Ormai la città è tutta divisa e frammentata. Ognuno vive nella propria realtà, parla una lingua diversa e segue ideologie che raramente si incrociano. La coesione che un tempo ci univa sembra ormai un lontano ricordo, e ogni giorno vedo questa separazione crescere._
[after 16 second]
*Ascolti attentamente, cercando di comprendere appieno la gravità della situazione, sentendo un nodo formarsi nella tua gola. Milano, la città che avevi conosciuto, la tua casa, non esiste più come un tempo.*
[after 20 second]
_E come siamo arrivati a questo punto, papà?_
[after 21 second]
*Il tuo sguardo si fa più intenso, ma tuo padre non risponde subito. Rimane fermo, come se stesse rievocando ogni passo che li ha portati a quel punto.*
[after 25 second]
_Sono stati anni difficili, figlio mio. La politica, le differenze ideologiche, tutto ha contribuito a creare queste profonde fratture. Ogni quartiere sembra essersi trasformato in un piccolo stato a sé stante, con le proprie leggi e credenze. La gente non parla più una lingua comune, e la Milano che amavamo è ormai irriconoscibile._
[after 28 second]
*Annuisci lentamente, riflettendo sul peso delle sue parole. La consapevolezza che ricostruire l&#39;unità sarà un compito arduo ti colpisce come un pugno allo stomaco, ma senti anche una fiamma di determinazione crescere dentro di te. La tua città ha bisogno di te.*
[after 32 second]
_Grazie, papà. Farò del mio meglio per aiutare Milano a ritrovare sé stessa._
[after 34 second]
{link to: &#39;04.1&#39;, label: &#39;Continua&#39;}
[continued]</tw-passagedata><tw-passagedata pid="27" name="03.1_en" tags="" position="1050,1550" size="100,100">[after 1 second]
*You enter the room where your father is sitting, you look at him with a mixture of respect and apprehension, the words you are about to say weigh like boulders in your mind. You decide to face him directly.*
[after 4 seconds]
_Hi dad. It&#39;s been a long time. I returned to Milan and I saw that the city has changed. Can you tell me what&#39;s happening?_
[after 7 seconds]
*You immediately notice his gaze lost in the void, his face marked by the worries and fatigue of the years. After a long silence, your father sighs deeply, then turns to you with a serious expression, as if he were about to reveal something very heavy to you.*
[after 12 seconds]
_{nome}, our beloved Milan has changed a lot. By now the city is all divided and fragmented. Everyone lives in their own reality, speaks a different language and follows ideologies that rarely intersect. The cohesion that once united us now seems like a distant memory, and every day I see this separation grow._
[after 16 seconds]
*You listen carefully, trying to fully understand the gravity of the situation, feeling a lump forming in your throat. Milan, the city you once knew, your home, no longer exists as it once did.*
[after 20 seconds]
_And how did we get to this point, Dad?_
[after 21 seconds]
*Your gaze deepens, but your father doesn&#39;t respond immediately. He remains still, as if he were recalling every step that brought them to that point.*
[after 25 seconds]
_They have been difficult years, my son. Politics, ideological differences, everything has contributed to creating these deep fractures. Each neighborhood seems to have transformed into a small state in itself, with its own laws and beliefs. People no longer speak a common language, and the Milan we loved is now unrecognizable._
[after 28 seconds]
*You nod slowly, reflecting on the weight of his words. The knowledge that rebuilding unity will be an arduous task hits you like a punch in the stomach, but you also feel a flame of determination growing inside you. Your city needs you.*
[after 32 seconds]
_Thank you, Dad. I will do my best to help Milan find itself again._
[after 34 seconds]
{link to: &#39;04.1_en&#39;, label: &#39;Continue&#39;}
[continued]</tw-passagedata><tw-passagedata pid="28" name="03.2" tags="" position="1125,725" size="100,100">[after 1 second]
Entri nella stanza dove tuo padre è seduto, lo guardi con una mistura di rispetto e apprensione, le parole che stai per pronunciare pesano come macigni nella tua mente. Decidi di affrontarlo direttamente.

[after 4 second]
Ciao papà. È passato tanto tempo. Sono tornata a Milano e ho visto che la città è cambiata. Puoi dirmi cosa sta succedendo?

[after 7 second]
Noti subito il suo sguardo perso nel vuoto, il volto segnato dalle preoccupazioni e dalla fatica degli anni. Dopo un lungo silenzio, tuo padre sospira profondamente, poi si volta verso di te con un&#39;espressione grave, come se stesse per rivelarti qualcosa di molto pesante.

[after 12 second]
{nome}, figlia mia, la nostra amata Milano è cambiata molto. Ormai la città è tutta divisa e frammentata. Ognuno vive nella propria realtà, parla una lingua diversa e segue ideologie che raramente si incrociano. La coesione che un tempo ci univa sembra ormai un lontano ricordo, e ogni giorno vedo questa separazione crescere.

[after 16 second]
Ascolti attentamente, cercando di comprendere appieno la gravità della situazione, sentendo un nodo formarsi nella tua gola. Milano, la città che avevi conosciuto, la tua casa, non esiste più come un tempo.

[after 20 second]
E come siamo arrivati a questo punto, papà?

[after 21 second]
Il tuo sguardo si fa più intenso, ma tuo padre non risponde subito. Rimane fermo, come se stesse rievocando ogni passo che li ha portati a quel punto.

[after 25 second]
Sono stati anni difficili, figlia mia. La politica, le differenze ideologiche, tutto ha contribuito a creare queste profonde fratture. Ogni quartiere sembra essersi trasformato in un piccolo stato a sé stante, con le proprie leggi e credenze. La gente non parla più una lingua comune, e la Milano che amavamo è ormai irriconoscibile.

[after 28 second]
Annuisci lentamente, riflettendo sul peso delle sue parole. La consapevolezza che ricostruire l&#39;unità sarà un compito arduo ti colpisce come un pugno allo stomaco, ma senti anche una fiamma di determinazione crescere dentro di te. La tua città ha bisogno di te.

[after 32 second]
Grazie, papà. Farò del mio meglio per aiutare Milano a ritrovare sé stessa.

[after 34 second]
{link to: &#39;04.2&#39;, label: &#39;Continua&#39;}
[continued]</tw-passagedata><tw-passagedata pid="29" name="03.2_en" tags="" position="1050,1375" size="100,100">[after 1 second]
You enter the room where your father is sitting, you look at him with a mixture of respect and apprehension, the words you are about to say weigh like boulders in your mind. You decide to confront him directly.

[after 4 seconds]
Hi dad. It&#39;s been a long time. I returned to Milan and I saw that the city has changed. Can you tell me what&#39;s happening?

[after 7 seconds]
You immediately notice his gaze lost in the void, his face marked by the worries and fatigue of the years. After a long silence, your father sighs deeply, then turns to you with a serious expression, as if he were about to reveal something very heavy.

[after 12 seconds]
{nome}, my daughter, our beloved Milan has changed a lot. By now the city is all divided and fragmented. Everyone lives in their own reality, speaks a different language and follows ideologies that rarely intersect. The cohesion that once united us now seems like a distant memory, and every day I see this separation grow.

[after 16 seconds]
You listen carefully, trying to fully understand the gravity of the situation, feeling a lump forming in your throat. Milan, the city you once knew, your home, no longer exists as it once did.

[after 20 seconds]
And how did we get to this point, Dad?

[after 21 seconds]
Your gaze deepens, but your father doesn&#39;t respond immediately. He remains still, as if he were recalling every step that brought them to this point.

[after 25 seconds]
These have been difficult years, my daughter. Politics, ideological differences, everything has contributed to creating these deep fractures. Each neighborhood seems to have transformed into a small state of its own, with its own laws and beliefs. People no longer speak a common language, and the Milan we loved is now unrecognizable.

[after 28 seconds]
You nod slowly, considering the weight of his words. The knowledge that rebuilding unity will be a daunting task hits you like a punch in the stomach, but you also feel a flame of determination growing inside you. Your city needs you.

[after 32 seconds]
Thank you, Dad. I will do my best to help Milan find itself again.

[after 34 seconds]
{link to: &#39;04.2_en&#39;, label: &#39;Continue&#39;}
[continued]</tw-passagedata><tw-passagedata pid="30" name="04.1" tags="" position="1250,575" size="100,100">[after 1 second]
*Il padre si alza lentamente, il suo volto segnato dalla fatica di anni di lotte e sacrifici. Si avvicina a un vecchio armadio, lo apre con un rumore sordo, rivelando un arsenale di armi ben custodito all&#39;interno. Il luccichio metallico sembra riflettere una realtà che non avresti mai voluto affrontare. Tuo padre si volta verso di te con uno sguardo deciso, che non lascia spazio a dubbi.*
[after 8 second]
_{nome}, so che non è una decisione facile, ma se vuoi davvero aiutare Milano, avrai bisogno di queste. Prendi le armi e combatti per la nostra città._
[after 12 second]

~~Il silenzio nella stanza è denso, come se ogni parola pronunciata fosse carica di un destino che ti coinvolge totalmente. Guardi le armi, ogni singolo pezzo sembra rappresentare una scelta che cambierà il corso della tua vita. Il peso di quella decisione ti schiaccia, mentre il tuo cuore batte forte nel petto. Sa che accettare questo invito significherebbe entrare in un mondo fatto di violenza, conflitto e un impegno che potrebbe cambiarti per sempre. Ma rifiutare significherebbe abbandonare Milano al suo destino.~~
[after 20 second]

{link to: &#39;05.1&#39;, label: &#39;Accetta&#39;}  
{link to: &#39;001.1&#39;, label: &#39;Rifiuta&#39;}
[continued]</tw-passagedata><tw-passagedata pid="31" name="04.1_en" tags="" position="1225,1550" size="100,100">[after 1 second]
*The father slowly gets up, his face marked by the fatigue of years of struggle and sacrifice. He approaches an old wardrobe, opens it with a dull noise, revealing an arsenal of weapons well-guarded inside. The metallic glint seems to reflect a reality that {name} never wanted to face. Your father turns to you with a determined look, that leaves no room for doubt.*
[after 8 second]
_{name}, I know it&#39;s not an easy decision, but if you really want to help Milan, you&#39;ll need these. Take up arms and fight for our city._
[after 12 second]

~~The silence in the room is thick, as if every word spoken was charged with a destiny that involves you completely. You look at the weapons, each single piece seems to represent a choice that will change the course of your life. The weight of that decision crushes you, while your heart beats hard in your chest. He knows that accepting this invitation would mean entering a world made of violence, conflict and a commitment that could change you forever. But refusing would mean abandoning Milan to its fate, leaving it at the mercy of forces you don&#39;t know and that feared to complete what had begun to crumble the city.~~
[after 20 seconds]

{link to: &#39;05.1_en&#39;, label: &#39;Accept&#39;}
{link to: &#39;001.1_en&#39;, label: &#39;Refuse&#39;}
[continued]</tw-passagedata><tw-passagedata pid="32" name="04.2" tags="" position="1250,725" size="100,100">[after 1 second]
*Il padre si alza lentamente, il suo volto segnato dalla fatica di anni di lotte e sacrifici. Si avvicina a un vecchio armadio, lo apre con un rumore sordo, rivelando un arsenale di armi ben custodito all&#39;interno. Il luccichio metallico sembra riflettere una realtà che non avresti mai voluto affrontare. Tuo padre si volta verso di te con uno sguardo deciso, che non lascia spazio a dubbi.*

[after 8 second]
_{nome}, so che non è una decisione facile, ma se vuoi davvero aiutare Milano, avrai bisogno di queste. Prendi le armi e combatti per la nostra città._

[after 12 second]
~~Il silenzio nella stanza è denso, come se ogni parola pronunciata fosse carica di un destino che ti coinvolge totalmente. Guardi le armi, ogni singolo pezzo sembra rappresentare una scelta che cambierà il corso della tua vita. Il peso di quella decisione ti schiaccia, mentre il tuo cuore batte forte nel petto. Sai che accettare questo invito significherebbe entrare in un mondo fatto di violenza, conflitto e un impegno che potrebbe cambiarti per sempre. Ma rifiutare significherebbe abbandonare Milano al suo destino.~~

[after 20 second]

{link to: &#39;05.2&#39;, label: &#39;Accetta&#39;}
{link to: &#39;001.2&#39;, label: &#39;Rifiuta&#39;}
[continued]</tw-passagedata><tw-passagedata pid="33" name="04.2_en" tags="" position="1225,1375" size="100,100">[after 1 second]
*The father slowly gets up, his face marked by the fatigue of years of struggle and sacrifice. He approaches an old wardrobe, opens it with a dull noise, revealing an arsenal of weapons well-guarded inside. The metallic glint seems to reflect a reality that {nome} never wanted to face. Your father turns to you with a determined look, that leaves no room for doubt.*
[after 8 second]
_{nome}, I know it&#39;s not an easy decision, but if you really want to help Milan, you&#39;ll need these. Take up arms and fight for our city._
[after 12 second]

~~The silence in the room is thick, as if every word spoken was charged with a destiny that involves you completely. You look at the weapons, each single piece seems to represent a choice that will change the course of your life. The weight of that decision crushes you, while your heart beats hard in your chest. He knows that accepting this invitation would mean entering a world made of violence, conflict and a commitment that could change you forever. But refusing would mean abandoning Milan to its fate, leaving it at the mercy of forces you don&#39;t know and that feared to complete what had begun to crumble the city.~~
[after 20 seconds]

{link to: &#39;05.2_en&#39;, label: &#39;Accept&#39;}
{link to: &#39;001.2_en&#39;, label: &#39;Refuse&#39;}
[continued]</tw-passagedata><tw-passagedata pid="34" name="05.1" tags="" position="1500,300" size="100,100">hasArmi: true
--

*Una rivoluzione armata potrebbe sembrare la via più veloce per risolvere il conflitto, ma a quale costo?*  
*Ogni colpo sparato, ogni vita perduta, potrebbe essere una cicatrice indelebile sulla città che amiamo.*  
*Le perdite sarebbero inevitabili, innocenti e colpevoli, giovani e anziani, tutti coinvolti in un conflitto che potrebbe sfuggire di mano.*

*Mentre rifletti, ti rendi conto che una soluzione pacifica sarebbe forse l&#39;ideale, ma le difficoltà sono enormi. Milano è divisa, ogni quartiere ha le sue credenze, la sua visione del mondo. Le fazioni si guardano con diffidenza, ognuna convinta della propria verità. Come convincere questi gruppi a mettere da parte le armi e le ideologie per un bene comune?*

*La strada della pace potrebbe essere lunga e tortuosa, forse troppo lunga. Ma forse, se ci fosse un minimo spiraglio di speranza, il cambiamento pacifico potrebbe garantire una stabilità duratura. La riconciliazione, se mai fosse possibile, potrebbe portare a una Milano che vive in armonia, piuttosto che in un perpetuo stato di conflitto.*

{link to: &#39;06.1&#39;, label: &#39;Attua la rivoluzione&#39;}  
{link to: &#39;0001.1&#39;, label: &#39;Agisci pacificamente&#39;}</tw-passagedata><tw-passagedata pid="35" name="05.1_en" tags="" position="1450,1650" size="100,100">hasWeapons: true
--

*You have decided not to arm yourself with your father&#39;s weapons, this will have many consequences on your path...*&lt;br&gt;
*An armed revolution might seem like the quickest way to resolve the conflict, but at what cost?*
*Every shot fired, every life lost, could be an indelible scar on the city we love.*
*The losses would be inevitable, innocent and guilty, young and old, all involved in a conflict that could get out of hand.*

*As you reflect, you realize that a peaceful solution would perhaps be ideal, but the difficulties are enormous. Milan is divided, each neighborhood has its own beliefs, its own vision of the world. The factions look at each other with suspicion, each convinced of its own truth. How to convince these groups to put aside their weapons and ideologies for the common good?*

*The road to peace could be long and winding, perhaps too long. But perhaps, if there were a glimmer of hope, peaceful change could ensure lasting stability. Reconciliation, if it were possible at all, could lead to a Milan that lives in harmony, rather than in a perpetual state of conflict.*

{link to: &#39;06.1_en&#39;, label: &#39;Make the Revolution a Reality&#39;}
{link to: &#39;0001.1_en&#39;, label: &#39;Act peacefully&#39;}</tw-passagedata><tw-passagedata pid="36" name="05.2" tags="" position="1525,750" size="100,100">hasArmi: true
--

*Una rivoluzione armata potrebbe sembrare la via più veloce per risolvere il conflitto, ma a quale costo?*  
*Ogni colpo sparato, ogni vita perduta, potrebbe essere una cicatrice indelebile sulla città che amiamo.*  
*Le perdite sarebbero inevitabili, innocenti e colpevoli, giovani e anziani, tutti coinvolti in un conflitto che potrebbe sfuggire di mano.*

*Mentre rifletti, ti rendi conto che una soluzione pacifica sarebbe forse l&#39;ideale, ma le difficoltà sono enormi. Milano è divisa, ogni quartiere ha le sue credenze, la sua visione del mondo. Le fazioni si guardano con diffidenza, ognuna convinta della propria verità. Come convincere questi gruppi a mettere da parte le armi e le ideologie per un bene comune?*

*La strada della pace potrebbe essere lunga e tortuosa, forse troppo lunga. Ma forse, se ci fosse un minimo spiraglio di speranza, il cambiamento pacifico potrebbe garantire una stabilità duratura. La riconciliazione, se mai fosse possibile, potrebbe portare a una Milano che vive in armonia, piuttosto che in un perpetuo stato di conflitto.*

{link to: &#39;06.2&#39;, label: &#39;Attua la rivoluzione&#39;}  
{link to: &#39;0001.2&#39;, label: &#39;Agisci pacificamente&#39;}</tw-passagedata><tw-passagedata pid="37" name="05.2_en" tags="" position="1450,1450" size="100,100">hasWeapons: true
--

*You have decided to arm yourself with your father&#39;s weapons, this will have many consequences on your path...*&lt;br&gt;
*An armed revolution might seem like the quickest way to resolve the conflict, but at what cost?*
*Every shot fired, every life lost, could be an indelible scar on the city we love.*
*The losses would be inevitable, innocent and guilty, young and old, all involved in a conflict that could get out of hand.*

*As you reflect, you realize that a peaceful solution would perhaps be ideal, but the difficulties are enormous. Milan is divided, each neighborhood has its own beliefs, its own vision of the world. The factions look at each other with suspicion, each convinced of its own truth. How to convince these groups to put aside their weapons and ideologies for the common good?*

*The road to peace could be long and winding, perhaps too long. But perhaps, if there were a glimmer of hope, peaceful change could ensure lasting stability. Reconciliation, if it were possible at all, could lead to a Milan that lives in harmony, rather than in a perpetual state of conflict.*

{link to: &#39;06.2_en&#39;, label: &#39;Make the Revolution a Reality&#39;}
{link to: &#39;0001.2_en&#39;, label: &#39;Act peacefully&#39;}</tw-passagedata><tw-passagedata pid="38" name="06.1" tags="" position="1825,225" size="100,100">~~Hai deciso di intraprendere il cammino della rivoluzione, una scelta che cambierà per sempre il corso della tua vita e di quella di Milano.~~&lt;br&gt;

[after 1 second]
~~Sei consapevole che questa strada è irta di pericoli, che ogni passo che farai potrebbe costarti qualcosa di irreparabile.~~ &lt;br&gt;
[after 3 second]
~~La rivoluzione non è solo un atto di ribellione, ma una decisione radicale di opporsi a un sistema che ha soffocato la città e le sue persone.~~ &lt;br&gt;
[after 5 second]
~~Preparati, perché la tua determinazione verrà messa alla prova ad ogni angolo. &lt;br&gt;
La lotta che stai per affrontare non è solo fisica, ma anche emotiva e psicologica. &lt;br&gt;
Ogni azione che intraprenderai avrà delle conseguenze, e dovrai essere pronto a fare sacrifici.~~ &lt;br&gt;
[after 7 second]
~~La tua vita, la tua famiglia, e persino la tua stessa umanità potrebbero essere messe alla prova in modi che non hai mai immaginato.~~ &lt;br&gt;
[after 8 second]
~~Tuttavia, in questo momento di caos, tu hai scelto di non arrenderti, di non permettere che la paura e la divisione prevalgano~~. &lt;br&gt;
[after 9 second]
~~Sei disposto a perdere tutto per il tuo paese, per la tua città, e per una causa che credi sia giusta.~~ &lt;br&gt;
[after 10 second]
~~La strada che hai scelto è lunga, tortuosa e piena di incertezze, ma sei pronto a combattere per ciò in cui credi.~~ &lt;br&gt;
~~Preparati, perché il futuro che ti attende dipenderà dalla forza con cui affronterai la battaglia che sta per iniziare.~~&lt;br&gt;
&lt;br&gt;
[if hasArmi]
{link to: &#39;fine2.1&#39;, label: &#39;Avanti&#39;}

[else]
{link to: &#39;fine3.1&#39;, label: &#39;Avanti&#39;}
[continued]
[continued]</tw-passagedata><tw-passagedata pid="39" name="06.1_en" tags="" position="1700,1550" size="100,100">~~You have decided to embark on the path of revolution, a choice that will change the course of your life and that of Milan forever.~~&lt;br&gt;

[after 1 second]
~~You are aware that this path is fraught with danger, that every step you take could cost you something irreparable.~~ &lt;br&gt;
[after 3 second]
~~The revolution is not just an act of rebellion, but a radical decision to oppose a system that has suffocated the city and its people.~~ &lt;br&gt;
[after 5 second]
~~Get ready, because your determination will be tested at every corner. &lt;br&gt;
The fight you are about to face is not only physical, but also emotional and psychological. &lt;br&gt;
Every action you take will have consequences, and you must be prepared to make sacrifices.~~ &lt;br&gt;
[after 7 seconds]
~~Your life, your family, and even your humanity may be tested in ways you have never imagined.~~ &lt;br&gt;
[after 8 seconds]
~~However, in this time of chaos, you have chosen not to give up, not to allow fear and division to prevail~~. &lt;br&gt;
[after 9 seconds]
~~You are willing to lose everything for your country, for your city, and for a cause that you believe is right.~~ &lt;br&gt;
[after 10 seconds]
~~The road you have chosen is long, winding and full of uncertainties, but you are ready to fight for what you believe in.~~ &lt;br&gt;
~~Prepare yourself, because the future that awaits you will depend on the strength with which you face the battle that is about to begin.~~&lt;br&gt;
&lt;br&gt;
[if hasWeapons]
{link to: &#39;end2&#39;, label: &#39;Next&#39;}

[else]
{link to: &#39;end3&#39;, label: &#39;Next&#39;}
[continued]
[continued]</tw-passagedata><tw-passagedata pid="40" name="06.2" tags="" position="1700,650" size="100,100">~~Hai deciso di intraprendere il cammino della rivoluzione, una scelta che cambierà per sempre il corso della tua vita e di quella di Milano.~~&lt;br&gt;

[after 1 second]
~~Sei consapevole che questa strada è irta di pericoli, che ogni passo che farai potrebbe costarti qualcosa di irreparabile.~~ &lt;br&gt;
[after 3 second]
~~La rivoluzione non è solo un atto di ribellione, ma una decisione radicale di opporsi a un sistema che ha soffocato la città e le sue persone.~~ &lt;br&gt;
[after 5 second]
~~Preparati, perché la tua determinazione verrà messa alla prova ad ogni angolo. &lt;br&gt;
La lotta che stai per affrontare non è solo fisica, ma anche emotiva e psicologica. &lt;br&gt;
Ogni azione che intraprenderai avrà delle conseguenze, e dovrai essere pronto a fare sacrifici.~~ &lt;br&gt;
[after 7 second]
~~La tua vita, la tua famiglia, e persino la tua stessa umanità potrebbero essere messe alla prova in modi che non hai mai immaginato.~~ &lt;br&gt;
[after 8 second]
~~Tuttavia, in questo momento di caos, tu hai scelto di non arrenderti, di non permettere che la paura e la divisione prevalgano~~. &lt;br&gt;
[after 9 second]
~~Sei disposta a perdere tutto per il tuo paese, per la tua città, e per una causa che credi sia giusta.~~ &lt;br&gt;
[after 10 second]
~~La strada che hai scelto è lunga, tortuosa e piena di incertezze, ma sei pronto a combattere per ciò in cui credi.~~ &lt;br&gt;
~~Preparati, perché il futuro che ti attende dipenderà dalla forza con cui affronterai la battaglia che sta per iniziare.~~&lt;br&gt;
&lt;br&gt;
[if hasArmi]
{link to: &#39;fine2.2&#39;, label: &#39;Avanti&#39;}

[else]
{link to: &#39;fine3.2&#39;, label: &#39;Avanti&#39;}
[continued]
[continued]</tw-passagedata><tw-passagedata pid="41" name="06.2_en" tags="" position="1700,1325" size="100,100">~~You have decided to embark on the path of revolution, a choice that will change the course of your life and that of Milan forever.~~&lt;br&gt;

[after 1 second]
~~You are aware that this path is fraught with danger, that every step you take could cost you something irreparable.~~ &lt;br&gt;
[after 3 second]
~~The revolution is not just an act of rebellion, but a radical decision to oppose a system that has suffocated the city and its people.~~ &lt;br&gt;
[after 5 second]
~~Get ready, because your determination will be tested at every corner. &lt;br&gt;
The fight you are about to face is not only physical, but also emotional and psychological. &lt;br&gt;
Every action you take will have consequences, and you must be prepared to make sacrifices.~~ &lt;br&gt;
[after 7 seconds]
~~Your life, your family, and even your humanity may be tested in ways you have never imagined.~~ &lt;br&gt;
[after 8 seconds]
~~However, in this time of chaos, you have chosen not to give up, not to allow fear and division to prevail~~. &lt;br&gt;
[after 9 seconds]
~~You are willing to lose everything for your country, for your city, and for a cause that you believe is right.~~ &lt;br&gt;
[after 10 seconds]
~~The road you have chosen is long, winding and full of uncertainties, but you are ready to fight for what you believe in.~~ &lt;br&gt;
~~Prepare yourself, because the future that awaits you will depend on the strength with which you face the battle that is about to begin.~~&lt;br&gt;
&lt;br&gt;
[if hasWeapons]
{link to: &#39;end2&#39;, label: &#39;Next&#39;}

[else]
{link to: &#39;end3&#39;, label: &#39;Next&#39;}
[continued]
[continued]</tw-passagedata><tw-passagedata pid="42" name="1" tags="" position="75,200" size="100,100">**IL SALVATAGGIO DI MILANO / THE RESCUE OF MILAN**

~~Benvenuto in questa storia interattiva. Segui le scelte per scoprire il destino del protagonista.~~&lt;br&gt;&lt;br&gt;
~~Welcome to this interactive story. Follow the choices to discover the protagonist&#39;s fate.~~&lt;br&gt;&lt;br&gt;

{link to: &#39;selezione_lingua&#39;, label: &#39;Inizia la storia / The story begins&#39;}  
{link to: &#39;1.2&#39;, label: &#39;Crediti e ringraziamenti / Credits and thanks&#39;}  
{link to: &#39;1.3&#39;, label: &#39;Disclaimer e avvertenze / Disclaimer and warnings&#39;}</tw-passagedata><tw-passagedata pid="43" name="1.2" tags="" position="150,375" size="100,100">**CREDITI / CREDITS**

~~Premi una delle altrenative per visualizzarlo in quella lingua~~  &lt;br&gt;
~~Press one of the alternatives to view it in that language~~&lt;br&gt;&lt;br&gt;
{link to: &#39;crediti_it&#39;, label: &#39;Italiano&#39;}&lt;br&gt;
{link to: &#39;crediti_en&#39;, label: &#39;English&#39;}&lt;br&gt;&lt;br&gt;
 {link to: &#39;1&#39;, label: &#39;Torna alla Home / Back to Home&#39;}</tw-passagedata><tw-passagedata pid="44" name="1.3" tags="" position="50,375" size="100,100">**DISCLAIMER**
~~Premi una delle alternative per visualizzarlo in quella lingua~~  &lt;br&gt;
~~Press one of the alternatives to view it in that language~~&lt;br&gt;&lt;br&gt;
{link to: &#39;disclaimer_it&#39;, label: &#39;Italiano&#39;}&lt;br&gt;
{link to: &#39;disclaimer_en&#39;, label: &#39;English&#39;}&lt;br&gt;&lt;br&gt;
 {link to: &#39;1&#39;, label: &#39;Torna alla Home / Back to Home&#39;}</tw-passagedata><tw-passagedata pid="45" name="2" tags="" position="250,200" size="100,100">~~Seleziona il genere e successivamente il nome del personaggio che vuoi impersonificare~~:&lt;br&gt;&lt;br&gt;
~~Genere~~: {link to: &#39;2.2&#39;, label: &#39;Uomo&#39;} {link to: &#39;2.3&#39;, label: &#39;Donna&#39;}&lt;br&gt;&lt;br&gt;</tw-passagedata><tw-passagedata pid="46" name="2.2" tags="" position="400,50" size="100,100">~~Scrivi nel riquadro il nome del tuo personaggio:~~ {text input for: &#39;nome&#39;}&lt;br&gt;&lt;br&gt;
{link to: &#39;3.1&#39;, label: &#39;Continua la personalizzazione&#39;}</tw-passagedata><tw-passagedata pid="47" name="2.2_en" tags="" position="300,1000" size="100,100">~~Write your character&#39;s name in the box:~~ {text input for: &#39;nome&#39;}&lt;br&gt;&lt;br&gt;
{link to: &#39;3.1_en&#39;, label: &#39;Continue customization&#39;}</tw-passagedata><tw-passagedata pid="48" name="2.3" tags="" position="550,50" size="100,100">~~Scrivi nel riquadro il nome del tuo personaggio:~~ {text input for: &#39;nome&#39;}&lt;br&gt;&lt;br&gt;
{link to: &#39;3.2&#39;, label: &#39;Continua la personalizzazione&#39;}</tw-passagedata><tw-passagedata pid="49" name="2.3_en" tags="" position="525,800" size="100,100">~~Write your character&#39;s name in the box:~~ {text input for: &#39;nome&#39;}&lt;br&gt;&lt;br&gt;
{link to: &#39;3.2_en&#39;, label: &#39;Continue customization&#39;}</tw-passagedata><tw-passagedata pid="50" name="2_en" tags="" position="375,500" size="100,100">~~Select the gender and then the name of the character you want to impersonate~~:&lt;br&gt;&lt;br&gt;
~~Gender~~: {link to: &#39;2.2_en&#39;, label: &#39;Male&#39;} {link to: &#39;2.3_en&#39;, label: &#39;Female&#39;}&lt;br&gt;&lt;br&gt;</tw-passagedata><tw-passagedata pid="51" name="3.1" tags="" position="400,200" size="100,100">~~Benvenuto caro {nome},~~&lt;br&gt;
~~Inserisci il quartiere che desideri amministrare:~~ {dropdown menu for: &#39;quartieri&#39;, choices: [&#39;Affori&#39;, &#39;Barona&#39;, &#39;Bicocca&#39;, &#39;Bovisa&#39;, &#39;Bruzzano&#39;, &#39;Baggio&#39;, &#39;Cagnola&#39;, &#39;Calvairate&#39;, &#39;Casoretto&#39;, &#39;Città Studi&#39;, &#39;Chinatown&#39;, &#39;Comasina&#39;, &#39;Corvetto&#39;, &#39;Crescenzago&#39;, &#39;Dergano&#39;, &#39;Famagosta&#39;, &#39;Fiera&#39;, &#39;Forlanini&#39;, &#39;Garegnano&#39;, &#39;Garibaldi Repubblica&#39;, &#39;Ghisolfa&#39;, &#39;Gorla&#39;, &#39;Gratosoglio&#39;, &#39;Greco&#39;, &#39;Isola&#39;, &#39;Lambrate&#39;, &#39;Lorenteggio&#39;, &#39;Loreto&#39;, &#39;Maciachini&#39;, &#39;Maggiolina&#39;, &#39;Niguarda&#39;, &#39;NoLo&#39;, &#39;Ortica&#39;, &#39;Padova&#39;, &#39;Portello&#39;, &#39;Porta Garibaldi&#39;, &#39;Porta Romana&#39;, &#39;Porta Ticinese&#39;, &#39;Porta Venezia&#39;, &#39;Porta Vittoria&#39;, &#39;Precotto&#39;, &#39;Quartiere degli Olmi&#39;, &#39;Quarto Oggiaro&#39;, &#39;Quinto Romano&#39;, &#39;Quinto Sole&#39;, &#39;Rogoredo&#39;, &#39;San Cristoforo&#39;, &#39;San Siro&#39;, &#39;Santa Giulia&#39;, &#39;Selinunte&#39;, &#39;Stadera&#39;, &#39;Stephenson&#39;, &#39;Stazione Centrale&#39;, &#39;Ticinese&#39;, &#39;Turro&#39;, &#39;Vialba&#39;, &#39;Vigentino&#39;, &#39;Villapizzone&#39;, &#39;Washington&#39;] }&lt;br&gt;&lt;br&gt;
{link to: &#39;4.1&#39;, label: &#39;Avanti&#39;}&lt;br&gt;</tw-passagedata><tw-passagedata pid="52" name="3.1_en" tags="" position="900,1200" size="100,100">~~Welcome dear {nome},~~&lt;br&gt;
~~Enter the neighborhood you wish to administer:~~ {dropdown menu for: &#39;quartieri&#39;, choices: [&#39;Affori&#39;, &#39;Barona&#39;, &#39;Bicocca&#39;, &#39;Bovisa&#39;, &#39;Bruzzano&#39;, &#39;Baggio&#39;, &#39;Cagnola&#39;, &#39;Calvairate&#39;, &#39;Casoretto&#39;, &#39;Città Studi&#39;, &#39;Chinatown&#39;, &#39;Comasina&#39;, &#39;Corvetto&#39;, &#39;Crescenzago&#39;, &#39;Dergano&#39;, &#39;Famagosta&#39;, &#39;Fiera&#39;, &#39;Forlanini&#39;, &#39;Garegnano&#39;, &#39;Garibaldi Repubblica&#39;, &#39;Ghisolfa&#39;, &#39;Gorla&#39;, &#39;Gratosoglio&#39;, &#39;Greco&#39;, &#39;Isola&#39;, &#39;Lambrate&#39;, &#39;Lorenteggio&#39;, &#39;Loreto&#39;, &#39;Maciachini&#39;, &#39;Maggiolina&#39;, &#39;Niguarda&#39;, &#39;NoLo&#39;, &#39;Ortica&#39;, &#39;Padova&#39;, &#39;Portello&#39;, &#39;Porta Garibaldi&#39;, &#39;Porta Romana&#39;, &#39;Porta Ticinese&#39;, &#39;Porta Venezia&#39;, &#39;Porta Vittoria&#39;, &#39;Precotto&#39;, &#39;Quartiere degli Olmi&#39;, &#39;Quarto Oggiaro&#39;, &#39;Quinto Romano&#39;, &#39;Quinto Sole&#39;, &#39;Rogoredo&#39;, &#39;San Cristoforo&#39;, &#39;San Siro&#39;, &#39;Santa Giulia&#39;, &#39;Selinunte&#39;, &#39;Stadera&#39;, &#39;Stephenson&#39;, &#39;Stazione Centrale&#39;, &#39;Ticinese&#39;, &#39;Turro&#39;, &#39;Vialba&#39;, &#39;Vigentino&#39;, &#39;Villapizzone&#39;, &#39;Washington&#39;] }&lt;br&gt;&lt;br&gt;
{link to: &#39;4.1_en&#39;, label: &#39;Next&#39;}&lt;br&gt;</tw-passagedata><tw-passagedata pid="53" name="3.2" tags="" position="425,325" size="100,100">~~Benvenuta cara {nome},~~&lt;br&gt;
~~Inserisci il quartiere che desideri amministrare:~~ {dropdown menu for: &#39;quartieri&#39;, choices: [&#39;Affori&#39;, &#39;Barona&#39;, &#39;Bicocca&#39;, &#39;Bovisa&#39;, &#39;Bruzzano&#39;, &#39;Baggio&#39;, &#39;Cagnola&#39;, &#39;Calvairate&#39;, &#39;Casoretto&#39;, &#39;Città Studi&#39;, &#39;Chinatown&#39;, &#39;Comasina&#39;, &#39;Corvetto&#39;, &#39;Crescenzago&#39;, &#39;Dergano&#39;, &#39;Famagosta&#39;, &#39;Fiera&#39;, &#39;Forlanini&#39;, &#39;Garegnano&#39;, &#39;Garibaldi Repubblica&#39;, &#39;Ghisolfa&#39;, &#39;Gorla&#39;, &#39;Gratosoglio&#39;, &#39;Greco&#39;, &#39;Isola&#39;, &#39;Lambrate&#39;, &#39;Lorenteggio&#39;, &#39;Loreto&#39;, &#39;Maciachini&#39;, &#39;Maggiolina&#39;, &#39;Niguarda&#39;, &#39;NoLo&#39;, &#39;Ortica&#39;, &#39;Padova&#39;, &#39;Portello&#39;, &#39;Porta Garibaldi&#39;, &#39;Porta Romana&#39;, &#39;Porta Ticinese&#39;, &#39;Porta Venezia&#39;, &#39;Porta Vittoria&#39;, &#39;Precotto&#39;, &#39;Quartiere degli Olmi&#39;, &#39;Quarto Oggiaro&#39;, &#39;Quinto Romano&#39;, &#39;Quinto Sole&#39;, &#39;Rogoredo&#39;, &#39;San Cristoforo&#39;, &#39;San Siro&#39;, &#39;Santa Giulia&#39;, &#39;Selinunte&#39;, &#39;Stadera&#39;, &#39;Stephenson&#39;, &#39;Stazione Centrale&#39;, &#39;Ticinese&#39;, &#39;Turro&#39;, &#39;Vialba&#39;, &#39;Vigentino&#39;, &#39;Villapizzone&#39;, &#39;Washington&#39;] }&lt;br&gt;&lt;br&gt;
{link to: &#39;4.2&#39;, label: &#39;Avanti&#39;}&lt;br&gt;</tw-passagedata><tw-passagedata pid="54" name="3.2_en" tags="" position="900,1025" size="100,100">~~Welcome dear {nome},~~&lt;br&gt;
~~Enter the neighborhood you wish to administer:~~ {dropdown menu for: &#39;quartieri&#39;, choices: [&#39;Affori&#39;, &#39;Barona&#39;, &#39;Bicocca&#39;, &#39;Bovisa&#39;, &#39;Bruzzano&#39;, &#39;Baggio&#39;, &#39;Cagnola&#39;, &#39;Calvairate&#39;, &#39;Casoretto&#39;, &#39;Città Studi&#39;, &#39;Chinatown&#39;, &#39;Comasina&#39;, &#39;Corvetto&#39;, &#39;Crescenzago&#39;, &#39;Dergano&#39;, &#39;Famagosta&#39;, &#39;Fiera&#39;, &#39;Forlanini&#39;, &#39;Garegnano&#39;, &#39;Garibaldi Repubblica&#39;, &#39;Ghisolfa&#39;, &#39;Gorla&#39;, &#39;Gratosoglio&#39;, &#39;Greco&#39;, &#39;Isola&#39;, &#39;Lambrate&#39;, &#39;Lorenteggio&#39;, &#39;Loreto&#39;, &#39;Maciachini&#39;, &#39;Maggiolina&#39;, &#39;Niguarda&#39;, &#39;NoLo&#39;, &#39;Ortica&#39;, &#39;Padova&#39;, &#39;Portello&#39;, &#39;Porta Garibaldi&#39;, &#39;Porta Romana&#39;, &#39;Porta Ticinese&#39;, &#39;Porta Venezia&#39;, &#39;Porta Vittoria&#39;, &#39;Precotto&#39;, &#39;Quartiere degli Olmi&#39;, &#39;Quarto Oggiaro&#39;, &#39;Quinto Romano&#39;, &#39;Quinto Sole&#39;, &#39;Rogoredo&#39;, &#39;San Cristoforo&#39;, &#39;San Siro&#39;, &#39;Santa Giulia&#39;, &#39;Selinunte&#39;, &#39;Stadera&#39;, &#39;Stephenson&#39;, &#39;Stazione Centrale&#39;, &#39;Ticinese&#39;, &#39;Turro&#39;, &#39;Vialba&#39;, &#39;Vigentino&#39;, &#39;Villapizzone&#39;, &#39;Washington&#39;] }&lt;br&gt;&lt;br&gt;
{link to: &#39;4.2_en&#39;, label: &#39;Next&#39;}&lt;br&gt;</tw-passagedata><tw-passagedata pid="55" name="4.1" tags="" position="525,200" size="100,100">~~Hai scelto il quartiere~~ **{quartieri}**. ~~Sei sicuro della tua scelta?~~  

{link to: &#39;5.1&#39;, label: &#39;Sì, confermo&#39;}  
{link to: &#39;3.1&#39;, label: &#39;No, voglio cambiare&#39;}</tw-passagedata><tw-passagedata pid="56" name="4.1_en" tags="" position="1100,1200" size="100,100">~~You have chosen the neighborhood {quartieri}. ~~Are you sure about your choice?~~

{link to: &#39;5.1_en&#39;, label: &#39;Yes, I confirm&#39;}
{link to: &#39;3.1_en&#39;, label: &#39;No, I want to change&#39;}</tw-passagedata><tw-passagedata pid="57" name="4.2" tags="" position="550,325" size="100,100">~~Hai scelto il quartiere~~ **{quartieri}**. ~~Sei sicura della tua scelta~~?  

{link to: &#39;5.2&#39;, label: &#39;Sì, confermo&#39;}  
{link to: &#39;3.2&#39;, label: &#39;No, voglio cambiare&#39;}</tw-passagedata><tw-passagedata pid="58" name="4.2_en" tags="" position="1100,1025" size="100,100">~~You have chosen the neighborhood~~ **{quartieri}**. ~~Are you sure about your choice~~?

{link to: &#39;5.2_en&#39;, label: &#39;Yes, I confirm&#39;}
{link to: &#39;3.2_en&#39;, label: &#39;No, I want to change&#39;}</tw-passagedata><tw-passagedata pid="59" name="5.1" tags="" position="675,200" size="100,100">[after 1 second]
{nome} è un giovane studente cresciuto lontano da Milano, la città che un tempo apparteneva alla sua famiglia. Figlio di un ex dittatore caduto sotto il peso della rivoluzione, è stato educato con l’ombra del passato sempre alle sue spalle.&lt;br&gt; 
[after 3 second]
Sua madre gli ha insegnato a credere nella pace e nella democrazia, mentre il mondo gli ha ricordato che il suo nome è sinonimo di tirannia.&lt;br&gt;
&lt;br&gt;
[after 6 second]
Non ha mai conosciuto davvero il potere, solo le sue conseguenze. &lt;br&gt;
[after 7 second]
Non ha mai comandato, solo ascoltato storie su chi lo faceva. &lt;br&gt;
[after 8 second]
Per anni ha vissuto nell’anonimato, imparando a essere un estraneo nella propria storia, a nascondere il sangue che scorre nelle sue vene. &lt;br&gt;
[after 9 second]
Ma sotto l’apparenza di un ragazzo normale, dietro gli occhi di un osservatore silenzioso, si cela qualcosa di più grande: un&#39;eredità spezzata, un fuoco che non si è mai spento del tutto.&lt;br&gt;
&lt;br&gt;
[after 14 second]
{nome} non è un uomo di ideali, né un soldato di partito.&lt;br&gt;
[after 15 second]
È un prodotto della divisione, cresciuto tra due mondi senza appartenere a nessuno. &lt;br&gt;
[after 16 second]
Ma quando torna a Milano e vede ciò che il comunismo ha fatto alla città, comprende una verità innegabile: senza ordine, la libertà è solo un’illusione.&lt;br&gt;
[after 20 second]
Forse il passato di suo padre è una condanna. O forse, è una guida.&lt;br&gt;
&lt;br&gt;
{link to: &#39;inizio.1&#39;, label: &#39;Comincia la tua avventura&#39;}
[continued]</tw-passagedata><tw-passagedata pid="60" name="5.1_en" tags="" position="1300,1200" size="100,100">[after 1 second]
{nome} is a young student who grew up far from Milan, the city that once belonged to his family. The son of a former dictator who fell under the weight of the revolution, he was raised with the shadow of the past always behind him.&lt;br&gt;
[after 3 second]
His father taught him to believe in peace and democracy, while the world reminded him that his name is synonymous with tyranny.&lt;br&gt;
&lt;br&gt;
[after 6 second]
He has never truly known power, only its consequences. &lt;br&gt;
[after 7 second]
He has never commanded, only listened to stories about those who did. &lt;br&gt;
[after 8 second]
For years he has lived in anonymity, learning to be a stranger in his own history, to hide the blood that flows in his veins. &lt;br&gt;
[after 9 seconds]
But beneath the appearance of a normal boy, behind the eyes of a silent observer, something bigger is hidden: a broken legacy, a fire that has never completely died out.&lt;br&gt;
&lt;br&gt;
[after 14 seconds]
{name} is not a man of ideals, nor a party soldier.&lt;br&gt;
[after 15 seconds]
He is a product of division, raised between two worlds without belonging to either. &lt;br&gt;
[after 16 seconds]
But when he returns to Milan and sees what communism has done to the city, he understands an undeniable truth: without order, freedom is just an illusion.&lt;br&gt;
[after 20 seconds]
Perhaps his father&#39;s past is a condemnation. Or perhaps, it is a guide.&lt;br&gt;
&lt;br&gt;
{link to: &#39;inizio.1_en&#39;, label: &#39;Begin your Adventure&#39;}
[continued]</tw-passagedata><tw-passagedata pid="61" name="5.2" tags="" position="675,350" size="100,100">[after 1 second]
~~{nome} è una giovane studentessa cresciuta lontano da Milano, la città che un tempo apparteneva alla sua famiglia. Figlia di un ex dittatore caduto sotto il peso della rivoluzione, è stata educata con l’ombra del passato sempre alle sue spalle.~~

[after 3 second]
~~Suo padre le ha insegnato a credere nella pace e nella democrazia, mentre il mondo le ha ricordato che il suo nome è sinonimo di tirannia.~~

[after 6 second]
~~Non ha mai conosciuto davvero il potere, solo le sue conseguenze.~~

[after 7 second]
~~Non ha mai comandato, solo ascoltato storie su chi lo faceva.~~

[after 8 second]
~~Per anni ha vissuto nell’anonimato, imparando a essere un’estranea nella propria storia, a nascondere il sangue che scorre nelle sue vene.~~

[after 9 second]
~~Ma sotto l’apparenza di una ragazza normale, dietro gli occhi di un’osservatrice silenziosa, si cela qualcosa di più grande: un&#39;eredità spezzata, un fuoco che non si è mai spento del tutto.~~

[after 14 second]
~~{nome} non è una donna di ideali, né una soldatessa di partito.~~

[after 15 second]
~~È un prodotto della divisione, cresciuta tra due mondi senza appartenere a nessuno.~~

[after 16 second]
~~Ma quando torna a Milano e vede ciò che il comunismo ha fatto alla città, comprende una verità innegabile: senza ordine, la libertà è solo un’illusione.~~

[after 20 second]
Forse il passato di suo padre è una condanna. O forse, è una guida.

{link to: &#39;inizio.2&#39;, label: &#39;Comincia la tua avventura&#39;}
[continued]</tw-passagedata><tw-passagedata pid="62" name="5.2_en" tags="" position="1300,1025" size="100,100">[after 1 second]
~~{nome} is a young student who grew up far from Milan, the city that once belonged to her family. Daughter of a former dictator who fell under the weight of the revolution, she was raised with the shadow of the past always at her back.~~

[after 3 seconds]
~~Her father taught her to believe in peace and democracy, while the world reminded her that her name is synonymous with tyranny.~~

[after 6 seconds]
~~She has never truly known power, only its consequences.~~

[after 7 seconds]
~~She has never commanded, only listened to stories of those who did.~~

[after 8 seconds]
~~For years she has lived in anonymity, learning to be an outsider in her own history, to hide the blood that flows in her veins.~~

[after 9 seconds]
~~But beneath the appearance of a normal girl, behind the eyes of a silent observer, lies something greater: a broken legacy, a fire that has never completely died.~~

[after 14 second]
~~{nome} is not a woman of ideals, nor a party soldier.~~

[after 15 seconds]
~~She is a product of division, raised between two worlds without belonging to either.~~

[after 16 seconds]
~~But when she returns to Milan and sees what communism has done to the city, she understands an undeniable truth: without order, freedom is just an illusion.~~

[after 20 seconds]
Perhaps her father&#39;s past is a condemnation. Or perhaps, it is a guide.

{link to: &#39;inizio.2_en&#39;, label: &#39;Begin your Adventure&#39;}
[continued]</tw-passagedata><tw-passagedata pid="63" name="contatti" tags="" position="750,475" size="100,100"></tw-passagedata><tw-passagedata pid="64" name="crediti_en" tags="" position="600,625" size="100,100">**THE RESCUE OF MILAN**&lt;br&gt;&lt;br&gt;
**Made by Alex, Lorenzo and Leo** &lt;br&gt;&lt;br&gt;
~~This story was created to entertain and stimulate critical thinking through a parodic and satirical lens. Alex, Lorenzo and Leo&#39;s work aims to explore sensitive topics in a provocative way, without ever falling into the promotion of extremist ideologies or movements. The use of characters, symbols and historical situations is purely a narrative device to discuss and reflect, without any intention of offending.~~ &lt;br&gt;&lt;br&gt;
~~Satire, by its nature, seeks to unmask the contradictions and weaknesses of any system, and in this case we aim to do so through a story that exaggerates, mocks and questions issues often treated seriously, but without ever taking a specific political or ideological position.~~ &lt;br&gt;&lt;br&gt;
~~Milan, with its central role in Italian political and social history, is the hub of this narrative. The city is represented as a stage of contradictions, where opposing ideologies clash, mix and transform over time. From its iconic squares to the less traveled alleys, Milan becomes the living and pulsating backdrop in which Giovanni moves, facing challenges that mix reality and fiction in a journey that, despite being surreal, has deep roots in the history of the city.~~ &lt;br&gt;&lt;br&gt;
{link to: &#39;1&#39;, label: &#39;Back to Home&#39;} &lt;br&gt;
{link to: &#39;contacts&#39;, label: &#39;Contacts&#39;}</tw-passagedata><tw-passagedata pid="65" name="crediti_it" tags="" position="575,500" size="100,100">**IL SALVATAGGIO DI MILANO**&lt;br&gt;&lt;br&gt;
**Realizzato da Alex, Lorenzo e Leo**  &lt;br&gt;&lt;br&gt;
~~Questa storia è stata creata per intrattenere e stimolare il pensiero critico attraverso una lente parodistica e satirica. Il lavoro di Alex, Lorenzo e Leo ha l&#39;obiettivo di esplorare temi delicati in modo provocatorio, senza mai scadere nella promozione di ideologie o movimenti estremisti. L&#39;uso di personaggi, simboli e situazioni storiche è puramente un espediente narrativo per discutere e riflettere, senza alcuna intenzione di offendere.~~  &lt;br&gt;&lt;br&gt;
~~La satira, per sua natura, cerca di smascherare le contraddizioni e i punti deboli di qualsiasi sistema, e in questo caso ci proponiamo di farlo attraverso un racconto che esagera, irride e mette in discussione temi spesso trattati in modo serio, ma senza mai prendere una posizione politica o ideologica specifica.~~  &lt;br&gt;&lt;br&gt;
~~Milano, con il suo ruolo centrale nella storia politica e sociale italiana, è il fulcro di questa narrazione. La città viene rappresentata come un palcoscenico di contraddizioni, dove ideologie opposte si scontrano, si mescolano e si trasformano nel tempo. Dalle sue piazze iconiche ai vicoli meno battuti, Milano diventa lo sfondo vivo e pulsante in cui Giovanni si muove, affrontando sfide che mescolano realtà e finzione in un viaggio che, pur essendo surreale, ha radici profonde nella storia della città.~~  &lt;br&gt;&lt;br&gt;
{link to: &#39;1&#39;, label: &#39;Torna alla Home&#39;}  &lt;br&gt;</tw-passagedata><tw-passagedata pid="66" name="disclaimer_en" tags="" position="175,850" size="100,100">**DISCLAIMER**&lt;br&gt;&lt;br&gt;
~~The following content deals with sensitive topics such as fascism and communism.
It is important to underline that the intent of this story is purely illustrative and comical.~~

~~There is no intention to evoke, promote or support political ideologies, movements or historical groups linked to these terms. All references to fascists and communists are used in a parodic way, with the sole purpose of generating humor.~~

~~The authors do not intend in any way to offend, provoke or create tension between individuals or groups. This story should be considered as a satirical representation and not as a political stance.~~

~~Any resemblance to real people, events or situations is purely coincidental and unintentional. The authors decline all responsibility for misinterpretations or negative reactions resulting from the use of this content.~~&lt;br&gt;&lt;br&gt;

{link to: &#39;1&#39;, label: &#39;Back to Home&#39;}</tw-passagedata><tw-passagedata pid="67" name="disclaimer_it" tags="" position="50,775" size="100,100">**DISCLAIMER**
~~Il seguente contenuto tratta di temi sensibili come fascismo e comunismo.  
È importante sottolineare che l&#39;intento di questa storia è puramente illustrativo e comico.~~  

~~Non vi è alcuna volontà di evocare, promuovere o supportare ideologie politiche, movimenti o gruppi storici legati a tali termini. Tutti i riferimenti a fascisti e comunisti sono utilizzati in chiave parodistica, con l’unico scopo di generare umorismo.~~  

~~Gli autori non intendono in alcun modo offendere, provocare o creare tensioni tra individui o gruppi. Questa storia va considerata come una rappresentazione satirica e non come una presa di posizione politica.~~  

~~Qualsiasi somiglianza con persone, eventi o situazioni reali è puramente casuale e non intenzionale. Gli autori declinano ogni responsabilità per interpretazioni errate o reazioni negative derivanti dalla fruizione di questo contenuto.~~  

{link to: &#39;1&#39;, label: &#39;Torna alla Home&#39;}</tw-passagedata><tw-passagedata pid="68" name="end" tags="" position="1175,25" size="100,100">~~Thank you so much for playing our story!~~&lt;br&gt;
~~We hope this adventure has given you a pleasant, engaging moment — and maybe even a few unexpected surprises. Every choice you made shaped a unique path, but who knows how many other hidden routes are still waiting to be explored? If you&#39;d like to discover new outcomes, try a different strategy, or simply relive the experience from a fresh perspective, you can start over by pressing the button below.~~&lt;br&gt;&lt;br&gt;
~~Also, if you&#39;d like to help us improve, we&#39;ve prepared a short feedback survey. It only takes a few minutes to share your thoughts, and every response is incredibly valuable to us as we work to make the game even better. You can access the survey at the link below:~~&lt;br&gt;
https://www.leodev.it/gradimento-storia&lt;br&gt;&lt;br&gt;

{embed image: &#39;../immagini_imgur/83B3U0n.jpeg&#39;}

{link to: &#39;1&#39;, label: &#39;Play Again&#39;}</tw-passagedata><tw-passagedata pid="69" name="end1" tags="" position="525,1425" size="100,100">~~You decide not to go to your father. You stay in the neighborhood, with its familiar faces and the rhythm of daily life that flows, but something inside you seems different. Without that visit, without that confrontation, you remain tied to the past, trapped in a routine that no longer belongs to you completely.~~

~~By not going to your father, you remain an ordinary citizen in the {quartieri} neighborhood.~~

**NOTHING HAS CHANGED**

{link to: &#39;end&#39;, label: &#39;Next&#39;}</tw-passagedata><tw-passagedata pid="70" name="end2" tags="" position="2350,1100" size="100,100">~~{name}, you have succeeded!~~&lt;br&gt;
~~You have reunified Milan under your dictatorship, with determination and steadfastness.~~&lt;br&gt;

[after 1 second]
~~Every step you have taken, every sacrifice you have made, has led you to this decisive moment.~~ &lt;br&gt;
~~The city, once divided, is now under your control, and the future of Milan is in your hands.~~&lt;br&gt;

[after 3 seconds]
~~But your victory is not just a conquest of power, but a manifestation of will, a test of your determination to do what you believe is necessary.~~ &lt;br&gt;

[after 5 seconds]
~~The city now follows your command, but the real challenge is maintaining order, stability, and cohesion in a world that has been changed forever.~~ &lt;br&gt;

[after 7 seconds]
~~Your leadership will be tested in every decision you make, but you have achieved what you you were looking for: control of Milan.~~&lt;br&gt;

[after 9 seconds]
~~However, power has its price, and the future you have built may never be as stable as it seems. Your dictatorship is only the beginning of a new era, but with it you also bring new challenges.~~&lt;br&gt;

[after 10 seconds]
~~Prepare yourself, because your fight is not over, but the path you have taken has led you here.~~ &lt;br&gt;

**YOU HAVE REACHED YOUR GOAL**&lt;br&gt;
{link to: &#39;end&#39;, label: &#39;Next&#39;}</tw-passagedata><tw-passagedata pid="71" name="end3" tags="" position="2550,1100" size="100,100">~~{name}, you did not take up your father&#39;s weapons...~~&lt;br&gt;
~~You perished while trying to carry out the revolution.~~&lt;br&gt;

[after 1 second]
~~Your decision not to fight with force, to seek peaceful solutions, led you to a tragic end.~~&lt;br&gt;

[after 3 seconds]
~~The revolution did not have the hoped-for success, and you fell in the attempt to change Milan, leaving behind a city that remains divided and at the mercy of its internal struggles.~~&lt;br&gt;

[after 5 seconds]
~~The price you paid for your choice was high, but your death also represents the end of a hope that failed to flourish.~~&lt;br&gt;

[after 7 seconds]
~~Now, Milan continues to suffer under the same tensions and conflicts, and your memory becomes part of a story that has never been written, but that everyone remembers as a courageous but failed.~~&lt;br&gt;

[after 9 seconds]
~~Your sacrifice, unfortunately, was not enough to change the course of events. Your life was extinguished without having seen the result of your dream.~~&lt;br&gt;

**YOU&#39;RE DEAD**&lt;br&gt;
{link to: &#39;end&#39;, label: &#39;Next&#39;}</tw-passagedata><tw-passagedata pid="72" name="end4" tags="" position="2350,1225" size="100,100">~~You are exiled for life on a remote island in the sea of ​​Iceland, a remote and inhospitable place where survival seems impossible.~~&lt;br&gt;
~~There is no one to talk to, no resources to feed yourself or take shelter, only the frozen wasteland of Iceland that surrounds you.~~&lt;br&gt;
~~The days pass slowly, the cold and loneliness wear you down. Your mind begins to falter while your body grows weaker and weaker.~~&lt;br&gt;&lt;br&gt;

**YOU ARE DEAD, MISSION FAILED**&lt;br&gt;&lt;br&gt;

{link to: &#39;end&#39;, label: &#39;Next&#39;}</tw-passagedata><tw-passagedata pid="73" name="end5" tags="" position="2550,1225" size="100,100">~~You decide to flee, hoping to save yourself and escape the grip of the rebels. But even in your escape, Milan slips from your hands.~~&lt;br&gt;
~~The city you had reunified is now divided, without a strong leader to guide it. Chaos and confusion reign, and Milan will never be the same again.~~&lt;br&gt;
~~You walk away, but the weight of defeat is great. Your mission, although it began with noble intentions, has not had the desired result.~~&lt;br&gt;&lt;br&gt;

**YOU FAILED**&lt;br&gt;

{link to: &#39;end&#39;, label: &#39;Next&#39;}</tw-passagedata><tw-passagedata pid="74" name="end6" tags="" position="2550,1375" size="100,100">~~You failed to resist the rebels&#39; assault. Your determination was tested, but in the end the fight was too hard.~~&lt;br&gt;
~~Milan will not have the future you had hoped for. Your death will not change anything, and everything will remain as before, with the chaos that envelops the city.~~&lt;br&gt;
~~The sacrifice you made did not lead to a solution, and Milan continues to struggle with its divisions.~~&lt;br&gt;&lt;br&gt;

**THE END, YOU&#39;RE DEAD**&lt;br&gt;

{link to: &#39;end&#39;, label: &#39;Continue&#39;}</tw-passagedata><tw-passagedata pid="75" name="fine" tags="" position="1425,25" size="100,100">~~Grazie di cuore per aver giocato alla nostra storia!~~&lt;br&gt;
~~Speriamo che questa avventura ti abbia offerto un momento piacevole, stimolante e magari anche qualche sorpresa inaspettata. Ogni scelta che hai preso ha contribuito a creare un percorso unico, ma chissà quante altre strade alternative ti aspettano ancora. Se desideri scoprire nuovi esiti, cambiare strategia o semplicemente rivivere l’esperienza da una nuova prospettiva, puoi ricominciare da capo premendo il pulsante qui sotto.~~&lt;br&gt;&lt;br&gt;
~~Inoltre, se ti fa piacere aiutarci a migliorare, abbiamo preparato un breve test di gradimento. Bastano pochi minuti per condividere il tuo parere, e ogni feedback per noi è prezioso per rendere il gioco sempre migliore. Puoi accedere al questionario cliccando su questo link:~~&lt;br&gt;
https://www.leodev.it/gradimento-storia&lt;br&gt;&lt;br&gt;

{embed image: &#39;../immagini_imgur/83B3U0n.jpeg&#39;}

{link to: &#39;1&#39;, label: &#39;Rigioca&#39;}</tw-passagedata><tw-passagedata pid="76" name="fine1" tags="" position="1325,375" size="100,100">~~Decidi di non andare da tuo padre. Rimani nel quartiere, con i suoi volti familiari e il ritmo della vita quotidiana che scorre, ma qualcosa dentro di te sembra diverso. Senza quella visita, senza quel confronto, resti legato al passato, intrappolato in una routine che non ti appartiene più completamente.~~  

~~Non recandoti dal padre, rimani un comune cittadino del quartiere{quartieri}.~~  

**NULLA È CAMBIATO**  

{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="77" name="fine2.1" tags="" position="2000,150" size="100,100">~~{nome}, sei riuscito nel tuo intento!~~&lt;br&gt;
~~Hai riunificato Milano sotto la tua dittatura, con determinazione e fermezza.~~&lt;br&gt;

[after 1 second]
~~Ogni passo che hai compiuto, ogni sacrificio che hai fatto, ti ha condotto a questo momento decisivo.~~ &lt;br&gt;
~~La città, un tempo divisa, ora è sotto il tuo controllo, e il futuro di Milano è nelle tue mani.~~&lt;br&gt;

[after 3 second]
~~Ma la tua vittoria non è solo una conquista di potere, ma una manifestazione di volontà, una prova della tua determinazione a fare ciò che credi necessario.~~ &lt;br&gt;

[after 5 second]
~~La città ora segue il tuo comando, ma la vera sfida è mantenere l&#39;ordine, la stabilità, e la coesione in un mondo che è stato cambiato per sempre.~~ &lt;br&gt;

[after 7 second]
~~La tua leadership sarà messa alla prova in ogni decisione che prenderai, ma hai ottenuto ciò che cercavi: il controllo di Milano.~~&lt;br&gt;

[after 9 second]
~~Tuttavia, il potere ha il suo prezzo, e il futuro che hai costruito potrebbe non essere mai così stabile come sembra. La tua dittatura è solo l&#39;inizio di una nuova era, ma con essa porti anche nuove sfide.~~&lt;br&gt;

[after 10 second]
~~Preparati, perché la tua lotta non è finita, ma il cammino che hai intrapreso ti ha condotto fino a qui.~~ &lt;br&gt;

**HAI RAGGIUNTO IL TUO OBBIETTIVO**&lt;br&gt;
{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="78" name="fine2.2" tags="" position="1975,575" size="100,100">~~{nome}, sei riuscita nel tuo intento!~~&lt;br&gt;
~~Hai riunificata Milano sotto la tua dittatura, con determinazione e fermezza.~~&lt;br&gt;

[after 1 second]
~~Ogni passo che hai compiuto, ogni sacrificio che hai fatto, ti ha condotto a questo momento decisivo.~~ &lt;br&gt;
~~La città, un tempo divisa, ora è sotto il tuo controllo, e il futuro di Milano è nelle tue mani.~~&lt;br&gt;

[after 3 second]
~~Ma la tua vittoria non è solo una conquista di potere, ma una manifestazione di volontà, una prova della tua determinazione a fare ciò che credi necessario.~~ &lt;br&gt;

[after 5 second]
~~La città ora segue il tuo comando, ma la vera sfida è mantenere l&#39;ordine, la stabilità, e la coesione in un mondo che è stato cambiato per sempre.~~ &lt;br&gt;

[after 7 second]
~~La tua leadership sarà messa alla prova in ogni decisione che prenderai, ma hai ottenuto ciò che cercavi: il controllo di Milano.~~&lt;br&gt;

[after 9 second]
~~Tuttavia, il potere ha il suo prezzo, e il futuro che hai costruito potrebbe non essere mai così stabile come sembra. La tua dittatura è solo l&#39;inizio di una nuova era, ma con essa porti anche nuove sfide.~~&lt;br&gt;

[after 10 second]
~~Preparati, perché la tua lotta non è finita, ma il cammino che hai intrapreso ti ha condotto fino a qui.~~ &lt;br&gt;

**HAI RAGGIUNTO IL TUO OBBIETTIVO**&lt;br&gt;
{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="79" name="fine3.1" tags="" position="2000,275" size="100,100">~~{nome}, non hai preso le armi di tuo padre...~~&lt;br&gt;
~~Sei perito durante il tentativo di attuare la rivoluzione.~~&lt;br&gt;

[after 1 second]
~~La tua decisione di non combattere con la forza, di cercare soluzioni pacifiche, ti ha portato a una tragica fine.~~&lt;br&gt;

[after 3 second]
~~La rivoluzione non ha avuto il successo sperato, e tu sei caduto nel tentativo di cambiare Milano, lasciando dietro di te una città che rimane divisa e in balia delle sue lotte interne.~~&lt;br&gt;

[after 5 second]
~~Il prezzo che hai pagato per la tua scelta è stato alto, ma la tua morte rappresenta anche la fine di una speranza che non è riuscita a fiorire.~~&lt;br&gt;

[after 7 second]
~~Ora, Milano continua a soffrire sotto le stesse tensioni e conflitti, e la tua memoria diventa parte di una storia che non è mai stata scritta, ma che tutti ricordano come un tentativo coraggioso ma fallito.~~&lt;br&gt;

[after 9 second]
~~Il tuo sacrificio, purtroppo, non è stato sufficiente a cambiare il corso degli eventi. La tua vita si è spenta senza aver visto il risultato del tuo sogno.~~&lt;br&gt;

**SEI MORTO**&lt;br&gt;
{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="80" name="fine3.2" tags="" position="1975,700" size="100,100">~~{nome}, non hai preso le armi di tuo padre...~~&lt;br&gt;
~~Sei perita durante il tentativo di attuare la rivoluzione.~~&lt;br&gt;

[after 1 second]
~~La tua decisione di non combattere con la forza, di cercare soluzioni pacifiche, ti ha portato a una tragica fine.~~&lt;br&gt;

[after 3 second]
~~La rivoluzione non ha avuto il successo sperato, e tu sei caduta nel tentativo di cambiare Milano, lasciando dietro di te una città che rimane divisa e in balia delle sue lotte interne.~~&lt;br&gt;

[after 5 second]
~~Il prezzo che hai pagato per la tua scelta è stato alto, ma la tua morte rappresenta anche la fine di una speranza che non è riuscita a fiorire.~~&lt;br&gt;

[after 7 second]
~~Ora, Milano continua a soffrire sotto le stesse tensioni e conflitti, e la tua memoria diventa parte di una storia che non è mai stata scritta, ma che tutti ricordano come un tentativo coraggioso ma fallito.~~&lt;br&gt;

[after 9 second]
~~Il tuo sacrificio, purtroppo, non è stato sufficiente a cambiare il corso degli eventi. La tua vita si è spenta senza aver visto il risultato del tuo sogno.~~&lt;br&gt;

**SEI MORTA**&lt;br&gt;
{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="81" name="fine4.1" tags="" position="2325,325" size="100,100">~~Vieni esiliato a vita su un&#39;isola sperduta nel mare dell&#39;Islanda, un luogo remoto e inospitale dove la sopravvivenza sembra impossibile.~~&lt;br&gt;
~~Non c&#39;è nessuno con cui parlare, nessuna risorsa per nutrirsi o rifugiarsi, solo il deserto gelido dell&#39;Islanda che ti circonda.~~&lt;br&gt;
~~I giorni passano lentamente, il freddo e la solitudine ti logorano. La tua mente inizia a vacillare mentre il corpo si indebolisce sempre di più.~~&lt;br&gt;&lt;br&gt;

**HA FALLITO LA MISSIONE**&lt;br&gt;&lt;br&gt;

{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="82" name="fine4.2" tags="" position="2350,750" size="100,100">~~Vieni esiliata a vita su un&#39;isola sperduta nel mare dell&#39;Islanda, un luogo remoto e inospitale dove la sopravvivenza sembra impossibile.~~&lt;br&gt;
~~Non c&#39;è nessuno con cui parlare, nessuna risorsa per nutrirsi o rifugiarsi, solo il deserto gelido dell&#39;Islanda che ti circonda.~~&lt;br&gt;
~~I giorni passano lentamente, il freddo e la solitudine ti logorano. La tua mente inizia a vacillare mentre il corpo si indebolisce sempre di più.~~&lt;br&gt;&lt;br&gt;

**HAI FALLITO LA MISSIONE**&lt;br&gt;&lt;br&gt;

{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="83" name="fine5.1" tags="" position="2475,425" size="100,100">~~Hai deciso di fuggire, sperando di salvare te stesso e di sfuggire alla morsa dei ribelli. Ma anche nella fuga, Milano ti sfugge dalle mani.~~&lt;br&gt;
~~La città che avevi riunificato è ora divisa, senza un leader forte a guidarla. Il caos e la confusione regnano, e Milano non sarà mai più la stessa.~~&lt;br&gt;
~~Ti allontani, ma il peso della sconfitta è grande. La tua missione, sebbene fosse iniziata con nobili intenzioni, non ha avuto il risultato sperato.~~&lt;br&gt;&lt;br&gt;

**HAI FALLITO**&lt;br&gt;

{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="84" name="fine5.2" tags="" position="2550,775" size="100,100">~~Hai deciso di fuggire, sperando di salvare te stessa e di sfuggire alla morsa dei ribelli. Ma anche nella fuga, Milano ti sfugge dalle mani.~~&lt;br&gt;
~~La città che avevi riunificato è ora divisa, senza un leader forte a guidarla. Il caos e la confusione regnano, e Milano non sarà mai più la stessa.~~&lt;br&gt;
~~Ti allontani, ma il peso della sconfitta è grande. La tua missione, sebbene fosse iniziata con nobili intenzioni, non ha avuto il risultato sperato.~~&lt;br&gt;&lt;br&gt;

**FINE, HAI FALLITO**&lt;br&gt;

{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="85" name="fine6.1" tags="" position="2475,550" size="100,100">~~Non sei riuscito a resistere all&#39;assalto dei ribelli. La tua determinazione è stata messa alla prova, ma alla fine la lotta è stata troppo dura.~~&lt;br&gt;
~~Milano non avrà il futuro che avevi sperato. La tua morte non cambierà nulla, e tutto rimarrà come prima, con il caos che avvolge la città.~~&lt;br&gt;
~~Il sacrificio che hai fatto non ha portato a una soluzione, e Milano continua a lottare con le sue divisioni.~~&lt;br&gt;&lt;br&gt;

**SEI MORTO**&lt;br&gt;

{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="86" name="fine6.2" tags="" position="2550,925" size="100,100">~~Non sei riuscita a resistere all&#39;assalto dei ribelli. La tua determinazione è stata messa alla prova, ma alla fine la lotta è stata troppo dura.~~&lt;br&gt;
~~Milano non avrà il futuro che avevi sperato. La tua morte non cambierà nulla, e tutto rimarrà come prima, con il caos che avvolge la città.~~&lt;br&gt;
~~Il sacrificio che hai fatto non ha portato a una soluzione, e Milano continua a lottare con le sue divisioni.~~&lt;br&gt;&lt;br&gt;

**FINE, SEI MORTA**&lt;br&gt;

{link to: &#39;fine&#39;, label: &#39;Avanti&#39;}</tw-passagedata><tw-passagedata pid="87" name="inizio.1" tags="" position="850,200" size="100,100">*Stai tornando a Milano dopo tanto tempo...*  

~~L&#39;aria era densa di nostalgia mentre attraversavi le strade familiari, ora mutate dal tempo e dalla storia. Gli edifici, un tempo testimoni silenziosi del passato, sembravano ora impregnati di una nuova vita, ma anche di una pesante consapevolezza.~~ 

~~La città che avevi conosciuto era cambiata. Lo avvertivi in ogni angolo, in ogni sguardo. I cartelloni, le bandiere e i murales parlavano di un&#39;ideologia dominante, di una trasformazione radicale. Mentre i tuoi passi riecheggiavano sui ciottoli delle strade antiche, una strana sensazione di straniamento e familiarità ti avvolgeva.~~  

*È allora che ti rendi conto... Milano è governata dai comunisti.*  

{link to: &#39;inizio2.1&#39;, label: &#39;Cosa è successo?&#39;}</tw-passagedata><tw-passagedata pid="88" name="inizio.1_en" tags="" position="1475,1200" size="100,100">*You are returning to Milan after a long time...*

~~The air was thick with nostalgia as you walked through the familiar streets, now changed by time and history. The buildings, once silent witnesses of the past, now seemed imbued with a new life, but also with a heavy awareness.~~

~~The city you had known had changed. You felt it in every corner, in every glance. The billboards, flags and murals spoke of a dominant ideology, of a radical transformation. As your footsteps echoed on the cobblestones of the ancient streets, a strange feeling of estrangement and familiarity enveloped you.~~

*It is then that you realize... Milan is governed by the communists.*

{link to: &#39;inizio2.1_en&#39;, label: &#39;What happened?&#39;}</tw-passagedata><tw-passagedata pid="89" name="inizio.2" tags="" position="850,350" size="100,100">*Stai tornando a Milano dopo tanto tempo...*  

~~L&#39;aria era densa di nostalgia mentre attraversavi le strade familiari, ora mutate dal tempo e dalla storia. Gli edifici, un tempo testimoni silenziosi del passato, sembravano ora impregnati di una nuova vita, ma anche di una pesante consapevolezza.~~ 

~~La città che avevi conosciuto era cambiata. Lo avvertivi in ogni angolo, in ogni sguardo. I cartelloni, le bandiere e i murales parlavano di un&#39;ideologia dominante, di una trasformazione radicale. Mentre i tuoi passi riecheggiavano sui ciottoli delle strade antiche, una strana sensazione di straniamento e familiarità ti avvolgeva.~~  

*È allora che ti rendi conto... Milano è governata dai comunisti.*  

{link to: &#39;inizio2.2&#39;, label: &#39;Cosa è successo?&#39;}</tw-passagedata><tw-passagedata pid="90" name="inizio.2_en" tags="" position="1475,1025" size="100,100">*You are returning to Milan after a long time...*

~~The air was thick with nostalgia as you walked through the familiar streets, now changed by time and history. The buildings, once silent witnesses of the past, now seemed imbued with a new life, but also with a heavy awareness.~~

~~The city you had known had changed. You felt it in every corner, in every glance. The billboards, flags and murals spoke of a dominant ideology, of a radical transformation. As your footsteps echoed on the cobblestones of the ancient streets, a strange feeling of estrangement and familiarity enveloped you.~~

*It is then that you realize... Milan is governed by the communists.*

{link to: &#39;inizio2.2_en&#39;, label: &#39;What happened?&#39;}</tw-passagedata><tw-passagedata pid="91" name="inizio2.1" tags="" position="1000,200" size="100,100">[after 1 second]
~~Ti fermasti un attimo, colto di sorpresa dall&#39;inaspettato. I tuoi occhi si posarono sui manifesti propagandistici che tappezzavano i muri e gli edifici, testimoni silenziosi di un cambiamento radicale.~~  
[after 5 second]
~~Colori vivaci e slogan perentori dichiaravano l&#39;ascesa del nuovo regime. La falce e il martello, simboli che un tempo avevi visto solo nei libri di storia, ora dominavano il panorama urbano, sostituendo i vecchi emblemi della città che ricordavi.~~  
[after 9 second]
~~Non era solo una questione politica: Milano sembrava riplasmata in qualcosa di nuovo, di irriconoscibile. Strade, edifici, persino le persone trasmettevano un&#39;energia diversa, un&#39;aria di rivoluzione e disciplina.~~  
[after 14 second]
~~Le tue emozioni erano contrastanti. Da un lato, la curiosità di comprendere questa nuova realtà, di scoprire cosa fosse accaduto durante la tua assenza. Dall&#39;altro, la nostalgia struggente per un passato che sembrava ormai svanito nel nulla.~~  
[after 18 second]
{link to: &#39;inizio3.1&#39;, label: &#39;Continua a investigare&#39;}  
[continued]</tw-passagedata><tw-passagedata pid="92" name="inizio2.1_en" tags="" position="1650,1200" size="100,100">[after 1 second]
~~You stopped for a moment, taken aback by the unexpected. Your eyes rested on the propaganda posters that covered the walls and buildings, silent witnesses of a radical change.~~
[after 5 seconds]
~~Bright colors and peremptory slogans declared the rise of the new regime. The hammer and sickle, symbols you had once only seen in history books, now dominated the urban landscape, replacing the old emblems of the city you remembered.~~
[after 9 seconds]
~~It wasn&#39;t just a political issue: Milan seemed to have been reshaped into something new, unrecognizable. Streets, buildings, even people conveyed a different energy, an air of revolution and discipline.~~
[after 14 seconds]
~~Your emotions were mixed. On one hand, the curiosity to understand this new reality, to discover what had happened during your absence. On the other hand, the poignant nostalgia for a past that seemed to have vanished into thin air.~~
[after 18 seconds]
{link to: &#39;inizio3.1_en&#39;, label: &#39;Keep investigating&#39;}
[continued]</tw-passagedata><tw-passagedata pid="93" name="inizio2.2" tags="" position="1000,350" size="100,100">[after 1 second]
~~Ti fermasti un attimo, colto di sorpresa dall&#39;inaspettato. I tuoi occhi si posarono sui manifesti propagandistici che tappezzavano i muri e gli edifici, testimoni silenziosi di un cambiamento radicale.~~  
[after 5 second]
~~Colori vivaci e slogan perentori dichiaravano l&#39;ascesa del nuovo regime. La falce e il martello, simboli che un tempo avevi visto solo nei libri di storia, ora dominavano il panorama urbano, sostituendo i vecchi emblemi della città che ricordavi.~~  
[after 9 second]
~~Non era solo una questione politica: Milano sembrava riplasmata in qualcosa di nuovo, di irriconoscibile. Strade, edifici, persino le persone trasmettevano un&#39;energia diversa, un&#39;aria di rivoluzione e disciplina.~~  
[after 14 second]
~~Le tue emozioni erano contrastanti. Da un lato, la curiosità di comprendere questa nuova realtà, di scoprire cosa fosse accaduto durante la tua assenza. Dall&#39;altro, la nostalgia struggente per un passato che sembrava ormai svanito nel nulla.~~  
[after 18 second]
{link to: &#39;inizio3.2&#39;, label: &#39;Continua a investigare&#39;}  
[continued]</tw-passagedata><tw-passagedata pid="94" name="inizio2.2_en" tags="" position="1650,1025" size="100,100">[after 1 second]
~~You stopped for a moment, taken aback by the unexpected. Your eyes rested on the propaganda posters that covered the walls and buildings, silent witnesses of a radical change.~~
[after 5 seconds]
~~Bright colors and peremptory slogans declared the rise of the new regime. The hammer and sickle, symbols you had once only seen in history books, now dominated the urban landscape, replacing the old emblems of the city you remembered.~~
[after 9 seconds]
~~It wasn&#39;t just a political issue: Milan seemed to have been reshaped into something new, unrecognizable. Streets, buildings, even people conveyed a different energy, an air of revolution and discipline.~~
[after 14 seconds]
~~Your emotions were mixed. On one hand, the curiosity to understand this new reality, to discover what had happened during your absence. On the other hand, the poignant nostalgia for a past that seemed to have vanished into thin air.~~
[after 18 seconds]
{link to: &#39;inizio3.2_en&#39;, label: &#39;Keep investigating&#39;}
[continued]</tw-passagedata><tw-passagedata pid="95" name="inizio3.1" tags="" position="1150,200" size="100,100">[after 1 second]
~~Mentre continuavi a camminare, notavi i volti dei cittadini, ora segnati da un misto di speranza e rassegnazione. La loro espressione, una fusione di emozioni contrastanti, sembrava riflettere l&#39;anima stessa della città.~~  
[after 6 second]
~~Le piazze erano piene di vita, con il rumore delle conversazioni, i mercati che brulicavano di venditori e acquirenti. Ma sotto quella superficie vibrante, c&#39;era una tensione palpabile, come se ogni parola e ogni gesto fossero carichi di significato. Ogni angolo di Milano sembrava raccontare una storia diversa, una storia fatta di lotte, sacrifici e cambiamenti che avevano scolpito il volto della città.~~  
[after 13 second]
~~La tua mente era un vortice di pensieri, cercando di conciliare l&#39;immagine di Milano che avevi amato con quella che avevi davanti agli occhi. Milano, la tua Milano, non era più quella di un tempo: era un mosaico complesso e affascinante, un luogo di contrasti in cui il passato e il presente si scontravano e si fondevano, dando vita a qualcosa di nuovo, ma anche inquietante.~~  
[after 18 second]
{link to: &#39;01.1&#39;, label: &#39;Avanti&#39;}  
[continued]</tw-passagedata><tw-passagedata pid="96" name="inizio3.1_en" tags="" position="1825,1200" size="100,100">[after 1 second]
~~As you continued walking, you noticed the faces of the citizens, now marked by a mixture of hope and resignation. Their expression, a fusion of contrasting emotions, seemed to reflect the very soul of the city.~~
[after 6 second]
~~The squares were full of life, with the sound of conversations, the markets bustling with sellers and buyers. But beneath that vibrant surface, there was a palpable tension, as if every word and every gesture were loaded with meaning. Every corner of Milan seemed to tell a different story, a story made of struggles, sacrifices and changes that had sculpted the face of the city.~~
[after 13 second]
~~Your mind was a vortex of thoughts, trying to reconcile the image of Milan that you had loved with the one you had before your eyes. Milan, your Milan, was no longer what it once was: it was a complex and fascinating mosaic, a place of contrasts where the past and the present collided and merged, giving life to something new, but also disturbing.~~
[after 18 seconds]
{link to: &#39;01.1_en&#39;, label: &#39;Continue&#39;}
[continued]</tw-passagedata><tw-passagedata pid="97" name="inizio3.2" tags="" position="1150,350" size="100,100">[after 1 second]
~~Mentre continuavi a camminare, notavi i volti dei cittadini, ora segnati da un misto di speranza e rassegnazione. La loro espressione, una fusione di emozioni contrastanti, sembrava riflettere l&#39;anima stessa della città.~~  
[after 6 second]
~~Le piazze erano piene di vita, con il rumore delle conversazioni, i mercati che brulicavano di venditori e acquirenti. Ma sotto quella superficie vibrante, c&#39;era una tensione palpabile, come se ogni parola e ogni gesto fossero carichi di significato. Ogni angolo di Milano sembrava raccontare una storia diversa, una storia fatta di lotte, sacrifici e cambiamenti che avevano scolpito il volto della città.~~  
[after 13 second]
~~La tua mente era un vortice di pensieri, cercando di conciliare l&#39;immagine di Milano che avevi amato con quella che avevi davanti agli occhi. Milano, la tua Milano, non era più quella di un tempo: era un mosaico complesso e affascinante, un luogo di contrasti in cui il passato e il presente si scontravano e si fondevano, dando vita a qualcosa di nuovo, ma anche inquietante.~~  
[after 18 second]
{link to: &#39;01.2&#39;, label: &#39;Avanti&#39;}  
[continued]</tw-passagedata><tw-passagedata pid="98" name="inizio3.2_en" tags="" position="1825,1025" size="100,100">[after 1 second]
~~As you continued walking, you noticed the faces of the citizens, now marked by a mixture of hope and resignation. Their expression, a fusion of contrasting emotions, seemed to reflect the very soul of the city.~~
[after 6 second]
~~The squares were full of life, with the sound of conversations, the markets bustling with sellers and buyers. But beneath that vibrant surface, there was a palpable tension, as if every word and every gesture were loaded with meaning. Every corner of Milan seemed to tell a different story, a story made of struggles, sacrifices and changes that had sculpted the face of the city.~~
[after 13 second]
~~Your mind was a vortex of thoughts, trying to reconcile the image of Milan that you had loved with the one you had before your eyes. Milan, your Milan, was no longer what it once was: it was a complex and fascinating mosaic, a place of contrasts where the past and the present collided and merged, giving life to something new, but also disturbing.~~
[after 18 seconds]
{link to: &#39;01.2_en&#39;, label: &#39;Continue&#39;}
[continued]</tw-passagedata><tw-passagedata pid="99" name="selezione_lingua" tags="" position="250,675" size="100,100">~~Seleziona la lingua per la narrazione~~&lt;br&gt;&lt;br&gt;
{link to: &#39;2&#39;, label: &#39;Italiano&#39;}&lt;br&gt;
{link to: &#39;2_en&#39;, label: &#39;English&#39;}</tw-passagedata></tw-storydata></html>